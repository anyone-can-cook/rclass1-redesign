% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
\PassOptionsToPackage{dvipsnames,svgnames*,x11names*}{xcolor}
%
\documentclass[
  8pt,
  ignorenonframetext,
  dvipsnames]{beamer}
\usepackage{pgfpages}
\setbeamertemplate{caption}[numbered]
\setbeamertemplate{caption label separator}{: }
\setbeamercolor{caption name}{fg=normal text.fg}
\beamertemplatenavigationsymbolsempty
% Prevent slide breaks in the middle of a paragraph
\widowpenalties 1 10000
\raggedbottom
\setbeamertemplate{part page}{
  \centering
  \begin{beamercolorbox}[sep=16pt,center]{part title}
    \usebeamerfont{part title}\insertpart\par
  \end{beamercolorbox}
}
\setbeamertemplate{section page}{
  \centering
  \begin{beamercolorbox}[sep=12pt,center]{part title}
    \usebeamerfont{section title}\insertsection\par
  \end{beamercolorbox}
}
\setbeamertemplate{subsection page}{
  \centering
  \begin{beamercolorbox}[sep=8pt,center]{part title}
    \usebeamerfont{subsection title}\insertsubsection\par
  \end{beamercolorbox}
}
\AtBeginPart{
  \frame{\partpage}
}
\AtBeginSection{
  \ifbibliography
  \else
    \frame{\sectionpage}
  \fi
}
\AtBeginSubsection{
  \frame{\subsectionpage}
}
\usepackage{lmodern}
\usepackage{amssymb,amsmath}
\usepackage{ifxetex,ifluatex}
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\hypersetup{
  pdftitle={Augmented vectors, factor + labelled class},
  colorlinks=true,
  linkcolor=Maroon,
  filecolor=Maroon,
  citecolor=Blue,
  urlcolor=blue,
  pdfcreator={LaTeX via pandoc}}
\urlstyle{same} % disable monospaced font for URLs
\newif\ifbibliography
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\usepackage{longtable,booktabs}
\usepackage{caption}
% Make caption package work with longtable
\makeatletter
\def\fnum@table{\tablename~\thetable}
\makeatother
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{-\maxdimen} % remove section numbering

%packages
\usepackage{graphicx}
\usepackage{rotating}
\usepackage{hyperref}

\usepackage{tikz} % used for text highlighting, amongst others
\usepackage{comment}

%title slide stuff
%\institute{Department of Education}
%\title{Managing and Manipulating Data Using R}

%
\setbeamertemplate{navigation symbols}{} % get rid of navigation icons:
\setbeamertemplate{footline}[page number]

%\setbeamertemplate{frametitle}{\thesection \hspace{0.2cm} \insertframetitle}
\setbeamertemplate{section in toc}[sections numbered]
%\setbeamertemplate{subsection in toc}[subsections numbered]
\setbeamertemplate{subsection in toc}{%
  \leavevmode\leftskip=3.2em\color{gray}\rlap{\hskip-2em\inserttocsectionnumber.\inserttocsubsectionnumber}\inserttocsubsection\par
}

%define colors
%\definecolor{uva_orange}{RGB}{216,141,42} % UVa orange (Rotunda orange)
\definecolor{mygray}{rgb}{0.95, 0.95, 0.95} % for highlighted text
	% grey is equal parts red, green, blue. higher values >> lighter grey
	%\definecolor{lightgraybo}{rgb}{0.83, 0.83, 0.83}

% new commands

%highlight text with very light grey
\newcommand*{\hlg}[1]{%
	\tikz[baseline=(X.base)] \node[rectangle, fill=mygray] (X) {#1};%
}
%, inner sep=0.3mm
%highlight text with very light grey and use font associated with code
\newcommand*{\hlgc}[1]{\texttt{\hlg{#1}}}

%modifying back ticks to add grey background
\let\OldTexttt\texttt
\renewcommand{\texttt}[1]{\OldTexttt{\hlg{#1}}}


\begin{comment}

% Font
\usepackage[defaultfam,light,tabular,lining]{montserrat}
\usepackage[T1]{fontenc}
\renewcommand*\oldstylenums[1]{{\fontfamily{Montserrat-TOsF}\selectfont #1}}

% Change color of boldface text to darkgray
\renewcommand{\textbf}[1]{{\color{darkgray}\bfseries\fontfamily{Montserrat-TOsF}#1}}

% Bullet points
\setbeamertemplate{itemize item}{\color{BlueViolet}$\circ$}
\setbeamertemplate{itemize subitem}{\color{BrickRed}$\triangleright$}
\setbeamertemplate{itemize subsubitem}{$-$}

% Reduce space before lists
%\addtobeamertemplate{itemize/enumerate body begin}{}{\vspace*{-8pt}}

\let\olditem\item
\renewcommand{\item}{%
  \olditem\vspace{4pt}
}

% decreasing space before and after level-2 bullet block
%\addtobeamertemplate{itemize/enumerate subbody begin}{}{\vspace*{-3pt}}
%\addtobeamertemplate{itemize/enumerate subbody end}{}{\vspace*{-3pt}}

% decreasing space before and after level-3 bullet block
%\addtobeamertemplate{itemize/enumerate subsubbody begin}{}{\vspace*{-2pt}}
%\addtobeamertemplate{itemize/enumerate subsubbody end}{}{\vspace*{-2pt}}

%Section numbering
\setbeamertemplate{section page}{%
    \begingroup
        \begin{beamercolorbox}[sep=10pt,center,rounded=true,shadow=true]{section title}
        \usebeamerfont{section title}\thesection~\insertsection\par
        \end{beamercolorbox}
    \endgroup
}

\setbeamertemplate{subsection page}{%
    \begingroup
        \begin{beamercolorbox}[sep=6pt,center,rounded=true,shadow=true]{subsection title}
        \usebeamerfont{subsection title}\thesection.\thesubsection~\insertsubsection\par
        \end{beamercolorbox}
    \endgroup
}

\end{comment}
\ifluatex
  \usepackage{selnolig}  % disable illegal ligatures
\fi

\title{Augmented vectors, factor + labelled class}
\subtitle{EDUC 263: Introduction to Programming and Data Management
Using R}
\author{}
\date{\vspace{-2.5em}}

\begin{document}
\frame{\titlepage}

\begin{frame}
\tableofcontents
\end{frame}

\begin{frame}[fragile]{Libraries we will use}
\protect\hypertarget{libraries-we-will-use}{}
\textbf{Load the packages} we will use by running this code chunk:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{library}\NormalTok{(tidyverse)}
\KeywordTok{library}\NormalTok{(haven)}
\KeywordTok{library}\NormalTok{(labelled)}
\KeywordTok{library}\NormalTok{(lubridate)}
\end{Highlighting}
\end{Shaded}

\textbf{If package not yet installed}, then must install before you
load. Install in ``console'' rather than .Rmd file:

\begin{itemize}
\tightlist
\item
  Generic syntax: \texttt{install.packages("package\_name")}
\item
  Install ``tidyverse'': \texttt{install.packages("tidyverse")}
\end{itemize}

\textbf{Note}: When we load package, name of package is not in quotes;
but when we install package, name of package is in quotes:

\begin{itemize}
\tightlist
\item
  \texttt{install.packages("tidyverse")}
\item
  \texttt{library(tidyverse)}
\end{itemize}
\end{frame}

\begin{frame}[fragile]{Dataset we will use}
\protect\hypertarget{dataset-we-will-use}{}
\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{rm}\NormalTok{(}\DataTypeTok{list =} \KeywordTok{ls}\NormalTok{()) }\CommentTok{\# remove all objects}

\KeywordTok{load}\NormalTok{(}\KeywordTok{url}\NormalTok{(}\StringTok{"https://github.com/anyone{-}can{-}cook/rclass1/raw/master/data/prospect\_list/wwlist\_merged.RData"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}
\end{frame}

\hypertarget{attributes-and-augmented-vectors}{%
\section{Attributes and augmented
vectors}\label{attributes-and-augmented-vectors}}

\hypertarget{review-data-types-and-structures}{%
\subsection{Review data types and
structures}\label{review-data-types-and-structures}}

\begin{frame}{Review data structures: \textbf{Vectors}}
\protect\hypertarget{review-data-structures-vectors}{}
\medskip

Two types of vectors:

\begin{enumerate}
\tightlist
\item
  \textbf{Atomic vectors}
\item
  \textbf{Lists}
\end{enumerate}

\medskip

\begin{figure}
\centering
\includegraphics[width=0.6\textwidth,height=\textheight]{data-structures-overview.png}
\caption{Overview of data structures (Grolemund and Wickham, 2018)}
\end{figure}
\end{frame}

\begin{frame}[fragile]{Review data structures: atomic vectors}
\protect\hypertarget{review-data-structures-atomic-vectors}{}
\medskip An \textbf{atomic vector} is a collection of values

\begin{itemize}
\tightlist
\item
  Each value in an atomic vector is an \textbf{element}
\item
  All elements within vector must have same \textbf{data type}
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{(a \textless{}{-}}\StringTok{ }\KeywordTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{,}\DecValTok{2}\NormalTok{,}\DecValTok{3}\NormalTok{)) }\CommentTok{\# parentheses () assign and print object in one step}
\CommentTok{\#\textgreater{} [1] 1 2 3}
\KeywordTok{length}\NormalTok{(a) }\CommentTok{\# length = number of elements}
\CommentTok{\#\textgreater{} [1] 3}
\KeywordTok{typeof}\NormalTok{(a) }\CommentTok{\# numeric atomic vector, type=double}
\CommentTok{\#\textgreater{} [1] "double"}
\KeywordTok{str}\NormalTok{(a) }\CommentTok{\# investigate structure of object}
\CommentTok{\#\textgreater{}  num [1:3] 1 2 3}
\end{Highlighting}
\end{Shaded}

Can assign \textbf{names} to vector elements, creating a \textbf{named
atomic vector}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{(b \textless{}{-}}\StringTok{ }\KeywordTok{c}\NormalTok{(}\DataTypeTok{v1=}\DecValTok{1}\NormalTok{,}\DataTypeTok{v2=}\DecValTok{2}\NormalTok{,}\DataTypeTok{v3=}\DecValTok{3}\NormalTok{))}
\CommentTok{\#\textgreater{} v1 v2 v3 }
\CommentTok{\#\textgreater{}  1  2  3}
\KeywordTok{length}\NormalTok{(b) }
\CommentTok{\#\textgreater{} [1] 3}
\KeywordTok{typeof}\NormalTok{(b) }
\CommentTok{\#\textgreater{} [1] "double"}
\KeywordTok{str}\NormalTok{(b) }
\CommentTok{\#\textgreater{}  Named num [1:3] 1 2 3}
\CommentTok{\#\textgreater{}  {-} attr(*, "names")= chr [1:3] "v1" "v2" "v3"}
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{Review data structures: lists}
\protect\hypertarget{review-data-structures-lists}{}
\medskip

\begin{itemize}
\tightlist
\item
  Like atomic vectors, \textbf{lists} are objects that contain
  \textbf{elements}
\item
  However, \textbf{data type} can differ across elements within a list

  \begin{itemize}
  \tightlist
  \item
    E.g., an element of a list can be another list
  \end{itemize}
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{list\_a \textless{}{-}}\StringTok{ }\KeywordTok{list}\NormalTok{(}\DecValTok{1}\NormalTok{,}\DecValTok{2}\NormalTok{,}\StringTok{"apple"}\NormalTok{)}
\KeywordTok{typeof}\NormalTok{(list\_a)}
\CommentTok{\#\textgreater{} [1] "list"}
\KeywordTok{length}\NormalTok{(list\_a)}
\CommentTok{\#\textgreater{} [1] 3}
\KeywordTok{str}\NormalTok{(list\_a)}
\CommentTok{\#\textgreater{} List of 3}
\CommentTok{\#\textgreater{}  $ : num 1}
\CommentTok{\#\textgreater{}  $ : num 2}
\CommentTok{\#\textgreater{}  $ : chr "apple"}

\NormalTok{list\_b \textless{}{-}}\StringTok{ }\KeywordTok{list}\NormalTok{(}\DecValTok{1}\NormalTok{, }\KeywordTok{c}\NormalTok{(}\StringTok{"apple"}\NormalTok{, }\StringTok{"orange"}\NormalTok{), }\KeywordTok{list}\NormalTok{(}\DecValTok{1}\NormalTok{, }\DecValTok{2}\NormalTok{))}
\KeywordTok{length}\NormalTok{(list\_b)}
\CommentTok{\#\textgreater{} [1] 3}
\KeywordTok{str}\NormalTok{(list\_b)}
\CommentTok{\#\textgreater{} List of 3}
\CommentTok{\#\textgreater{}  $ : num 1}
\CommentTok{\#\textgreater{}  $ : chr [1:2] "apple" "orange"}
\CommentTok{\#\textgreater{}  $ :List of 2}
\CommentTok{\#\textgreater{}   ..$ : num 1}
\CommentTok{\#\textgreater{}   ..$ : num 2}
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{Review data structures: lists}
\protect\hypertarget{review-data-structures-lists-1}{}
Like atomic vectors, elements within a list can be named, thereby
creating a \textbf{named list}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# not named}
\KeywordTok{str}\NormalTok{(list\_b) }
\CommentTok{\#\textgreater{} List of 3}
\CommentTok{\#\textgreater{}  $ : num 1}
\CommentTok{\#\textgreater{}  $ : chr [1:2] "apple" "orange"}
\CommentTok{\#\textgreater{}  $ :List of 2}
\CommentTok{\#\textgreater{}   ..$ : num 1}
\CommentTok{\#\textgreater{}   ..$ : num 2}

\CommentTok{\# named}
\NormalTok{list\_c \textless{}{-}}\StringTok{ }\KeywordTok{list}\NormalTok{(}\DataTypeTok{v1=}\DecValTok{1}\NormalTok{, }\DataTypeTok{v2=}\KeywordTok{c}\NormalTok{(}\StringTok{"apple"}\NormalTok{, }\StringTok{"orange"}\NormalTok{), }\DataTypeTok{v3=}\KeywordTok{list}\NormalTok{(}\DecValTok{1}\NormalTok{, }\DecValTok{2}\NormalTok{, }\DecValTok{3}\NormalTok{))}
\KeywordTok{str}\NormalTok{(list\_c) }
\CommentTok{\#\textgreater{} List of 3}
\CommentTok{\#\textgreater{}  $ v1: num 1}
\CommentTok{\#\textgreater{}  $ v2: chr [1:2] "apple" "orange"}
\CommentTok{\#\textgreater{}  $ v3:List of 3}
\CommentTok{\#\textgreater{}   ..$ : num 1}
\CommentTok{\#\textgreater{}   ..$ : num 2}
\CommentTok{\#\textgreater{}   ..$ : num 3}
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{Review data structures: data frames}
\protect\hypertarget{review-data-structures-data-frames}{}
\medskip A \textbf{data frame} is a list with the following
characteristics:

\begin{itemize}
\tightlist
\item
  All the elements must be \textbf{vectors} with the same
  \textbf{length}
\item
  Data frames are \textbf{augmented lists} because they have additional
  \textbf{attributes}
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# a regular list}
\NormalTok{(list\_d \textless{}{-}}\StringTok{ }\KeywordTok{list}\NormalTok{(}\DataTypeTok{col\_a =} \KeywordTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{,}\DecValTok{2}\NormalTok{,}\DecValTok{3}\NormalTok{), }\DataTypeTok{col\_b =} \KeywordTok{c}\NormalTok{(}\DecValTok{4}\NormalTok{,}\DecValTok{5}\NormalTok{,}\DecValTok{6}\NormalTok{), }\DataTypeTok{col\_c =} \KeywordTok{c}\NormalTok{(}\DecValTok{7}\NormalTok{,}\DecValTok{8}\NormalTok{,}\DecValTok{9}\NormalTok{)))}
\CommentTok{\#\textgreater{} $col\_a}
\CommentTok{\#\textgreater{} [1] 1 2 3}
\CommentTok{\#\textgreater{} }
\CommentTok{\#\textgreater{} $col\_b}
\CommentTok{\#\textgreater{} [1] 4 5 6}
\CommentTok{\#\textgreater{} }
\CommentTok{\#\textgreater{} $col\_c}
\CommentTok{\#\textgreater{} [1] 7 8 9}
\KeywordTok{typeof}\NormalTok{(list\_d)}
\CommentTok{\#\textgreater{} [1] "list"}
\KeywordTok{attributes}\NormalTok{(list\_d)}
\CommentTok{\#\textgreater{} $names}
\CommentTok{\#\textgreater{} [1] "col\_a" "col\_b" "col\_c"}
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{Review data structures: data frames}
\protect\hypertarget{review-data-structures-data-frames-1}{}
\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# a data frame}
\NormalTok{(df\_a \textless{}{-}}\StringTok{ }\KeywordTok{data.frame}\NormalTok{(}\DataTypeTok{col\_a =} \KeywordTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{,}\DecValTok{2}\NormalTok{,}\DecValTok{3}\NormalTok{), }\DataTypeTok{col\_b =} \KeywordTok{c}\NormalTok{(}\DecValTok{4}\NormalTok{,}\DecValTok{5}\NormalTok{,}\DecValTok{6}\NormalTok{), }\DataTypeTok{col\_c =} \KeywordTok{c}\NormalTok{(}\DecValTok{7}\NormalTok{,}\DecValTok{8}\NormalTok{,}\DecValTok{9}\NormalTok{)))}
\CommentTok{\#\textgreater{}   col\_a col\_b col\_c}
\CommentTok{\#\textgreater{} 1     1     4     7}
\CommentTok{\#\textgreater{} 2     2     5     8}
\CommentTok{\#\textgreater{} 3     3     6     9}
\KeywordTok{typeof}\NormalTok{(df\_a)}
\CommentTok{\#\textgreater{} [1] "list"}
\KeywordTok{attributes}\NormalTok{(df\_a)}
\CommentTok{\#\textgreater{} $names}
\CommentTok{\#\textgreater{} [1] "col\_a" "col\_b" "col\_c"}
\CommentTok{\#\textgreater{} }
\CommentTok{\#\textgreater{} $class}
\CommentTok{\#\textgreater{} [1] "data.frame"}
\CommentTok{\#\textgreater{} }
\CommentTok{\#\textgreater{} $row.names}
\CommentTok{\#\textgreater{} [1] 1 2 3}
\end{Highlighting}
\end{Shaded}
\end{frame}

\hypertarget{attributes-and-augmented-vectors-1}{%
\subsection{Attributes and augmented
vectors}\label{attributes-and-augmented-vectors-1}}

\begin{frame}{Atomic vectors versus augmented vectors}
\protect\hypertarget{atomic-vectors-versus-augmented-vectors}{}
\textbf{Atomic vectors} {[}our focus so far{]}

\begin{itemize}
\tightlist
\item
  I think of atomic vectors as ``just the data''
\item
  Atomic vectors are the building blocks for augmented vectors
\end{itemize}

\medskip

\textbf{Augmented vectors}

\begin{itemize}
\tightlist
\item
  \textbf{Augmented vectors} are atomic vectors with additional
  \textbf{attributes} attached
\end{itemize}

\textbf{Attributes}

\begin{itemize}
\tightlist
\item
  \textbf{Attributes} are additional ``metadata'' that can be attached
  to any object (e.g., vector or list)
\end{itemize}

Example: Variables of a dataset

\begin{itemize}
\tightlist
\item
  A data frame is a list
\item
  Each element in the list is a variable, which consists of:

  \begin{itemize}
  \tightlist
  \item
    Atomic vector (``just the data'')
  \item
    Variable \textbf{name}, which is an attribute we attach to the
    element/variable
  \item
    Any other attributes we want to attach to each element/variable
  \end{itemize}
\end{itemize}

Other examples of attributes in R

\begin{itemize}
\tightlist
\item
  Value \textbf{labels}: Character labels (e.g., ``Charter School'')
  attached to numeric values
\item
  Object \textbf{class}: Specifies how object is treated by object
  oriented programming language
\end{itemize}

\textbf{Main takeaway}:

\begin{itemize}
\tightlist
\item
  \textbf{Augmented vectors} are \textbf{atomic vectors} (just the data)
  with additional \textbf{attributes} attached
\end{itemize}
\end{frame}

\begin{frame}[fragile]{Attributes and functions to identify/modify
attributes}
\protect\hypertarget{attributes-and-functions-to-identifymodify-attributes}{}
Description of attributes from Grolemund and Wickham 20.6

\begin{itemize}
\tightlist
\item
  ``Any vector can contain arbitrary additional \textbf{metadata}
  through its \textbf{attributes}''
\item
  ``You can think of \textbf{attributes} as named list of vectors that
  can be attached to any object''
\end{itemize}

Functions to identify and modify attributes

\begin{itemize}
\tightlist
\item
  \texttt{attributes()} function to describe all attributes of an object
\item
  \texttt{attr()} to see individual attribute of an object or set/change
  an individual attribute of an object
\end{itemize}
\end{frame}

\begin{frame}[fragile]{attributes() function: describes all attributes
of an object}
\protect\hypertarget{attributes-function-describes-all-attributes-of-an-object}{}
\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# pull up help file for the attributes() function}
\NormalTok{?attributes}
\end{Highlighting}
\end{Shaded}

Attributes of a \textbf{named atomic vector}:

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# create named atomic vector}
\NormalTok{(vector1 \textless{}{-}}\StringTok{ }\KeywordTok{c}\NormalTok{(}\DataTypeTok{a =} \DecValTok{1}\NormalTok{, }\DataTypeTok{b =} \DecValTok{2}\NormalTok{, }\DataTypeTok{c =} \DecValTok{3}\NormalTok{, }\DataTypeTok{d =} \DecValTok{4}\NormalTok{))}
\CommentTok{\#\textgreater{} a b c d }
\CommentTok{\#\textgreater{} 1 2 3 4}
\KeywordTok{attributes}\NormalTok{(vector1)}
\CommentTok{\#\textgreater{} $names}
\CommentTok{\#\textgreater{} [1] "a" "b" "c" "d"}

\CommentTok{\# remove all attributes from the object}
\KeywordTok{attributes}\NormalTok{(vector1) \textless{}{-}}\StringTok{ }\OtherTok{NULL}
\NormalTok{vector1}
\CommentTok{\#\textgreater{} [1] 1 2 3 4}
\KeywordTok{attributes}\NormalTok{(vector1)}
\CommentTok{\#\textgreater{} NULL}
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{attributes() function, attributes of a variable
in a data frame}
\protect\hypertarget{attributes-function-attributes-of-a-variable-in-a-data-frame}{}
\medskip

\textbf{Accessing variable using \texttt{{[}{[}{]}{]}} subset operator}

\begin{itemize}
\tightlist
\item
  Recall \texttt{object\_name{[}{[}"element\_name"{]}{]}} accesses
  contents of the element
\item
  If object is a data frame, \texttt{df\_name{[}{[}"var\_name"{]}{]}}
  accesses contents of variable

  \begin{itemize}
  \tightlist
  \item
    For simple vars like \texttt{firstgen}, syntax yields an atomic
    vector (``just the data'')
  \end{itemize}
\item
  Shorthand syntax for \texttt{df\_name{[}{[}"var\_name"{]}{]}} is
  \texttt{df\_name\$var\_name}
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{str}\NormalTok{(wwlist[[}\StringTok{"firstgen"}\NormalTok{]])}
\CommentTok{\#\textgreater{}  chr [1:268396] NA "N" "N" "N" NA "N" "N" "Y" "Y" "N" "N" "N" "N" "N" "N" ...}
\KeywordTok{attributes}\NormalTok{(wwlist[[}\StringTok{"firstgen"}\NormalTok{]])}
\CommentTok{\#\textgreater{} NULL}

\KeywordTok{str}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{firstgen) }\CommentTok{\# same same}
\CommentTok{\#\textgreater{}  chr [1:268396] NA "N" "N" "N" NA "N" "N" "Y" "Y" "N" "N" "N" "N" "N" "N" ...}
\KeywordTok{attributes}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{firstgen)}
\CommentTok{\#\textgreater{} NULL}
\end{Highlighting}
\end{Shaded}

\textbf{Accessing variable using \texttt{{[}{]}} subset operator}

\begin{itemize}
\tightlist
\item
  \texttt{object\_name{[}"element\_name"{]}} creates object of same type
  as \texttt{object\_name}
\item
  If object is a data frame, \texttt{df\_name{[}"var\_name"{]}} returns
  a data frame containing just the \texttt{var\_name} column
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{str}\NormalTok{(wwlist[}\StringTok{"firstgen"}\NormalTok{])}
\KeywordTok{attributes}\NormalTok{(wwlist[}\StringTok{"firstgen"}\NormalTok{])}
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{attributes() function, attributes of lists and
data frames}
\protect\hypertarget{attributes-function-attributes-of-lists-and-data-frames}{}
\medskip

Attributes of a \textbf{named list}:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{list2 \textless{}{-}}\StringTok{ }\KeywordTok{list}\NormalTok{(}\DataTypeTok{col\_a =} \KeywordTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{,}\DecValTok{2}\NormalTok{,}\DecValTok{3}\NormalTok{), }\DataTypeTok{col\_b =} \KeywordTok{c}\NormalTok{(}\DecValTok{4}\NormalTok{,}\DecValTok{5}\NormalTok{,}\DecValTok{6}\NormalTok{))}
\KeywordTok{str}\NormalTok{(list2)}
\CommentTok{\#\textgreater{} List of 2}
\CommentTok{\#\textgreater{}  $ col\_a: num [1:3] 1 2 3}
\CommentTok{\#\textgreater{}  $ col\_b: num [1:3] 4 5 6}
\KeywordTok{attributes}\NormalTok{(list2)}
\CommentTok{\#\textgreater{} $names}
\CommentTok{\#\textgreater{} [1] "col\_a" "col\_b"}
\end{Highlighting}
\end{Shaded}

Attributes of a \textbf{data frame}:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{list3 \textless{}{-}}\StringTok{ }\KeywordTok{data.frame}\NormalTok{(}\DataTypeTok{col\_a =} \KeywordTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{,}\DecValTok{2}\NormalTok{,}\DecValTok{3}\NormalTok{), }\DataTypeTok{col\_b =} \KeywordTok{c}\NormalTok{(}\DecValTok{4}\NormalTok{,}\DecValTok{5}\NormalTok{,}\DecValTok{6}\NormalTok{))}
\KeywordTok{str}\NormalTok{(list3)}
\CommentTok{\#\textgreater{} \textquotesingle{}data.frame\textquotesingle{}:    3 obs. of  2 variables:}
\CommentTok{\#\textgreater{}  $ col\_a: num  1 2 3}
\CommentTok{\#\textgreater{}  $ col\_b: num  4 5 6}
\KeywordTok{attributes}\NormalTok{(list3)}
\CommentTok{\#\textgreater{} $names}
\CommentTok{\#\textgreater{} [1] "col\_a" "col\_b"}
\CommentTok{\#\textgreater{} }
\CommentTok{\#\textgreater{} $class}
\CommentTok{\#\textgreater{} [1] "data.frame"}
\CommentTok{\#\textgreater{} }
\CommentTok{\#\textgreater{} $row.names}
\CommentTok{\#\textgreater{} [1] 1 2 3}
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{attr() function: get or set specific attributes
of an object}
\protect\hypertarget{attr-function-get-or-set-specific-attributes-of-an-object}{}
Syntax

\begin{itemize}
\tightlist
\item
  Get: \texttt{attr(x,\ which,\ exact\ =\ FALSE)}
\item
  Set: \texttt{attr(x,\ which)\ \textless{}-\ value}
\end{itemize}

Arguments

\begin{itemize}
\tightlist
\item
  \texttt{x}: an object whose attributes are to be accessed
\item
  \texttt{which}: a non-empty character string specifying which
  attribute is to be accessed
\item
  \texttt{exact} (logical): should \texttt{which} be matched exactly?
  default is \texttt{exact\ =\ FALSE}
\item
  \texttt{value}: an object, new value of attribute, or \texttt{NULL} to
  remove attribute
\end{itemize}

\medskip

\textbf{Using \texttt{attr()} to get specific attribute of an object}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{(vector1 \textless{}{-}}\StringTok{ }\KeywordTok{c}\NormalTok{(}\DataTypeTok{a =} \DecValTok{1}\NormalTok{, }\DataTypeTok{b=} \DecValTok{2}\NormalTok{, }\DataTypeTok{c=} \DecValTok{3}\NormalTok{, }\DataTypeTok{d =} \DecValTok{4}\NormalTok{))}
\CommentTok{\#\textgreater{} a b c d }
\CommentTok{\#\textgreater{} 1 2 3 4}
\KeywordTok{attributes}\NormalTok{(vector1)}
\CommentTok{\#\textgreater{} $names}
\CommentTok{\#\textgreater{} [1] "a" "b" "c" "d"}
\KeywordTok{attr}\NormalTok{(}\DataTypeTok{x=}\NormalTok{vector1, }\DataTypeTok{which =} \StringTok{"names"}\NormalTok{, }\DataTypeTok{exact =} \OtherTok{FALSE}\NormalTok{)}
\CommentTok{\#\textgreater{} [1] "a" "b" "c" "d"}
\KeywordTok{attr}\NormalTok{(vector1, }\StringTok{"names"}\NormalTok{)}
\CommentTok{\#\textgreater{} [1] "a" "b" "c" "d"}
\KeywordTok{attr}\NormalTok{(vector1, }\StringTok{"name"}\NormalTok{) }\CommentTok{\# we don\textquotesingle{}t provide exact name of attribute}
\CommentTok{\#\textgreater{} [1] "a" "b" "c" "d"}
\KeywordTok{attr}\NormalTok{(vector1, }\StringTok{"name"}\NormalTok{, }\DataTypeTok{exact =} \OtherTok{TRUE}\NormalTok{) }\CommentTok{\# don\textquotesingle{}t provide exact name of attribute}
\CommentTok{\#\textgreater{} NULL}
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{attr() function: get or set specific attributes
of an object}
\protect\hypertarget{attr-function-get-or-set-specific-attributes-of-an-object-1}{}
Syntax

\begin{itemize}
\tightlist
\item
  Get: \texttt{attr(x,\ which,\ exact\ =\ FALSE)}
\item
  Set: \texttt{attr(x,\ which)\ \textless{}-\ value}
\end{itemize}

Arguments

\begin{itemize}
\tightlist
\item
  \texttt{x}: an object whose attributes are to be accessed
\item
  \texttt{which}: a non-empty character string specifying which
  attribute is to be accessed
\item
  \texttt{exact} (logical): should \texttt{which} be matched exactly?
  default is \texttt{exact\ =\ FALSE}
\item
  \texttt{value}: an object, new value of attribute, or \texttt{NULL} to
  remove attribute
\end{itemize}

\medskip

\textbf{Using \texttt{attr()} to set specific attribute of an object}
(output omitted)

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{(vector1 \textless{}{-}}\StringTok{ }\KeywordTok{c}\NormalTok{(}\DataTypeTok{a =} \DecValTok{1}\NormalTok{, }\DataTypeTok{b=} \DecValTok{2}\NormalTok{, }\DataTypeTok{c=} \DecValTok{3}\NormalTok{, }\DataTypeTok{d =} \DecValTok{4}\NormalTok{))}
\KeywordTok{attributes}\NormalTok{(vector1) }\CommentTok{\# see all attributes}

\KeywordTok{attr}\NormalTok{(}\DataTypeTok{x=}\NormalTok{vector1, }\DataTypeTok{which =} \StringTok{"greeting"}\NormalTok{) \textless{}{-}}\StringTok{ "Hi!"} \CommentTok{\# create new attribute}
\KeywordTok{attr}\NormalTok{(}\DataTypeTok{x=}\NormalTok{vector1, }\DataTypeTok{which =} \StringTok{"greeting"}\NormalTok{) }\CommentTok{\# see attribute}

\KeywordTok{attr}\NormalTok{(vector1, }\StringTok{"farewell"}\NormalTok{) \textless{}{-}}\StringTok{ "Bye!"} \CommentTok{\# create attribute}

\KeywordTok{attr}\NormalTok{(}\DataTypeTok{x=}\NormalTok{vector1, }\DataTypeTok{which =} \StringTok{"names"}\NormalTok{) }\CommentTok{\# see names attribute}
\KeywordTok{attr}\NormalTok{(}\DataTypeTok{x=}\NormalTok{vector1, }\DataTypeTok{which =} \StringTok{"names"}\NormalTok{) \textless{}{-}}\StringTok{ }\OtherTok{NULL} \CommentTok{\# delete names attribute}

\KeywordTok{attributes}\NormalTok{(vector1) }\CommentTok{\# see all attributes}
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{attr() function, apply on data frames}
\protect\hypertarget{attr-function-apply-on-data-frames}{}
\medskip

\textbf{Using \texttt{wwlist}, create data frame with three variables}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{wwlist\_small \textless{}{-}}\StringTok{ }\NormalTok{wwlist[}\DecValTok{1}\OperatorTok{:}\DecValTok{25}\NormalTok{, ] }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{select}\NormalTok{(hs\_state,firstgen,med\_inc\_zip)}
\KeywordTok{str}\NormalTok{(wwlist\_small)}
\KeywordTok{attributes}\NormalTok{(wwlist\_small)}
\end{Highlighting}
\end{Shaded}

\textbf{Get/set attribute of a data frame}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#get/examine names attribute}
\KeywordTok{attr}\NormalTok{(}\DataTypeTok{x=}\NormalTok{wwlist\_small, }\DataTypeTok{which =} \StringTok{"names"}\NormalTok{) }
\KeywordTok{str}\NormalTok{(}\KeywordTok{attr}\NormalTok{(}\DataTypeTok{x=}\NormalTok{wwlist\_small, }\DataTypeTok{which =} \StringTok{"names"}\NormalTok{)) }\CommentTok{\# names attribute is character atomic vector, length=3}

\CommentTok{\#add new attribute to data frame}
\KeywordTok{attr}\NormalTok{(}\DataTypeTok{x=}\NormalTok{wwlist\_small, }\DataTypeTok{which =} \StringTok{"new\_attribute"}\NormalTok{) \textless{}{-}}\StringTok{ "contents of new attribute"}
\KeywordTok{attributes}\NormalTok{(wwlist\_small)}
\end{Highlighting}
\end{Shaded}

\textbf{Get/set attribute of a variable in data frame}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{str}\NormalTok{(wwlist\_small}\OperatorTok{$}\NormalTok{med\_inc\_zip)}
\KeywordTok{attributes}\NormalTok{(wwlist\_small}\OperatorTok{$}\NormalTok{med\_inc\_zip)}

\CommentTok{\#create attribute for variable med\_inc\_zip}
\KeywordTok{attr}\NormalTok{(wwlist\_small}\OperatorTok{$}\NormalTok{med\_inc\_zip, }\StringTok{"inc attribute"}\NormalTok{) \textless{}{-}}\StringTok{ "inc attribute contents"}

\CommentTok{\#investigate attribute for variable med\_inc\_zip}
\KeywordTok{attributes}\NormalTok{(wwlist\_small}\OperatorTok{$}\NormalTok{med\_inc\_zip)}
\KeywordTok{str}\NormalTok{(wwlist\_small}\OperatorTok{$}\NormalTok{med\_inc\_zip)}
\KeywordTok{attr}\NormalTok{(wwlist\_small}\OperatorTok{$}\NormalTok{med\_inc\_zip, }\StringTok{"inc attribute"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{Why add attributes to data frame or variables of
data frame?}
\protect\hypertarget{why-add-attributes-to-data-frame-or-variables-of-data-frame}{}
Pedagogical reasons

\begin{itemize}
\tightlist
\item
  Important to know how you can apply \texttt{attributes()} and
  \texttt{attr()} to data frames and to variables within data frames
\end{itemize}

\medskip

Example practical application: interactive dashboards

\begin{itemize}
\tightlist
\item
  When creating ``dashboard'' you might want to add ``tooltips''

  \begin{itemize}
  \tightlist
  \item
    ``Tooltip'' is a message that appears when cursor is positioned over
    an icon
  \item
    The text in the tooltip is the contents of an attribute
  \end{itemize}
\item
  Example dashboard: \href{https://jkcf.shinyapps.io/dashboard/}{LINK}
\end{itemize}
\end{frame}

\begin{frame}[fragile]{Student exercises}
\protect\hypertarget{student-exercises}{}
\begin{enumerate}
\item
  Using \texttt{wwlist}, create data frame of 30 observations with three
  variables: \texttt{state}, \texttt{zip5}, \texttt{pop\_total\_zip}
\item
  Return all attributes of this new data frame using
  \texttt{attributes()}. Then, get the \texttt{names} attribute of the
  data frame using \texttt{attr()}.
\item
  Add a new attribute to the data frame called \texttt{attribute\_data}
  whose content is \texttt{"new\ attribute\ of\ data"}. Then, return all
  attributes of the data frame as well as get the value of the newly
  created \texttt{attribute\_data}.
\item
  Return the attributes of the variable \texttt{pop\_total\_zip} in the
  data frame.
\item
  Add a new attribute to the variable \texttt{pop\_total\_zip} called
  \texttt{attribute\_variable} whose content is
  \texttt{"new\ attribute\ of\ variable"}. Then, return all attributes
  of the variable as well as get the value of the newly created
  \texttt{attribute\_variable}.
\end{enumerate}
\end{frame}

\begin{frame}[fragile]{Solution to student exercises}
\protect\hypertarget{solution-to-student-exercises}{}
\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Part 1}
\NormalTok{wwlist\_exercise \textless{}{-}}\StringTok{ }\NormalTok{wwlist[}\DecValTok{1}\OperatorTok{:}\DecValTok{30}\NormalTok{, ] }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{select}\NormalTok{(state, zip5, pop\_total\_zip)}

\CommentTok{\# Part 2}
\KeywordTok{attributes}\NormalTok{(wwlist\_exercise)}
\KeywordTok{attr}\NormalTok{(}\DataTypeTok{x=}\NormalTok{wwlist\_exercise, }\DataTypeTok{which =} \StringTok{"names"}\NormalTok{) }

\CommentTok{\# Part 3}
\KeywordTok{attr}\NormalTok{(}\DataTypeTok{x=}\NormalTok{wwlist\_exercise, }\DataTypeTok{which =} \StringTok{"attribute\_data"}\NormalTok{) \textless{}{-}}\StringTok{ "new attribute of data"}

\KeywordTok{attributes}\NormalTok{(wwlist\_exercise)}
\KeywordTok{attr}\NormalTok{(wwlist\_exercise, }\DataTypeTok{which =}\StringTok{"attribute\_data"}\NormalTok{)}

\CommentTok{\# Part 4}
\KeywordTok{attributes}\NormalTok{(wwlist\_exercise}\OperatorTok{$}\NormalTok{pop\_total\_zip)}

\CommentTok{\# Part 5}
\KeywordTok{attr}\NormalTok{(wwlist\_exercise}\OperatorTok{$}\NormalTok{pop\_total\_zip, }\StringTok{"attribute\_variable"}\NormalTok{) \textless{}{-}}\StringTok{ "new attribute of variable"}

\KeywordTok{attributes}\NormalTok{(wwlist\_exercise}\OperatorTok{$}\NormalTok{pop\_total\_zip)}
\KeywordTok{attr}\NormalTok{(wwlist\_exercise}\OperatorTok{$}\NormalTok{pop\_total\_zip, }\StringTok{"attribute\_variable"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}
\end{frame}

\hypertarget{object-class}{%
\section{Object class}\label{object-class}}

\begin{frame}[fragile]{Object class}
\protect\hypertarget{object-class-1}{}
\medskip

Every object in R has a \textbf{class}

\begin{itemize}
\tightlist
\item
  Class is an \textbf{attribute} of an object
\item
  Object class controls how functions work and defines the rules for how
  objects can be treated by object oriented programming language

  \begin{itemize}
  \tightlist
  \item
    E.g., which functions you can apply to object of a particular class
  \item
    E.g., what the function does to one object class, what it does to
    another object class
  \end{itemize}
\end{itemize}

You can use the \texttt{class()} function to identify object class:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{(vector2 \textless{}{-}}\StringTok{ }\KeywordTok{c}\NormalTok{(}\DataTypeTok{a =} \DecValTok{1}\NormalTok{, }\DataTypeTok{b=} \DecValTok{2}\NormalTok{, }\DataTypeTok{c=} \DecValTok{3}\NormalTok{, }\DataTypeTok{d =} \DecValTok{4}\NormalTok{))}
\CommentTok{\#\textgreater{} a b c d }
\CommentTok{\#\textgreater{} 1 2 3 4}
\KeywordTok{typeof}\NormalTok{(vector2)}
\CommentTok{\#\textgreater{} [1] "double"}
\KeywordTok{class}\NormalTok{(vector2)}
\CommentTok{\#\textgreater{} [1] "numeric"}
\end{Highlighting}
\end{Shaded}

When I encounter a new object I often investigate object by applying
\texttt{typeof()}, \texttt{class()}, and \texttt{attributes()}
functions:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{typeof}\NormalTok{(vector2)}
\CommentTok{\#\textgreater{} [1] "double"}
\KeywordTok{class}\NormalTok{(vector2)}
\CommentTok{\#\textgreater{} [1] "numeric"}
\KeywordTok{attributes}\NormalTok{(vector2)}
\CommentTok{\#\textgreater{} $names}
\CommentTok{\#\textgreater{} [1] "a" "b" "c" "d"}
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}{Why is object class important?}
\protect\hypertarget{why-is-object-class-important}{}
Functions care about object \textbf{class}, not object \textbf{type}

\medskip

Specific functions usually work with only particular \textbf{classes} of
objects

\begin{itemize}
\tightlist
\item
  ``Date'' functions usually only work on objects with a date class
\item
  ``String'' functions usually only work on objects with a character
  class
\item
  Functions that do mathematical computation usually work on objects
  with a numeric class
\end{itemize}
\end{frame}

\begin{frame}[fragile]{Functions care about object \textbf{class}, not
object \textbf{type}}
\protect\hypertarget{functions-care-about-object-class-not-object-type}{}
\medskip

\textbf{Example}: \texttt{sum()} applies to \textbf{numeric},
\textbf{logical}, or \textbf{complex} class objects

Apply \texttt{sum()} to object with class = \textbf{logical}:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x \textless{}{-}}\StringTok{ }\KeywordTok{c}\NormalTok{(}\OtherTok{TRUE}\NormalTok{, }\OtherTok{FALSE}\NormalTok{, }\OtherTok{NA}\NormalTok{, }\OtherTok{TRUE}\NormalTok{)}
\KeywordTok{typeof}\NormalTok{(x)}
\CommentTok{\#\textgreater{} [1] "logical"}
\KeywordTok{class}\NormalTok{(x)}
\CommentTok{\#\textgreater{} [1] "logical"}
\KeywordTok{sum}\NormalTok{(x, }\DataTypeTok{na.rm =} \OtherTok{TRUE}\NormalTok{)}
\CommentTok{\#\textgreater{} [1] 2}
\end{Highlighting}
\end{Shaded}

Apply \texttt{sum()} to object with class = \textbf{numeric}:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{typeof}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{med\_inc\_zip) }
\CommentTok{\#\textgreater{} [1] "double"}
\KeywordTok{class}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{med\_inc\_zip) }
\CommentTok{\#\textgreater{} [1] "numeric"}
\NormalTok{wwlist}\OperatorTok{$}\NormalTok{med\_inc\_zip[}\DecValTok{1}\OperatorTok{:}\DecValTok{5}\NormalTok{]}
\CommentTok{\#\textgreater{} [1] 92320.5 63653.0 88344.5 88408.5 82895.0}
\KeywordTok{sum}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{med\_inc\_zip[}\DecValTok{1}\OperatorTok{:}\DecValTok{5}\NormalTok{], }\DataTypeTok{na.rm =} \OtherTok{TRUE}\NormalTok{) }
\CommentTok{\#\textgreater{} [1] 415621.5}
\end{Highlighting}
\end{Shaded}

What happens when we try to apply \texttt{sum()} to an object with class
= \textbf{character}?

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{typeof}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{hs\_city)}
\KeywordTok{class}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{hs\_city)}
\NormalTok{wwlist}\OperatorTok{$}\NormalTok{hs\_city[}\DecValTok{1}\OperatorTok{:}\DecValTok{5}\NormalTok{]}
\KeywordTok{sum}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{hs\_city[}\DecValTok{1}\OperatorTok{:}\DecValTok{5}\NormalTok{], }\DataTypeTok{na.rm =} \OtherTok{TRUE}\NormalTok{) }
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{Functions care about object \textbf{class}, not
object \textbf{type}}
\protect\hypertarget{functions-care-about-object-class-not-object-type-1}{}
\textbf{Example}: \texttt{year()} from \texttt{lubridate} package
applies to date-time objects

Apply \texttt{year()} to object with class = \textbf{Date}:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{wwlist}\OperatorTok{$}\NormalTok{receive\_date[}\DecValTok{1}\OperatorTok{:}\DecValTok{5}\NormalTok{]}
\CommentTok{\#\textgreater{} [1] "2016{-}05{-}31" "2016{-}05{-}31" "2016{-}05{-}31" "2016{-}05{-}31" "2016{-}05{-}31"}
\KeywordTok{typeof}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{receive\_date)}
\CommentTok{\#\textgreater{} [1] "double"}
\KeywordTok{class}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{receive\_date) }
\CommentTok{\#\textgreater{} [1] "Date"}
\KeywordTok{year}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{receive\_date[}\DecValTok{1}\OperatorTok{:}\DecValTok{5}\NormalTok{])}
\CommentTok{\#\textgreater{} [1] 2016 2016 2016 2016 2016}
\end{Highlighting}
\end{Shaded}

What happens when we try to apply \texttt{year()} to an object with
class = \textbf{numeric}?

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{typeof}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{med\_inc\_zip) }
\KeywordTok{class}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{med\_inc\_zip) }
\KeywordTok{year}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{med\_inc\_zip[}\DecValTok{1}\OperatorTok{:}\DecValTok{10}\NormalTok{]) }
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{Functions care about object \textbf{class}, not
object \textbf{type}}
\protect\hypertarget{functions-care-about-object-class-not-object-type-2}{}
\textbf{Example}: \texttt{tolower()} applies to \textbf{character} class
objects

\begin{itemize}
\tightlist
\item
  Syntax: \texttt{tolower(x)}
\item
  \texttt{x} is ``a character vector, or an object that can be coerced
  to character by \texttt{as.character()}''
\end{itemize}

Most string functions are intended to apply to objects with a
\textbf{character} class

\begin{itemize}
\tightlist
\item
  \textbf{type} = character
\item
  \textbf{class} = character
\end{itemize}

Apply \texttt{tolower()} to object with class = \textbf{character}:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{str}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{hs\_city)}
\CommentTok{\#\textgreater{}  chr [1:268396] "Seattle" "Covington" "Everett" "Seattle" "Lake Stevens" ...}
\KeywordTok{typeof}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{hs\_city)}
\CommentTok{\#\textgreater{} [1] "character"}
\KeywordTok{class}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{hs\_city)}
\CommentTok{\#\textgreater{} [1] "character"}

\NormalTok{wwlist}\OperatorTok{$}\NormalTok{hs\_city[}\DecValTok{1}\OperatorTok{:}\DecValTok{6}\NormalTok{]}
\CommentTok{\#\textgreater{} [1] "Seattle"      "Covington"    "Everett"      "Seattle"      "Lake Stevens"}
\CommentTok{\#\textgreater{} [6] "Seattle"}
\KeywordTok{tolower}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{hs\_city[}\DecValTok{1}\OperatorTok{:}\DecValTok{6}\NormalTok{])}
\CommentTok{\#\textgreater{} [1] "seattle"      "covington"    "everett"      "seattle"      "lake stevens"}
\CommentTok{\#\textgreater{} [6] "seattle"}
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{Class and object-oriented programming}
\protect\hypertarget{class-and-object-oriented-programming}{}
R is an object-oriented programming language

\medskip

Definition of object oriented programming from this
\href{https://www.webopedia.com/TERM/O/object_oriented_programming_OOP.html}{LINK}

\medskip

\begin{quote}
``Object-oriented programming (OOP) refers to a type of computer
programming in which programmers define not only the data type of a data
structure, but also the types of operations (functions) that can be
applied to the data structure.''
\end{quote}

\medskip

Object \textbf{class} is fundamental to object oriented programming
because:

\begin{itemize}
\tightlist
\item
  Object class determines which functions can be applied to the object
\item
  Object class also determines what those functions do to the object

  \begin{itemize}
  \tightlist
  \item
    E.g., a specific function might do one thing to objects of
    \textbf{class} A and another thing to objects of \textbf{class} B
  \item
    What a function does to objects of different class is determined by
    whoever wrote the function
  \end{itemize}
\end{itemize}

\medskip

Many different object classes exist in R

\begin{itemize}
\tightlist
\item
  You can also create your own classes

  \begin{itemize}
  \tightlist
  \item
    Example: the \texttt{labelled} class is an object class created by
    Hadley Wickham when he created the \texttt{haven} package
  \end{itemize}
\item
  In this course we will work with classes that have been created by
  others
\end{itemize}
\end{frame}

\hypertarget{class-factor}{%
\section{Class == factor}\label{class-factor}}

\begin{frame}[fragile]{Recoding variable \texttt{ethn\_code} from data
frame \texttt{wwlist}}
\protect\hypertarget{recoding-variable-ethn_code-from-data-frame-wwlist}{}
Let's first recode the \texttt{ethn\_code} variable:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{wwlist \textless{}{-}}\StringTok{ }\NormalTok{wwlist }\OperatorTok{\%\textgreater{}\%}\StringTok{  }
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{ethn\_code =} 
    \KeywordTok{recode}\NormalTok{(ethn\_code,}
      \StringTok{"american indian or alaska native"}\NormalTok{ =}\StringTok{ "nativeam"}\NormalTok{,}
      \StringTok{"asian or native hawaiian or other pacific islander"}\NormalTok{ =}\StringTok{ "api"}\NormalTok{,}
      \StringTok{"black or african american"}\NormalTok{ =}\StringTok{ "black"}\NormalTok{,}
      \StringTok{"cuban"}\NormalTok{ =}\StringTok{ "latinx"}\NormalTok{,}
      \StringTok{"mexican/mexican american"}\NormalTok{ =}\StringTok{ "latinx"}\NormalTok{,}
      \StringTok{"not reported"}\NormalTok{ =}\StringTok{ "not\_reported"}\NormalTok{,}
      \StringTok{"other{-}2 or more"}\NormalTok{ =}\StringTok{ "multirace"}\NormalTok{,}
      \StringTok{"other spanish/hispanic"}\NormalTok{ =}\StringTok{ "latinx"}\NormalTok{,}
      \StringTok{"puerto rican"}\NormalTok{ =}\StringTok{ "latinx"}\NormalTok{,}
      \StringTok{"white"}\NormalTok{ =}\StringTok{ "white"}          
\NormalTok{    )}
\NormalTok{  )}

\KeywordTok{str}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{ethn\_code)}
\NormalTok{wwlist }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{count}\NormalTok{(ethn\_code)}
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{Factors}
\protect\hypertarget{factors}{}
\textbf{Factors} are an object \emph{class} used to display categorical
data (e.g., marital status)

\begin{itemize}
\tightlist
\item
  A factor is an \textbf{augmented vector} built by attaching a
  \textbf{levels} attribute to an (atomic) integer vectors
\end{itemize}

Usually, we would prefer a categorical variable (e.g., race, school
type) to be a factor variable rather than a character variable

\begin{itemize}
\tightlist
\item
  So far in the course I have made all categorical variables character
  variables because we had not introduced factors yet
\end{itemize}

\textbf{Create factor version of character variable \texttt{ethn\_code}
using base R \texttt{factor()} function}:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{str}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{ethn\_code)}
\CommentTok{\#\textgreater{}  chr [1:268396] "multirace" "white" "white" "multirace" "white" "multirace" ...}
\KeywordTok{class}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{ethn\_code)}
\CommentTok{\#\textgreater{} [1] "character"}

\CommentTok{\# create factor var; tidyverse approach}
\NormalTok{wwlist \textless{}{-}}\StringTok{ }\NormalTok{wwlist }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{ethn\_code\_fac =} \KeywordTok{factor}\NormalTok{(ethn\_code)) }
\CommentTok{\#wwlist$ethn\_code\_fac \textless{}{-} factor(wwlist$ethn\_code) \# base r approach}

\KeywordTok{str}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{ethn\_code)}
\CommentTok{\#\textgreater{}  chr [1:268396] "multirace" "white" "white" "multirace" "white" "multirace" ...}
\KeywordTok{str}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{ethn\_code\_fac)}
\CommentTok{\#\textgreater{}  Factor w/ 7 levels "api","black",..: 4 7 7 4 7 4 4 4 4 7 ...}
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{Factors}
\protect\hypertarget{factors-1}{}
\textbf{Character variable \texttt{ethn\_code}}:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{typeof}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{ethn\_code)}
\CommentTok{\#\textgreater{} [1] "character"}
\KeywordTok{class}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{ethn\_code)}
\CommentTok{\#\textgreater{} [1] "character"}
\KeywordTok{attributes}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{ethn\_code)}
\CommentTok{\#\textgreater{} NULL}
\KeywordTok{str}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{ethn\_code)}
\CommentTok{\#\textgreater{}  chr [1:268396] "multirace" "white" "white" "multirace" "white" "multirace" ...}
\end{Highlighting}
\end{Shaded}

\textbf{Factor variable \texttt{ethn\_code\_fac}}:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{typeof}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{ethn\_code\_fac)}
\CommentTok{\#\textgreater{} [1] "integer"}
\KeywordTok{class}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{ethn\_code\_fac)}
\CommentTok{\#\textgreater{} [1] "factor"}
\KeywordTok{attributes}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{ethn\_code\_fac)}
\CommentTok{\#\textgreater{} $levels}
\CommentTok{\#\textgreater{} [1] "api"          "black"        "latinx"       "multirace"    "nativeam"    }
\CommentTok{\#\textgreater{} [6] "not\_reported" "white"       }
\CommentTok{\#\textgreater{} }
\CommentTok{\#\textgreater{} $class}
\CommentTok{\#\textgreater{} [1] "factor"}
\KeywordTok{str}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{ethn\_code\_fac)}
\CommentTok{\#\textgreater{}  Factor w/ 7 levels "api","black",..: 4 7 7 4 7 4 4 4 4 7 ...}
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{Working with factor variables}
\protect\hypertarget{working-with-factor-variables}{}
Main things to note about variable \texttt{ethn\_code\_fac}

\begin{itemize}
\tightlist
\item
  \textbf{type} = integer
\item
  \textbf{class} = factor, because the variable has a \textbf{levels}
  attribute
\item
  Underlying data are integers, but the values of the \textbf{levels}
  attribute is what's displayed:
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Print first few obs of ethn\_code\_fac}
\NormalTok{wwlist}\OperatorTok{$}\NormalTok{ethn\_code\_fac[}\DecValTok{1}\OperatorTok{:}\DecValTok{5}\NormalTok{]}
\CommentTok{\#\textgreater{} [1] multirace white     white     multirace white    }
\CommentTok{\#\textgreater{} Levels: api black latinx multirace nativeam not\_reported white}

\CommentTok{\# Print count for each category in ethn\_code\_fac}
\NormalTok{wwlist }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{count}\NormalTok{(ethn\_code\_fac)}
\CommentTok{\#\textgreater{} \# A tibble: 7 x 2}
\CommentTok{\#\textgreater{}   ethn\_code\_fac      n}
\CommentTok{\#\textgreater{}   \textless{}fct\textgreater{}          \textless{}int\textgreater{}}
\CommentTok{\#\textgreater{} 1 api             2385}
\CommentTok{\#\textgreater{} 2 black            563}
\CommentTok{\#\textgreater{} 3 latinx          9245}
\CommentTok{\#\textgreater{} 4 multirace      90584}
\CommentTok{\#\textgreater{} 5 nativeam         202}
\CommentTok{\#\textgreater{} 6 not\_reported    5737}
\CommentTok{\#\textgreater{} 7 white         159680}
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{Working with factor variables}
\protect\hypertarget{working-with-factor-variables-1}{}
Apply \texttt{as.integer()} to display underlying integer values of
factor variable

Investigate \texttt{as.integer()} function:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{typeof}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{ethn\_code\_fac)}
\CommentTok{\#\textgreater{} [1] "integer"}
\KeywordTok{class}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{ethn\_code\_fac)}
\CommentTok{\#\textgreater{} [1] "factor"}

\KeywordTok{typeof}\NormalTok{(}\KeywordTok{as.integer}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{ethn\_code\_fac))}
\CommentTok{\#\textgreater{} [1] "integer"}
\KeywordTok{class}\NormalTok{(}\KeywordTok{as.integer}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{ethn\_code\_fac))}
\CommentTok{\#\textgreater{} [1] "integer"}
\end{Highlighting}
\end{Shaded}

Display underlying integer values of variable \texttt{ethn\_code\_fac}:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{wwlist }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{count}\NormalTok{(}\KeywordTok{as.integer}\NormalTok{(ethn\_code\_fac))}
\CommentTok{\#\textgreater{} \# A tibble: 7 x 2}
\CommentTok{\#\textgreater{}   \textasciigrave{}as.integer(ethn\_code\_fac)\textasciigrave{}      n}
\CommentTok{\#\textgreater{}                         \textless{}int\textgreater{}  \textless{}int\textgreater{}}
\CommentTok{\#\textgreater{} 1                           1   2385}
\CommentTok{\#\textgreater{} 2                           2    563}
\CommentTok{\#\textgreater{} 3                           3   9245}
\CommentTok{\#\textgreater{} 4                           4  90584}
\CommentTok{\#\textgreater{} 5                           5    202}
\CommentTok{\#\textgreater{} 6                           6   5737}
\CommentTok{\#\textgreater{} 7                           7 159680}
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{Working with factor variables}
\protect\hypertarget{working-with-factor-variables-2}{}
\medskip

Refer to categories of a factor (e.g., when filtering obs) using values
of \textbf{levels} attribute rather than underlying values of variable

\begin{itemize}
\tightlist
\item
  Values of \textbf{levels} attribute for \texttt{ethn\_code\_fac}
  (output omitted)
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{attributes}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{ethn\_code\_fac)}
\end{Highlighting}
\end{Shaded}

\medskip

\textbf{Example}: Count the number of prospects in \texttt{wwlist} who
identify as ``white''

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# referring to variable value; this doesn\textquotesingle{}t work}
\NormalTok{wwlist }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{filter}\NormalTok{(ethn\_code\_fac}\OperatorTok{==}\DecValTok{7}\NormalTok{) }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{count}\NormalTok{() }
\CommentTok{\#\textgreater{} \# A tibble: 1 x 1}
\CommentTok{\#\textgreater{}       n}
\CommentTok{\#\textgreater{}   \textless{}int\textgreater{}}
\CommentTok{\#\textgreater{} 1     0}

\CommentTok{\#referring to value of level attribute; this works}
\NormalTok{wwlist }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{filter}\NormalTok{(ethn\_code\_fac}\OperatorTok{==}\StringTok{"white"}\NormalTok{) }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{count}\NormalTok{()}
\CommentTok{\#\textgreater{} \# A tibble: 1 x 1}
\CommentTok{\#\textgreater{}        n}
\CommentTok{\#\textgreater{}    \textless{}int\textgreater{}}
\CommentTok{\#\textgreater{} 1 159680}
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{Working with factor variables}
\protect\hypertarget{working-with-factor-variables-3}{}
\textbf{Example}: Count the number of prospects in \texttt{wwlist} who
identify as ``white''

\begin{itemize}
\tightlist
\item
  To refer to underlying integer values, apply \texttt{as.integer()}
  function to factor variable
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{attributes}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{ethn\_code\_fac)}
\CommentTok{\#\textgreater{} $levels}
\CommentTok{\#\textgreater{} [1] "api"          "black"        "latinx"       "multirace"    "nativeam"    }
\CommentTok{\#\textgreater{} [6] "not\_reported" "white"       }
\CommentTok{\#\textgreater{} }
\CommentTok{\#\textgreater{} $class}
\CommentTok{\#\textgreater{} [1] "factor"}
\NormalTok{wwlist }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{filter}\NormalTok{(}\KeywordTok{as.integer}\NormalTok{(ethn\_code\_fac)}\OperatorTok{==}\DecValTok{7}\NormalTok{) }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\NormalTok{count }
\CommentTok{\#\textgreater{} \# A tibble: 1 x 1}
\CommentTok{\#\textgreater{}        n}
\CommentTok{\#\textgreater{}    \textless{}int\textgreater{}}
\CommentTok{\#\textgreater{} 1 159680}
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{How to identify the variable values associated
with factor levels}
\protect\hypertarget{how-to-identify-the-variable-values-associated-with-factor-levels}{}
Create a factor version of the character variable \texttt{psat\_range}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{wwlist }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{count}\NormalTok{(psat\_range)}
\NormalTok{wwlist \textless{}{-}}\StringTok{ }\NormalTok{wwlist }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{psat\_range\_fac =} \KeywordTok{factor}\NormalTok{(psat\_range))}
\NormalTok{wwlist }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{count}\NormalTok{(psat\_range\_fac)}
\KeywordTok{attributes}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{psat\_range\_fac)}
\end{Highlighting}
\end{Shaded}

Investigate values associated with factor levels using \texttt{levels()}
and \texttt{nlevels()}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{levels}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{psat\_range\_fac) }\CommentTok{\#starts at 1}
\KeywordTok{nlevels}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{psat\_range\_fac) }\CommentTok{\#7 levels total}
\KeywordTok{levels}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{psat\_range\_fac)[}\DecValTok{1}\OperatorTok{:}\DecValTok{3}\NormalTok{] }\CommentTok{\#prints levels 1{-}3}
\end{Highlighting}
\end{Shaded}

Once values associated with factor levels are known:

\begin{itemize}
\tightlist
\item
  Can filter based on underling integer values using
  \texttt{as.integer()}
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{wwlist }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{filter}\NormalTok{(}\KeywordTok{as.integer}\NormalTok{(psat\_range\_fac)}\OperatorTok{==}\DecValTok{4}\NormalTok{) }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{count}\NormalTok{()}
\CommentTok{\#\textgreater{} \# A tibble: 1 x 1}
\CommentTok{\#\textgreater{}       n}
\CommentTok{\#\textgreater{}   \textless{}int\textgreater{}}
\CommentTok{\#\textgreater{} 1  8348}
\end{Highlighting}
\end{Shaded}

\begin{itemize}
\tightlist
\item
  Or filter based on value of factor \textbf{levels}
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{wwlist }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{filter}\NormalTok{(psat\_range}\OperatorTok{==}\StringTok{"1270{-}1520"}\NormalTok{) }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{count}\NormalTok{()}
\CommentTok{\#\textgreater{} \# A tibble: 1 x 1}
\CommentTok{\#\textgreater{}       n}
\CommentTok{\#\textgreater{}   \textless{}int\textgreater{}}
\CommentTok{\#\textgreater{} 1  8348}
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}{Creating factor variables from character variables or from
integer variables}
\protect\hypertarget{creating-factor-variables-from-character-variables-or-from-integer-variables}{}
See Appendix
\end{frame}

\begin{frame}[fragile]{Factor student exercise}
\protect\hypertarget{factor-student-exercise}{}
\begin{enumerate}
\tightlist
\item
  After running the code below, use \texttt{typeof()}, \texttt{class()},
  \texttt{str()}, and \texttt{attributes()} functions to check the new
  variable \texttt{receive\_year}\\
\item
  Create a factor variable from the input variable
  \texttt{receive\_year} and name it \texttt{receive\_year\_fac}\\
\item
  Run the same functions (\texttt{typeof()}, \texttt{class()}, etc.)
  from the first question using the new variable you created\\
\item
  Get a count of \texttt{receive\_year\_fac}. (\textbf{hint:} you could
  also run this in the console to see values associated with each
  factor)
\end{enumerate}

Run this code to create a year variable from the input variable
\texttt{receive\_date}:

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# wwlist \%\textgreater{}\% glimpse()}

\KeywordTok{library}\NormalTok{(lubridate) }\CommentTok{\# load library if you haven\textquotesingle{}t already}
\NormalTok{wwlist \textless{}{-}}\StringTok{ }\NormalTok{wwlist }\OperatorTok{\%\textgreater{}\%}
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{receive\_year =} \KeywordTok{year}\NormalTok{(receive\_date)) }\CommentTok{\# create year variable with lubridate}

\CommentTok{\# Check variable}
\NormalTok{wwlist }\OperatorTok{\%\textgreater{}\%}\StringTok{ }
\StringTok{  }\KeywordTok{count}\NormalTok{(receive\_year)}

\NormalTok{wwlist }\OperatorTok{\%\textgreater{}\%}
\StringTok{  }\KeywordTok{group\_by}\NormalTok{(receive\_year) }\OperatorTok{\%\textgreater{}\%}\StringTok{ }
\StringTok{  }\KeywordTok{count}\NormalTok{(receive\_date)}
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{Factor student exercise solutions}
\protect\hypertarget{factor-student-exercise-solutions}{}
\begin{enumerate}
\tightlist
\item
  After running the code below, use \texttt{typeof()}, \texttt{class()},
  \texttt{str()}, and \texttt{attributes()} functions to check the new
  variable \texttt{receive\_year}
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{typeof}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{receive\_year)}
\CommentTok{\#\textgreater{} [1] "double"}
\KeywordTok{class}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{receive\_year)}
\CommentTok{\#\textgreater{} [1] "numeric"}
\KeywordTok{str}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{receive\_year)}
\CommentTok{\#\textgreater{}  num [1:268396] 2016 2016 2016 2016 2016 ...}
\KeywordTok{attributes}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{receive\_year) }
\CommentTok{\#\textgreater{} NULL}
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{Factor student exercise solutions}
\protect\hypertarget{factor-student-exercise-solutions-1}{}
\begin{enumerate}
\setcounter{enumi}{1}
\tightlist
\item
  Create a factor variable from the input variable
  \texttt{receive\_year} and name it \texttt{receive\_year\_fac}
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# create factor var; tidyverse approach}
\NormalTok{wwlist \textless{}{-}}\StringTok{ }\NormalTok{wwlist }\OperatorTok{\%\textgreater{}\%}
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{receive\_year\_fac =} \KeywordTok{factor}\NormalTok{(receive\_year))  }
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{Factor student exercise solutions}
\protect\hypertarget{factor-student-exercise-solutions-2}{}
\begin{enumerate}
\setcounter{enumi}{2}
\tightlist
\item
  Run the same functions (\texttt{typeof()}, \texttt{class()}, etc.)
  from the first question using the new variable you created
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{typeof}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{receive\_year\_fac)}
\CommentTok{\#\textgreater{} [1] "integer"}
\KeywordTok{class}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{receive\_year\_fac)}
\CommentTok{\#\textgreater{} [1] "factor"}
\KeywordTok{str}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{receive\_year\_fac)}
\CommentTok{\#\textgreater{}  Factor w/ 3 levels "2016","2017",..: 1 1 1 1 1 1 1 1 1 1 ...}
\KeywordTok{attributes}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{receive\_year\_fac)   }
\CommentTok{\#\textgreater{} $levels}
\CommentTok{\#\textgreater{} [1] "2016" "2017" "2018"}
\CommentTok{\#\textgreater{} }
\CommentTok{\#\textgreater{} $class}
\CommentTok{\#\textgreater{} [1] "factor"}
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{Factor student exercise solutions}
\protect\hypertarget{factor-student-exercise-solutions-3}{}
\begin{enumerate}
\setcounter{enumi}{3}
\tightlist
\item
  Get a count of \texttt{receive\_year\_fac}. (\textbf{hint:} you could
  also run this in the console to see values associated with each
  factor)
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{wwlist }\OperatorTok{\%\textgreater{}\%}
\StringTok{  }\KeywordTok{count}\NormalTok{(receive\_year\_fac)}
\CommentTok{\#\textgreater{} \# A tibble: 3 x 2}
\CommentTok{\#\textgreater{}   receive\_year\_fac     n}
\CommentTok{\#\textgreater{}   \textless{}fct\textgreater{}            \textless{}int\textgreater{}}
\CommentTok{\#\textgreater{} 1 2016             89637}
\CommentTok{\#\textgreater{} 2 2017             89816}
\CommentTok{\#\textgreater{} 3 2018             88943}
\end{Highlighting}
\end{Shaded}
\end{frame}

\hypertarget{class-labelled}{%
\section{Class == labelled}\label{class-labelled}}

\begin{frame}{Data we will use to introduce \texttt{labelled} class}
\protect\hypertarget{data-we-will-use-to-introduce-labelled-class}{}
High school longitudinal surveys from National Center for Education
Statistics (NCES)

\begin{itemize}
\tightlist
\item
  Follow U.S. students from high school through college, labor market
\end{itemize}

\medskip

We will be working with
\href{https://nces.ed.gov/surveys/hsls09/index.asp}{High School
Longitudinal Study of 2009 (HSLS:09)}

\begin{itemize}
\tightlist
\item
  Follows 9th graders from 2009
\item
  Data collection waves

  \begin{itemize}
  \tightlist
  \item
    Base Year (2009)
  \item
    First Follow-up (2012)
  \item
    2013 Update (2013)
  \item
    High School Transcripts (2013-2014)
  \item
    Second Follow-up (2016)
  \end{itemize}
\end{itemize}
\end{frame}

\begin{frame}[fragile]{Using \texttt{haven} package to read
SAS/SPSS/Stata datasets into R}
\protect\hypertarget{using-haven-package-to-read-sasspssstata-datasets-into-r}{}
\href{https://haven.tidyverse.org/}{\texttt{haven}}, which is part of
\textbf{tidyverse}, ``enables R to read and write various data formats''
from the following statistical packages:

\begin{itemize}
\tightlist
\item
  SAS
\item
  SPSS
\item
  Stata
\end{itemize}

\medskip

When using \texttt{haven} to read data, resulting R objects have these
characteristics:

\begin{itemize}
\tightlist
\item
  Data frames are \textbf{tibbles}, Tidyverse's preferred \textbf{class}
  of data frames
\item
  Transform variables with ``value labels'' into the \texttt{labelled()}
  class

  \begin{itemize}
  \tightlist
  \item
    \texttt{labelled} is an object class, just like \texttt{factor} is
    an object class
  \item
    \texttt{labelled} is an object \textbf{class} created by folks who
    created \texttt{haven} package
  \item
    \texttt{labelled} and \texttt{factor} classes are both viable
    alternatives for categorical variables
  \item
    Helpful description of \texttt{labelled} class
    \href{https://haven.tidyverse.org/articles/semantics.html}{HERE}
  \end{itemize}
\item
  Dates and times converted to R date/time classes
\item
  Character vectors not converted to factors
\end{itemize}
\end{frame}

\begin{frame}[fragile]{Using \texttt{haven} package to read
SAS/SPSS/Stata datasets into R}
\protect\hypertarget{using-haven-package-to-read-sasspssstata-datasets-into-r-1}{}
Use \texttt{read\_dta()} function from \texttt{haven} package to import
Stata dataset into R

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{hsls \textless{}{-}}\StringTok{ }\KeywordTok{read\_dta}\NormalTok{(}\DataTypeTok{file=}\StringTok{"https://github.com/ozanj/rclass/raw/master/data/hsls/hsls\_stu\_small.dta"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\textbf{Must} run this code chunk; permanently changes uppercase
variable names to lowercase

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{names}\NormalTok{(hsls)}
\KeywordTok{names}\NormalTok{(hsls) \textless{}{-}}\StringTok{ }\KeywordTok{tolower}\NormalTok{(}\KeywordTok{names}\NormalTok{(hsls)) }\CommentTok{\# convert names to lowercase}
\KeywordTok{names}\NormalTok{(hsls) }\CommentTok{\# names now lowercase}

\KeywordTok{str}\NormalTok{(hsls) }\CommentTok{\# ugh}
\end{Highlighting}
\end{Shaded}

\textbf{Investigate variable \texttt{s3classes} from data frame
\texttt{hsls}}

\begin{itemize}
\tightlist
\item
  Identifies whether respondent taking postsecondary classes as of
  11/1/2013
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{typeof}\NormalTok{(hsls}\OperatorTok{$}\NormalTok{s3classes)}
\KeywordTok{class}\NormalTok{(hsls}\OperatorTok{$}\NormalTok{s3classes)}
\KeywordTok{str}\NormalTok{(hsls}\OperatorTok{$}\NormalTok{s3classes)}
\end{Highlighting}
\end{Shaded}

\textbf{Investigate attributes of \texttt{s3classes}}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{attributes}\NormalTok{(hsls}\OperatorTok{$}\NormalTok{s3classes) }\CommentTok{\# all attributes}

\CommentTok{\#specific attributes: using syntax: attr(x, which, exact = FALSE)}
\KeywordTok{attr}\NormalTok{(}\DataTypeTok{x=}\NormalTok{hsls}\OperatorTok{$}\NormalTok{s3classes, }\DataTypeTok{which =} \StringTok{"label"}\NormalTok{) }\CommentTok{\# label attribute}
\KeywordTok{attr}\NormalTok{(}\DataTypeTok{x=}\NormalTok{hsls}\OperatorTok{$}\NormalTok{s3classes, }\DataTypeTok{which =} \StringTok{"labels"}\NormalTok{) }\CommentTok{\# labels attribute}
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{What is object class = \texttt{labelled}?}
\protect\hypertarget{what-is-object-class-labelled}{}
\medskip

\textbf{Variable labels} are labels attached to a specific variable
(e.g., marital status) \textbf{Value labels} {[}in Stata{]} are labels
attached to specific values of a variable, e.g.:

\begin{itemize}
\tightlist
\item
  Var value \texttt{1} attached to value label ``married'',
  \texttt{2}=``single'', \texttt{3}=``divorced''
\end{itemize}

\medskip

\texttt{labelled} is object class for importing vars with \textbf{value
labels} from SAS/SPSS/Stata

\begin{itemize}
\tightlist
\item
  \texttt{labelled} object class created by \texttt{haven} package
\item
  Characteristics of variables in R data frame with
  \texttt{class==labelled}:

  \begin{itemize}
  \tightlist
  \item
    Data \texttt{type} can be numeric(double) or character
  \item
    To see \texttt{value\ labels} associated with each value:

    \begin{itemize}
    \tightlist
    \item
      \texttt{attr(df\_name\$var\_name,"labels")}
    \item
      E.g., \texttt{attr(hsls\$s3classes,"labels")}
    \end{itemize}
  \end{itemize}
\end{itemize}

Investigate the attributes of \texttt{hsls\$s3classes}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{typeof}\NormalTok{(hsls}\OperatorTok{$}\NormalTok{s3classes)}
\KeywordTok{class}\NormalTok{(hsls}\OperatorTok{$}\NormalTok{s3classes)}
\KeywordTok{str}\NormalTok{(hsls}\OperatorTok{$}\NormalTok{s3classes)}
\KeywordTok{attributes}\NormalTok{(hsls}\OperatorTok{$}\NormalTok{s3classes)}
\end{Highlighting}
\end{Shaded}

Use \texttt{attr(object\_name,"attribute\_name")} to refer to each
attribute

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{attr}\NormalTok{(hsls}\OperatorTok{$}\NormalTok{s3classes,}\StringTok{"label"}\NormalTok{)}
\KeywordTok{attr}\NormalTok{(hsls}\OperatorTok{$}\NormalTok{s3classes,}\StringTok{"format.stata"}\NormalTok{)}
\KeywordTok{attr}\NormalTok{(hsls}\OperatorTok{$}\NormalTok{s3classes,}\StringTok{"class"}\NormalTok{)}
\KeywordTok{attr}\NormalTok{(hsls}\OperatorTok{$}\NormalTok{s3classes,}\StringTok{"labels"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{\texttt{labelled} package}
\protect\hypertarget{labelled-package}{}
Purpose of the \texttt{labelled} package is to work with data imported
from SPSS/Stata/SAS using the \texttt{haven} package

\begin{itemize}
\tightlist
\item
  \texttt{labelled} package contains functions to work with objects that
  have \texttt{labelled} class
\item
  From package documentation:

  \begin{itemize}
  \tightlist
  \item
    ``purpose of the \texttt{labelled} package is to provide functions
    to manipulate \emph{metadata} as variable labels, value labels and
    defined missing values using the \texttt{labelled} class and the
    \texttt{label} attribute introduced in \texttt{haven} package.''
  \end{itemize}
\item
  More info on the \texttt{labelled} package:
  \href{https://cran.r-project.org/web/packages/labelled/vignettes/intro_labelled.html}{LINK}
\end{itemize}

Functions in \texttt{labelled} package

\begin{itemize}
\tightlist
\item
  \href{https://www.rdocumentation.org/packages/labelled/versions/1.1.0}{Full
  list}
\end{itemize}
\end{frame}

\hypertarget{get-variable-and-value-labels}{%
\subsection{Get variable and value
labels}\label{get-variable-and-value-labels}}

\begin{frame}[fragile]{Functions to get variable labels and value
labels}
\protect\hypertarget{functions-to-get-variable-labels-and-value-labels}{}
\medskip

\textbf{Get variable labels} using \texttt{var\_label()}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{hsls }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{select}\NormalTok{(s3classes) }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{var\_label}\NormalTok{()}
\CommentTok{\#\textgreater{} $s3classes}
\CommentTok{\#\textgreater{} [1] "S3 B01A Taking postsecondary classes as of Nov 1 2013"}
\end{Highlighting}
\end{Shaded}

\medskip

\textbf{Get value labels} using \texttt{val\_labels()}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{hsls }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{select}\NormalTok{(s3classes) }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{val\_labels}\NormalTok{()}
\CommentTok{\#\textgreater{} $s3classes}
\CommentTok{\#\textgreater{}                                      Missing }
\CommentTok{\#\textgreater{}                                           {-}9 }
\CommentTok{\#\textgreater{}                            Unit non{-}response }
\CommentTok{\#\textgreater{}                                           {-}8 }
\CommentTok{\#\textgreater{}                      Item legitimate skip/NA }
\CommentTok{\#\textgreater{}                                           {-}7 }
\CommentTok{\#\textgreater{}                     Component not applicable }
\CommentTok{\#\textgreater{}                                           {-}6 }
\CommentTok{\#\textgreater{} Item not administered: abbreviated interview }
\CommentTok{\#\textgreater{}                                           {-}4 }
\CommentTok{\#\textgreater{}                                          Yes }
\CommentTok{\#\textgreater{}                                            1 }
\CommentTok{\#\textgreater{}                                           No }
\CommentTok{\#\textgreater{}                                            2 }
\CommentTok{\#\textgreater{}                                   Don\textquotesingle{}t know }
\CommentTok{\#\textgreater{}                                            3}
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{Working with \texttt{labelled} class data}
\protect\hypertarget{working-with-labelled-class-data}{}
\medskip

Create frequency tables with \texttt{labelled} class variables using
\texttt{count()}

\begin{itemize}
\tightlist
\item
  Default setting is to show variable \textbf{values} not \textbf{value
  labels}
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{hsls }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{count}\NormalTok{(s3classes)}
\CommentTok{\#\textgreater{} \# A tibble: 5 x 2}
\CommentTok{\#\textgreater{}                s3classes     n}
\CommentTok{\#\textgreater{}                \textless{}dbl+lbl\textgreater{} \textless{}int\textgreater{}}
\CommentTok{\#\textgreater{} 1 {-}9 [Missing]              59}
\CommentTok{\#\textgreater{} 2 {-}8 [Unit non{-}response]  4945}
\CommentTok{\#\textgreater{} 3  1 [Yes]               13477}
\CommentTok{\#\textgreater{} 4  2 [No]                 3401}
\CommentTok{\#\textgreater{} 5  3 [Don\textquotesingle{}t know]         1621}
\end{Highlighting}
\end{Shaded}

\medskip

To make frequency table show \textbf{value labels} add
\texttt{\%\textgreater{}\%\ as\_factor()} to pipe

\begin{itemize}
\tightlist
\item
  \texttt{as\_factor()} is function from \texttt{haven} that converts an
  object to a factor
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{hsls }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{count}\NormalTok{(s3classes) }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{as\_factor}\NormalTok{()}
\CommentTok{\#\textgreater{} \# A tibble: 5 x 2}
\CommentTok{\#\textgreater{}   s3classes             n}
\CommentTok{\#\textgreater{}   \textless{}fct\textgreater{}             \textless{}int\textgreater{}}
\CommentTok{\#\textgreater{} 1 Missing              59}
\CommentTok{\#\textgreater{} 2 Unit non{-}response  4945}
\CommentTok{\#\textgreater{} 3 Yes               13477}
\CommentTok{\#\textgreater{} 4 No                 3401}
\CommentTok{\#\textgreater{} 5 Don\textquotesingle{}t know         1621}
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{Working with \texttt{labelled} class data}
\protect\hypertarget{working-with-labelled-class-data-1}{}
To isolate values of \texttt{labelled} class variables in
\texttt{filter()} function:

\begin{itemize}
\tightlist
\item
  Refer to variable \textbf{value}, not the \textbf{value label}
\end{itemize}

\textbf{Task}

\begin{itemize}
\tightlist
\item
  How many observations in var \texttt{s3classes} associated with ``Unit
  non-response''
\item
  How many observations in var \texttt{s3classes} associated with
  ``Yes''
\end{itemize}

General steps to follow:

\begin{enumerate}
\tightlist
\item
  Investigate object
\item
  Use \texttt{filter()} to isolate desired observations
\end{enumerate}

Investigate object

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{class}\NormalTok{(hsls}\OperatorTok{$}\NormalTok{s3classes)}
\NormalTok{hsls }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{select}\NormalTok{(s3classes) }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{var\_label}\NormalTok{() }\CommentTok{\#show variable label}
\NormalTok{hsls }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{select}\NormalTok{(s3classes) }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{val\_labels}\NormalTok{() }\CommentTok{\#show value label}

\NormalTok{hsls }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{count}\NormalTok{(s3classes) }\CommentTok{\# freq table, values}
\NormalTok{hsls }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{count}\NormalTok{(s3classes) }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{as\_factor}\NormalTok{() }\CommentTok{\# freq table, value labels}
\end{Highlighting}
\end{Shaded}

Filter specific values

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{hsls }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{filter}\NormalTok{(s3classes}\OperatorTok{=={-}}\DecValTok{8}\NormalTok{) }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{count}\NormalTok{() }\CommentTok{\# {-}8 = unit non{-}response}
\NormalTok{hsls }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{filter}\NormalTok{(s3classes}\OperatorTok{==}\DecValTok{1}\NormalTok{) }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{count}\NormalTok{() }\CommentTok{\# 1 = yes}
\end{Highlighting}
\end{Shaded}
\end{frame}

\hypertarget{set-variable-and-value-labels}{%
\subsection{Set variable and value
labels}\label{set-variable-and-value-labels}}

\begin{frame}[fragile]{Functions to set variable labels and value
labels}
\protect\hypertarget{functions-to-set-variable-labels-and-value-labels}{}
\medskip

\textbf{Set variable labels} using \texttt{var\_label()} or
\texttt{set\_variable\_labels()}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Set one variable label}
\KeywordTok{var\_label}\NormalTok{(df\_name}\OperatorTok{$}\NormalTok{var\_name) \textless{}{-}}\StringTok{ \textquotesingle{}variable label\textquotesingle{}}

\CommentTok{\# Set multiple variable labels}
\NormalTok{df\_name \textless{}{-}}\StringTok{ }\NormalTok{df\_name }\OperatorTok{\%\textgreater{}\%}
\StringTok{  }\KeywordTok{set\_variable\_labels}\NormalTok{(}
    \DataTypeTok{var\_name\_1 =} \StringTok{\textquotesingle{}variable label 1\textquotesingle{}}\NormalTok{,}
    \DataTypeTok{var\_name\_2 =} \StringTok{\textquotesingle{}variable label 2\textquotesingle{}}\NormalTok{,}
    \DataTypeTok{var\_name\_3 =} \StringTok{\textquotesingle{}variable label 3\textquotesingle{}}
\NormalTok{  )}
\end{Highlighting}
\end{Shaded}

\medskip

\textbf{Set value labels} using \texttt{val\_label()} or
\texttt{set\_value\_labels()}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Set one value label}
\KeywordTok{val\_label}\NormalTok{(df\_name}\OperatorTok{$}\NormalTok{var\_name, }\StringTok{\textquotesingle{}variable\_value\textquotesingle{}}\NormalTok{) \textless{}{-}}\StringTok{ \textquotesingle{}value\_label\textquotesingle{}}

\CommentTok{\# Set multiple value labels}
\NormalTok{df\_name \textless{}{-}}\StringTok{ }\NormalTok{df\_name }\OperatorTok{\%\textgreater{}\%}
\StringTok{  }\KeywordTok{set\_value\_labels}\NormalTok{(}
    \DataTypeTok{var\_name\_1 =} \KeywordTok{c}\NormalTok{(}\StringTok{\textquotesingle{}value\_label\_1\textquotesingle{}}\NormalTok{ =}\StringTok{ \textquotesingle{}variable\_value\_1\textquotesingle{}}\NormalTok{,}
                   \StringTok{\textquotesingle{}value\_label\_2\textquotesingle{}}\NormalTok{ =}\StringTok{ \textquotesingle{}variable\_value\_2\textquotesingle{}}\NormalTok{,}
    \DataTypeTok{var\_name\_2 =} \KeywordTok{c}\NormalTok{(}\StringTok{\textquotesingle{}value\_label\_3\textquotesingle{}}\NormalTok{ =}\StringTok{ \textquotesingle{}variable\_value\_3\textquotesingle{}}\NormalTok{,}
                   \StringTok{\textquotesingle{}value\_label\_4\textquotesingle{}}\NormalTok{ =}\StringTok{ \textquotesingle{}variable\_value\_4\textquotesingle{}}\NormalTok{)}
\NormalTok{  )}
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{Create example data frame}
\protect\hypertarget{create-example-data-frame}{}
\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df \textless{}{-}}\StringTok{ }\KeywordTok{tribble}\NormalTok{(}
  \OperatorTok{\textasciitilde{}}\NormalTok{id, }\OperatorTok{\textasciitilde{}}\NormalTok{edu, }\OperatorTok{\textasciitilde{}}\NormalTok{sch,}
  \CommentTok{\#{-}{-}|{-}{-}|{-}{-}{-}{-}}
  \DecValTok{1}\NormalTok{, }\DecValTok{2}\NormalTok{, }\DecValTok{2}\NormalTok{,}
  \DecValTok{2}\NormalTok{, }\DecValTok{1}\NormalTok{, }\DecValTok{1}\NormalTok{,}
  \DecValTok{3}\NormalTok{, }\DecValTok{3}\NormalTok{, }\DecValTok{2}\NormalTok{,}
  \DecValTok{4}\NormalTok{, }\DecValTok{4}\NormalTok{, }\DecValTok{2}\NormalTok{,}
  \DecValTok{5}\NormalTok{, }\DecValTok{1}\NormalTok{, }\DecValTok{2}
\NormalTok{)}
\NormalTok{df}
\CommentTok{\#\textgreater{} \# A tibble: 5 x 3}
\CommentTok{\#\textgreater{}      id   edu   sch}
\CommentTok{\#\textgreater{}   \textless{}dbl\textgreater{} \textless{}dbl\textgreater{} \textless{}dbl\textgreater{}}
\CommentTok{\#\textgreater{} 1     1     2     2}
\CommentTok{\#\textgreater{} 2     2     1     1}
\CommentTok{\#\textgreater{} 3     3     3     2}
\CommentTok{\#\textgreater{} 4     4     4     2}
\CommentTok{\#\textgreater{} 5     5     1     2}
\KeywordTok{str}\NormalTok{(df)}
\CommentTok{\#\textgreater{} tibble [5 x 3] (S3: tbl\_df/tbl/data.frame)}
\CommentTok{\#\textgreater{}  $ id : num [1:5] 1 2 3 4 5}
\CommentTok{\#\textgreater{}  $ edu: num [1:5] 2 1 3 4 1}
\CommentTok{\#\textgreater{}  $ sch: num [1:5] 2 1 2 2 2}
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{Set variable labels}
\protect\hypertarget{set-variable-labels}{}
Use \texttt{set\_variable\_labels()} or \texttt{var\_label()} to
manually set variable labels

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{str}\NormalTok{(df}\OperatorTok{$}\NormalTok{sch)}
\CommentTok{\#\textgreater{}  num [1:5] 2 1 2 2 2}
\KeywordTok{var\_label}\NormalTok{(df}\OperatorTok{$}\NormalTok{sch)}
\CommentTok{\#\textgreater{} NULL}

\CommentTok{\# Using set\_variable\_labels()}
\NormalTok{df \textless{}{-}}\StringTok{ }\NormalTok{df }\OperatorTok{\%\textgreater{}\%}
\StringTok{  }\KeywordTok{set\_variable\_labels}\NormalTok{(}
    \DataTypeTok{id =} \StringTok{"Unique identification number"}\NormalTok{,}
    \DataTypeTok{edu =} \StringTok{"Education level"}
\NormalTok{  )}

\CommentTok{\# Using var\_label()}
\KeywordTok{var\_label}\NormalTok{(df}\OperatorTok{$}\NormalTok{sch) \textless{}{-}}\StringTok{ \textquotesingle{}Type of school attending\textquotesingle{}}

\KeywordTok{str}\NormalTok{(df}\OperatorTok{$}\NormalTok{sch)}
\CommentTok{\#\textgreater{}  num [1:5] 2 1 2 2 2}
\CommentTok{\#\textgreater{}  {-} attr(*, "label")= chr "Type of school attending"}
\KeywordTok{var\_label}\NormalTok{(df}\OperatorTok{$}\NormalTok{sch)}
\CommentTok{\#\textgreater{} [1] "Type of school attending"}
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{Set value labels}
\protect\hypertarget{set-value-labels}{}
Use \texttt{set\_value\_labels()} or \texttt{val\_label()} to manually
set value labels

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{val\_labels}\NormalTok{(df}\OperatorTok{$}\NormalTok{sch)}
\CommentTok{\#\textgreater{} NULL}

\CommentTok{\# Using set\_value\_labels()}
\NormalTok{df \textless{}{-}}\StringTok{ }\NormalTok{df }\OperatorTok{\%\textgreater{}\%}
\StringTok{  }\KeywordTok{set\_value\_labels}\NormalTok{(}
    \DataTypeTok{edu =} \KeywordTok{c}\NormalTok{(}\StringTok{\textquotesingle{}High School\textquotesingle{}}\NormalTok{ =}\StringTok{ }\DecValTok{1}\NormalTok{,}
            \StringTok{\textquotesingle{}AA degree\textquotesingle{}}\NormalTok{ =}\StringTok{ }\DecValTok{2}\NormalTok{,}
            \StringTok{\textquotesingle{}BA degree\textquotesingle{}}\NormalTok{ =}\StringTok{ }\DecValTok{3}\NormalTok{,}
            \StringTok{\textquotesingle{}MA or higher\textquotesingle{}}\NormalTok{ =}\StringTok{ }\DecValTok{4}\NormalTok{),}
    \DataTypeTok{sch =} \KeywordTok{c}\NormalTok{(}\StringTok{\textquotesingle{}Private\textquotesingle{}}\NormalTok{ =}\StringTok{ }\DecValTok{1}\NormalTok{))}

\CommentTok{\# Using val\_label()}
\KeywordTok{val\_label}\NormalTok{(df}\OperatorTok{$}\NormalTok{sch, }\DecValTok{2}\NormalTok{) \textless{}{-}}\StringTok{ \textquotesingle{}Public\textquotesingle{}}

\KeywordTok{str}\NormalTok{(df}\OperatorTok{$}\NormalTok{sch)}
\CommentTok{\#\textgreater{}  dbl+lbl [1:5] 2, 1, 2, 2, 2}
\CommentTok{\#\textgreater{}  @ labels: Named num [1:2] 1 2}
\CommentTok{\#\textgreater{}   ..{-} attr(*, "names")= chr [1:2] "Private" "Public"}
\CommentTok{\#\textgreater{}  @ label : chr "Type of school attending"}
\KeywordTok{val\_labels}\NormalTok{(df}\OperatorTok{$}\NormalTok{sch)}
\CommentTok{\#\textgreater{} Private  Public }
\CommentTok{\#\textgreater{}       1       2}
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{View the set variable and value labels}
\protect\hypertarget{view-the-set-variable-and-value-labels}{}
\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# View variable and value labels using attributes()}
\KeywordTok{attributes}\NormalTok{(df}\OperatorTok{$}\NormalTok{sch)}
\CommentTok{\#\textgreater{} $labels}
\CommentTok{\#\textgreater{} Private  Public }
\CommentTok{\#\textgreater{}       1       2 }
\CommentTok{\#\textgreater{} }
\CommentTok{\#\textgreater{} $label}
\CommentTok{\#\textgreater{} [1] "Type of school attending"}
\CommentTok{\#\textgreater{} }
\CommentTok{\#\textgreater{} $class}
\CommentTok{\#\textgreater{} [1] "haven\_labelled" "vctrs\_vctr"     "double"}

\CommentTok{\# View variable label}
\KeywordTok{var\_label}\NormalTok{(df}\OperatorTok{$}\NormalTok{sch)}
\CommentTok{\#\textgreater{} [1] "Type of school attending"}
\KeywordTok{attr}\NormalTok{(df}\OperatorTok{$}\NormalTok{sch, }\StringTok{\textquotesingle{}label\textquotesingle{}}\NormalTok{)}
\CommentTok{\#\textgreater{} [1] "Type of school attending"}

\CommentTok{\# View value labels}
\KeywordTok{val\_labels}\NormalTok{(df}\OperatorTok{$}\NormalTok{sch)}
\CommentTok{\#\textgreater{} Private  Public }
\CommentTok{\#\textgreater{}       1       2}
\KeywordTok{attr}\NormalTok{(df}\OperatorTok{$}\NormalTok{sch, }\StringTok{\textquotesingle{}labels\textquotesingle{}}\NormalTok{)}
\CommentTok{\#\textgreater{} Private  Public }
\CommentTok{\#\textgreater{}       1       2}
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{\texttt{labelled} student exercise}
\protect\hypertarget{labelled-student-exercise}{}
\begin{enumerate}
\tightlist
\item
  Get variable and value labels of the variable \texttt{s3hs} in the
  \texttt{hsls} data frame
\item
  Get a count of the variable \texttt{s3hs} showing the values and the
  value labels (\textbf{hint}: use \texttt{as\_factor()})
\item
  Get a count of the rows whose value for \texttt{s3hs} is associated
  with ``Missing'' (\textbf{hint}: use \texttt{filter()})
\item
  Get a count of the rows whose value for \texttt{s3hs} is associated
  with ``Missing'' or ``Unit non-response''
\item
  Add variable label for \texttt{pop\_asian\_zip} \&
  \texttt{pop\_asian\_state} in data frame \texttt{wwlist}
\item
  Add value labels for \texttt{ethn\_code} in data frame \texttt{wwlist}
\end{enumerate}
\end{frame}

\begin{frame}[fragile]{\texttt{labelled} student exercise solutions}
\protect\hypertarget{labelled-student-exercise-solutions}{}
\begin{enumerate}
\tightlist
\item
  Get variable and value labels of the variable \texttt{s3hs} in the
  \texttt{hsls} data frame
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{hsls }\OperatorTok{\%\textgreater{}\%}\StringTok{ }
\StringTok{  }\KeywordTok{select}\NormalTok{(s3hs) }\OperatorTok{\%\textgreater{}\%}\StringTok{ }
\StringTok{  }\KeywordTok{var\_label}\NormalTok{() }
\CommentTok{\#\textgreater{} $s3hs}
\CommentTok{\#\textgreater{} [1] "S3 B01F Attending high school or homeschool as of Nov 1 2013"}

\NormalTok{hsls }\OperatorTok{\%\textgreater{}\%}\StringTok{ }
\StringTok{  }\KeywordTok{select}\NormalTok{(s3hs) }\OperatorTok{\%\textgreater{}\%}\StringTok{ }
\StringTok{  }\KeywordTok{val\_labels}\NormalTok{()}
\CommentTok{\#\textgreater{} $s3hs}
\CommentTok{\#\textgreater{}                                      Missing }
\CommentTok{\#\textgreater{}                                           {-}9 }
\CommentTok{\#\textgreater{}                            Unit non{-}response }
\CommentTok{\#\textgreater{}                                           {-}8 }
\CommentTok{\#\textgreater{}                      Item legitimate skip/NA }
\CommentTok{\#\textgreater{}                                           {-}7 }
\CommentTok{\#\textgreater{}                     Component not applicable }
\CommentTok{\#\textgreater{}                                           {-}6 }
\CommentTok{\#\textgreater{} Item not administered: abbreviated interview }
\CommentTok{\#\textgreater{}                                           {-}4 }
\CommentTok{\#\textgreater{}                                          Yes }
\CommentTok{\#\textgreater{}                                            1 }
\CommentTok{\#\textgreater{}                                           No }
\CommentTok{\#\textgreater{}                                            2 }
\CommentTok{\#\textgreater{}                                   Don\textquotesingle{}t know }
\CommentTok{\#\textgreater{}                                            3}
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{\texttt{labelled} student exercise solutions}
\protect\hypertarget{labelled-student-exercise-solutions-1}{}
\begin{enumerate}
\setcounter{enumi}{1}
\tightlist
\item
  Get a count of the variable \texttt{s3hs} showing the values and the
  value labels (\textbf{hint}: use \texttt{as\_factor()})
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{hsls }\OperatorTok{\%\textgreater{}\%}\StringTok{ }
\StringTok{  }\KeywordTok{count}\NormalTok{(s3hs) }
\CommentTok{\#\textgreater{} \# A tibble: 6 x 2}
\CommentTok{\#\textgreater{}                           s3hs     n}
\CommentTok{\#\textgreater{}                      \textless{}dbl+lbl\textgreater{} \textless{}int\textgreater{}}
\CommentTok{\#\textgreater{} 1 {-}9 [Missing]                    22}
\CommentTok{\#\textgreater{} 2 {-}8 [Unit non{-}response]        4945}
\CommentTok{\#\textgreater{} 3 {-}7 [Item legitimate skip/NA] 16770}
\CommentTok{\#\textgreater{} 4  1 [Yes]                       624}
\CommentTok{\#\textgreater{} 5  2 [No]                        985}
\CommentTok{\#\textgreater{} 6  3 [Don\textquotesingle{}t know]                157}

\NormalTok{hsls }\OperatorTok{\%\textgreater{}\%}\StringTok{ }
\StringTok{  }\KeywordTok{count}\NormalTok{(s3hs) }\OperatorTok{\%\textgreater{}\%}\StringTok{ }
\StringTok{  }\KeywordTok{as\_factor}\NormalTok{() }
\CommentTok{\#\textgreater{} \# A tibble: 6 x 2}
\CommentTok{\#\textgreater{}   s3hs                        n}
\CommentTok{\#\textgreater{}   \textless{}fct\textgreater{}                   \textless{}int\textgreater{}}
\CommentTok{\#\textgreater{} 1 Missing                    22}
\CommentTok{\#\textgreater{} 2 Unit non{-}response        4945}
\CommentTok{\#\textgreater{} 3 Item legitimate skip/NA 16770}
\CommentTok{\#\textgreater{} 4 Yes                       624}
\CommentTok{\#\textgreater{} 5 No                        985}
\CommentTok{\#\textgreater{} 6 Don\textquotesingle{}t know                157}
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{\texttt{labelled} student exercise solutions}
\protect\hypertarget{labelled-student-exercise-solutions-2}{}
\begin{enumerate}
\setcounter{enumi}{2}
\tightlist
\item
  Get a count of the rows whose value for \texttt{s3hs} is associated
  with ``Missing'' (\textbf{hint}: use \texttt{filter()})
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{hsls }\OperatorTok{\%\textgreater{}\%}
\StringTok{  }\KeywordTok{filter}\NormalTok{(s3hs}\OperatorTok{==}\StringTok{ }\DecValTok{{-}9}\NormalTok{) }\OperatorTok{\%\textgreater{}\%}\StringTok{ }
\StringTok{  }\KeywordTok{count}\NormalTok{()}
\CommentTok{\#\textgreater{} \# A tibble: 1 x 1}
\CommentTok{\#\textgreater{}       n}
\CommentTok{\#\textgreater{}   \textless{}int\textgreater{}}
\CommentTok{\#\textgreater{} 1    22}
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{\texttt{labelled} student exercise solutions}
\protect\hypertarget{labelled-student-exercise-solutions-3}{}
\begin{enumerate}
\setcounter{enumi}{3}
\tightlist
\item
  Get a count of the rows whose value for \texttt{s3hs} is associated
  with ``Missing'' or ``Unit non-response''
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{hsls }\OperatorTok{\%\textgreater{}\%}
\StringTok{  }\KeywordTok{filter}\NormalTok{(s3hs}\OperatorTok{==}\StringTok{ }\DecValTok{{-}9} \OperatorTok{|}\StringTok{ }\NormalTok{s3hs}\OperatorTok{==}\StringTok{ }\DecValTok{{-}8}\NormalTok{) }\OperatorTok{\%\textgreater{}\%}\StringTok{ }
\StringTok{  }\KeywordTok{count}\NormalTok{()}
\CommentTok{\#\textgreater{} \# A tibble: 1 x 1}
\CommentTok{\#\textgreater{}       n}
\CommentTok{\#\textgreater{}   \textless{}int\textgreater{}}
\CommentTok{\#\textgreater{} 1  4967}
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{\texttt{labelled} student exercise solutions}
\protect\hypertarget{labelled-student-exercise-solutions-4}{}
\begin{enumerate}
\setcounter{enumi}{4}
\tightlist
\item
  Add variable label for \texttt{pop\_asian\_zip} \&
  \texttt{pop\_asian\_state} in data frame \texttt{wwlist}
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# variable labels}
\NormalTok{wwlist }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{select}\NormalTok{(pop\_asian\_zip, pop\_asian\_state) }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{var\_label}\NormalTok{()}
\CommentTok{\#\textgreater{} $pop\_asian\_zip}
\CommentTok{\#\textgreater{} NULL}
\CommentTok{\#\textgreater{} }
\CommentTok{\#\textgreater{} $pop\_asian\_state}
\CommentTok{\#\textgreater{} NULL}

\CommentTok{\# set variable labels}
\NormalTok{wwlist \textless{}{-}}\StringTok{ }\NormalTok{wwlist }\OperatorTok{\%\textgreater{}\%}\StringTok{ }
\StringTok{  }\KeywordTok{set\_variable\_labels}\NormalTok{(}
    \DataTypeTok{pop\_asian\_zip =} \StringTok{"total asian population in zip"}\NormalTok{,}
    \DataTypeTok{pop\_asian\_state =}\StringTok{"total asian population in state"}
\NormalTok{  )}

\CommentTok{\# attribute of variable}
\KeywordTok{attributes}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{pop\_asian\_zip)}
\CommentTok{\#\textgreater{} $label}
\CommentTok{\#\textgreater{} [1] "total asian population in zip"}
\KeywordTok{attributes}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{pop\_asian\_state)}
\CommentTok{\#\textgreater{} $label}
\CommentTok{\#\textgreater{} [1] "total asian population in state"}
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{\texttt{labelled} student exercise solutions}
\protect\hypertarget{labelled-student-exercise-solutions-5}{}
\begin{enumerate}
\setcounter{enumi}{5}
\tightlist
\item
  Add value labels for \texttt{ethn\_code} in data frame \texttt{wwlist}
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# count}
\NormalTok{wwlist }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{count}\NormalTok{(ethn\_code)}

\CommentTok{\# value labels}
\NormalTok{wwlist }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{select}\NormalTok{(ethn\_code) }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\NormalTok{val\_labels}

\CommentTok{\# set value labels to ethn\_code variable}
\NormalTok{wwlist \textless{}{-}}\StringTok{ }\NormalTok{wwlist }\OperatorTok{\%\textgreater{}\%}\StringTok{ }
\StringTok{  }\KeywordTok{set\_value\_labels}\NormalTok{(}
    \DataTypeTok{ethn\_code =} \KeywordTok{c}\NormalTok{(}\StringTok{"asian or native hawaiian or other pacific islander"}\NormalTok{ =}\StringTok{ "api"}\NormalTok{,}
                  \StringTok{"black or african american"}\NormalTok{ =}\StringTok{ "black"}\NormalTok{,}
                  \StringTok{"cuban or mexican/mexican american or other spanish/hispanic or puerto rican"}\NormalTok{ =}\StringTok{ "latinx"}\NormalTok{,}
                  \StringTok{"other{-}2 or more"}\NormalTok{ =}\StringTok{ "multirace"}\NormalTok{,}
                  \StringTok{"american indian or alaska native"}\NormalTok{ =}\StringTok{ "nativeam"}\NormalTok{,}
                  \StringTok{"not reported"}\NormalTok{ =}\StringTok{ "not\_reported"}\NormalTok{,}
                  \StringTok{"white"}\NormalTok{ =}\StringTok{ "white"}
\NormalTok{    )}
\NormalTok{  )}
\end{Highlighting}
\end{Shaded}
\end{frame}

\hypertarget{comparing-labelled-class-to-factor-class}{%
\section{Comparing labelled class to factor
class}\label{comparing-labelled-class-to-factor-class}}

\begin{frame}[fragile]{Comparing \texttt{class==labelled} to
\texttt{class==factor}}
\protect\hypertarget{comparing-classlabelled-to-classfactor}{}
\begin{longtable}[]{@{}lll@{}}
\toprule
& \texttt{class==labelled} & \texttt{class==factor}\tabularnewline
\midrule
\endhead
data type & numeric or character & integer\tabularnewline
name of value label attribute & labels & levels\tabularnewline
refer to data using & variable values & levels attribute\tabularnewline
\bottomrule
\end{longtable}

\bigskip

So should you work with \texttt{class==labelled} or
\texttt{class==factor}?

\begin{itemize}
\tightlist
\item
  No right or wrong answer; this is a subjective decision
\item
  Personally, I prefer `labelled' class

  \begin{itemize}
  \tightlist
  \item
    Easier to control underlying variable value
  \item
    Feels more suited to working with survey data variables, where there
    are usually several different values that represent different kinds
    of ``missing'' values
  \end{itemize}
\end{itemize}
\end{frame}

\begin{frame}[fragile]{Converting \texttt{class==labelled} to
\texttt{class==factor}}
\protect\hypertarget{converting-classlabelled-to-classfactor}{}
The \texttt{as\_factor()} function from \texttt{haven} package converts
variables with \texttt{class==labelled} to \texttt{class==factor}

\begin{itemize}
\tightlist
\item
  Can be used for descriptive statistics
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{hsls }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{select}\NormalTok{(s3classes) }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{count}\NormalTok{(s3classes)}
\NormalTok{hsls }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{select}\NormalTok{(s3classes) }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{count}\NormalTok{(s3classes) }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{as\_factor}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{itemize}
\tightlist
\item
  Can create object with some or all \texttt{labelled} vars converted to
  \texttt{factor}
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{hsls\_f \textless{}{-}}\StringTok{ }\KeywordTok{as\_factor}\NormalTok{(hsls, }\DataTypeTok{only\_labelled =} \OtherTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

Let's examine this object

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{glimpse}\NormalTok{(hsls\_f)}
\NormalTok{hsls\_f }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{select}\NormalTok{(s3classes,s3clglvl) }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{str}\NormalTok{()}
\KeywordTok{typeof}\NormalTok{(hsls\_f}\OperatorTok{$}\NormalTok{s3classes)}
\KeywordTok{class}\NormalTok{(hsls\_f}\OperatorTok{$}\NormalTok{s3classes)}
\KeywordTok{attributes}\NormalTok{(hsls\_f}\OperatorTok{$}\NormalTok{s3classes)}

\NormalTok{hsls\_f }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{select}\NormalTok{(s3classes) }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{var\_label}\NormalTok{()}
\NormalTok{hsls\_f }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{select}\NormalTok{(s3classes) }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{val\_labels}\NormalTok{()}
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{Working with \texttt{class==factor} data}
\protect\hypertarget{working-with-classfactor-data}{}
Showing factor levels associated with a factor variable

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{hsls\_f }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{count}\NormalTok{(s3classes)}
\CommentTok{\#\textgreater{} \# A tibble: 5 x 2}
\CommentTok{\#\textgreater{}   s3classes             n}
\CommentTok{\#\textgreater{}   \textless{}fct\textgreater{}             \textless{}int\textgreater{}}
\CommentTok{\#\textgreater{} 1 Missing              59}
\CommentTok{\#\textgreater{} 2 Unit non{-}response  4945}
\CommentTok{\#\textgreater{} 3 Yes               13477}
\CommentTok{\#\textgreater{} 4 No                 3401}
\CommentTok{\#\textgreater{} 5 Don\textquotesingle{}t know         1621}
\end{Highlighting}
\end{Shaded}

Showing variable values associated with a factor variable

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{hsls\_f }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{count}\NormalTok{(}\KeywordTok{as.integer}\NormalTok{(s3classes))}
\CommentTok{\#\textgreater{} \# A tibble: 5 x 2}
\CommentTok{\#\textgreater{}   \textasciigrave{}as.integer(s3classes)\textasciigrave{}     n}
\CommentTok{\#\textgreater{}                     \textless{}int\textgreater{} \textless{}int\textgreater{}}
\CommentTok{\#\textgreater{} 1                       1    59}
\CommentTok{\#\textgreater{} 2                       2  4945}
\CommentTok{\#\textgreater{} 3                       6 13477}
\CommentTok{\#\textgreater{} 4                       7  3401}
\CommentTok{\#\textgreater{} 5                       8  1621}
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{Working with \texttt{class==factor} data}
\protect\hypertarget{working-with-classfactor-data-1}{}
When sub-setting observations (e.g., filtering), refer \texttt{level}
attribute not variable value

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{hsls\_f }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{filter}\NormalTok{(s3classes}\OperatorTok{==}\StringTok{"Yes"}\NormalTok{) }\OperatorTok{\%\textgreater{}\%}\StringTok{ }\KeywordTok{count}\NormalTok{(s3classes)}
\CommentTok{\#\textgreater{} \# A tibble: 1 x 2}
\CommentTok{\#\textgreater{}   s3classes     n}
\CommentTok{\#\textgreater{}   \textless{}fct\textgreater{}     \textless{}int\textgreater{}}
\CommentTok{\#\textgreater{} 1 Yes       13477}
\end{Highlighting}
\end{Shaded}
\end{frame}

\hypertarget{appendix-creating-factor-variables}{%
\section{Appendix: Creating factor
variables}\label{appendix-creating-factor-variables}}

\begin{frame}[fragile]{Create factors {[}from string variables{]}}
\protect\hypertarget{create-factors-from-string-variables}{}
To create a factor variable from string variable:

\begin{enumerate}
\tightlist
\item
  Create a character vector containing underlying data
\item
  Create a vector containing valid levels
\item
  Attach levels to the data using the \texttt{factor()} function
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Underlying data: months my fam is born}
\NormalTok{x1 \textless{}{-}}\StringTok{ }\KeywordTok{c}\NormalTok{(}\StringTok{"Jan"}\NormalTok{, }\StringTok{"Aug"}\NormalTok{, }\StringTok{"Apr"}\NormalTok{, }\StringTok{"Mar"}\NormalTok{)}
\CommentTok{\# Create vector with valid levels}
\NormalTok{month\_levels \textless{}{-}}\StringTok{ }\KeywordTok{c}\NormalTok{(}\StringTok{"Jan"}\NormalTok{, }\StringTok{"Feb"}\NormalTok{, }\StringTok{"Mar"}\NormalTok{, }\StringTok{"Apr"}\NormalTok{, }\StringTok{"May"}\NormalTok{, }\StringTok{"Jun"}\NormalTok{, }
  \StringTok{"Jul"}\NormalTok{, }\StringTok{"Aug"}\NormalTok{, }\StringTok{"Sep"}\NormalTok{, }\StringTok{"Oct"}\NormalTok{, }\StringTok{"Nov"}\NormalTok{, }\StringTok{"Dec"}\NormalTok{)}
\CommentTok{\# Attach levels to data}
\NormalTok{x2 \textless{}{-}}\StringTok{ }\KeywordTok{factor}\NormalTok{(x1, }\DataTypeTok{levels =}\NormalTok{ month\_levels)}
\end{Highlighting}
\end{Shaded}

Note how attributes differ:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{str}\NormalTok{(x1)}
\CommentTok{\#\textgreater{}  chr [1:4] "Jan" "Aug" "Apr" "Mar"}
\KeywordTok{str}\NormalTok{(x2)}
\CommentTok{\#\textgreater{}  Factor w/ 12 levels "Jan","Feb","Mar",..: 1 8 4 3}
\end{Highlighting}
\end{Shaded}

Sorting also differs:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{sort}\NormalTok{(x1)}
\CommentTok{\#\textgreater{} [1] "Apr" "Aug" "Jan" "Mar"}
\KeywordTok{sort}\NormalTok{(x2)}
\CommentTok{\#\textgreater{} [1] Jan Mar Apr Aug}
\CommentTok{\#\textgreater{} Levels: Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec}
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{Create factors {[}from string variables{]}}
\protect\hypertarget{create-factors-from-string-variables-1}{}
Let's create a character version of variable \texttt{hs\_state} and then
turn it into a factor:

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#wwlist \%\textgreater{}\%}
\CommentTok{\#  count(hs\_state)}
\CommentTok{\# Subset obs to West Coast states }
\NormalTok{wwlist\_temp \textless{}{-}}\StringTok{ }\NormalTok{wwlist }\OperatorTok{\%\textgreater{}\%}
\StringTok{  }\KeywordTok{filter}\NormalTok{(hs\_state }\OperatorTok{\%in\%}\StringTok{ }\KeywordTok{c}\NormalTok{(}\StringTok{"CA"}\NormalTok{, }\StringTok{"OR"}\NormalTok{, }\StringTok{"WA"}\NormalTok{))}

\CommentTok{\# Create character version of high school state for West Coast states only}
\NormalTok{wwlist\_temp}\OperatorTok{$}\NormalTok{hs\_state\_char \textless{}{-}}\StringTok{ }\KeywordTok{as.character}\NormalTok{(wwlist\_temp}\OperatorTok{$}\NormalTok{hs\_state)}

\CommentTok{\# Investigate character variable}
\KeywordTok{str}\NormalTok{(wwlist\_temp}\OperatorTok{$}\NormalTok{hs\_state\_char)}
\KeywordTok{table}\NormalTok{(wwlist\_temp}\OperatorTok{$}\NormalTok{hs\_state\_char)}

\CommentTok{\# Create new variable that assigns levels}
\NormalTok{wwlist\_temp}\OperatorTok{$}\NormalTok{hs\_state\_fac \textless{}{-}}\StringTok{ }\KeywordTok{factor}\NormalTok{(wwlist\_temp}\OperatorTok{$}\NormalTok{hs\_state\_char, }\DataTypeTok{levels =} \KeywordTok{c}\NormalTok{(}\StringTok{"CA"}\NormalTok{,}\StringTok{"OR"}\NormalTok{,}\StringTok{"WA"}\NormalTok{))}
\KeywordTok{str}\NormalTok{(wwlist\_temp}\OperatorTok{$}\NormalTok{hs\_state\_fac)}
\KeywordTok{attributes}\NormalTok{(wwlist\_temp}\OperatorTok{$}\NormalTok{hs\_state\_fac)}

\CommentTok{\#wwlist\_temp \%\textgreater{}\%}
\CommentTok{\#  count(hs\_state\_fac)}
\KeywordTok{rm}\NormalTok{(wwlist\_temp)}
\end{Highlighting}
\end{Shaded}
\end{frame}

\begin{frame}[fragile]{Create factors {[}from string variables{]}}
\protect\hypertarget{create-factors-from-string-variables-2}{}
How the \texttt{levels} argument works when underlying data is
character:

\begin{itemize}
\tightlist
\item
  Matches value of underlying data to value of the level attribute
\item
  Converts underlying data to integer, with level attribute attached
\end{itemize}

\medskip See \href{https://r4ds.had.co.nz/factors.html}{Chapter 15 of
Wickham} for more on factors (e.g., modifying factor order, modifying
factor levels)
\end{frame}

\begin{frame}[fragile]{Creating factors {[}from integer vectors{]}}
\protect\hypertarget{creating-factors-from-integer-vectors}{}
Factors are just integer vectors with level attributes attached to them.
So, to create a factor:

\begin{enumerate}
\tightlist
\item
  Create a vector for the underlying data
\item
  Create a vector that has level attributes
\item
  Attach levels to the data using the \texttt{factor()} function
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{a1 \textless{}{-}}\StringTok{ }\KeywordTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{,}\DecValTok{1}\NormalTok{,}\DecValTok{1}\NormalTok{,}\DecValTok{0}\NormalTok{,}\DecValTok{1}\NormalTok{,}\DecValTok{1}\NormalTok{,}\DecValTok{0}\NormalTok{) }\CommentTok{\# A vector of data}
\NormalTok{a2 \textless{}{-}}\StringTok{ }\KeywordTok{c}\NormalTok{(}\StringTok{"zero"}\NormalTok{,}\StringTok{"one"}\NormalTok{) }\CommentTok{\# A vector of labels}

\CommentTok{\# Attach labels to values}
\NormalTok{a3 \textless{}{-}}\StringTok{ }\KeywordTok{factor}\NormalTok{(a1, }\DataTypeTok{labels =}\NormalTok{ a2)}
\NormalTok{a3}
\CommentTok{\#\textgreater{} [1] one  one  one  zero one  one  zero}
\CommentTok{\#\textgreater{} Levels: zero one}
\KeywordTok{str}\NormalTok{(a3)}
\CommentTok{\#\textgreater{}  Factor w/ 2 levels "zero","one": 2 2 2 1 2 2 1}
\end{Highlighting}
\end{Shaded}

Note: By default, \texttt{factor()} function attached ``zero'' to the
lowest value of vector \texttt{a1} because ``zero'' was the first
element of vector \texttt{a2}
\end{frame}

\begin{frame}[fragile]{Creating factors {[}from integer vectors{]}}
\protect\hypertarget{creating-factors-from-integer-vectors-1}{}
Let's turn an integer variable into a factor variable in the
\texttt{wwlist} data frame

Create integer version of \texttt{receive\_year}:

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#typeof(wwlist\_temp$receive\_year)}
\NormalTok{wwlist}\OperatorTok{$}\NormalTok{receive\_year\_int \textless{}{-}}\StringTok{ }\KeywordTok{as.integer}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{receive\_year)}
\KeywordTok{str}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{receive\_year\_int)}
\CommentTok{\#\textgreater{}  int [1:268396] 2016 2016 2016 2016 2016 2016 2016 2016 2016 2016 ...}
\KeywordTok{typeof}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{receive\_year\_int)}
\CommentTok{\#\textgreater{} [1] "integer"}
\end{Highlighting}
\end{Shaded}

Assign levels to values of integer variable:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{wwlist}\OperatorTok{$}\NormalTok{receive\_year\_fac \textless{}{-}}\StringTok{ }\KeywordTok{factor}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{receive\_year\_int, }
      \DataTypeTok{labels=}\KeywordTok{c}\NormalTok{(}\StringTok{"Twenty{-}sixteen"}\NormalTok{,}\StringTok{"Twenty{-}seventeen"}\NormalTok{,}\StringTok{"Twenty{-}eighteen"}\NormalTok{))}
\KeywordTok{str}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{receive\_year\_fac)}
\KeywordTok{str}\NormalTok{(wwlist}\OperatorTok{$}\NormalTok{receive\_year)}

\CommentTok{\#Check variable}
\NormalTok{wwlist }\OperatorTok{\%\textgreater{}\%}
\StringTok{  }\KeywordTok{count}\NormalTok{(receive\_year\_fac)}

\NormalTok{wwlist }\OperatorTok{\%\textgreater{}\%}
\StringTok{  }\KeywordTok{count}\NormalTok{(receive\_year)}
\end{Highlighting}
\end{Shaded}
\end{frame}

\end{document}
