<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="">

<title>Visualizations with ggplot2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="ggplot_files/libs/clipboard/clipboard.min.js"></script>
<script src="ggplot_files/libs/quarto-html/quarto.js"></script>
<script src="ggplot_files/libs/quarto-html/popper.min.js"></script>
<script src="ggplot_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="ggplot_files/libs/quarto-html/anchor.min.js"></script>
<link href="ggplot_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="ggplot_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="ggplot_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="ggplot_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="ggplot_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">1</span> Introduction</a>
  <ul class="collapse">
  <li><a href="#datasets-we-will-use" id="toc-datasets-we-will-use" class="nav-link" data-scroll-target="#datasets-we-will-use"><span class="header-section-number">1.1</span> Datasets we will use</a></li>
  <li><a href="#typeclass-of-variables-ggplot-expects" id="toc-typeclass-of-variables-ggplot-expects" class="nav-link" data-scroll-target="#typeclass-of-variables-ggplot-expects"><span class="header-section-number">1.2</span> Type/class of variables ggplot expects</a></li>
  </ul></li>
  <li><a href="#concepts" id="toc-concepts" class="nav-link" data-scroll-target="#concepts"><span class="header-section-number">2</span> Concepts</a>
  <ul class="collapse">
  <li><a href="#layers" id="toc-layers" class="nav-link" data-scroll-target="#layers"><span class="header-section-number">2.1</span> Layers</a></li>
  <li><a href="#dataset-data" id="toc-dataset-data" class="nav-link" data-scroll-target="#dataset-data"><span class="header-section-number">2.2</span> Dataset (<strong>data</strong>)</a></li>
  <li><a href="#set-of-aesthetic-mappings-mappings" id="toc-set-of-aesthetic-mappings-mappings" class="nav-link" data-scroll-target="#set-of-aesthetic-mappings-mappings"><span class="header-section-number">2.3</span> Set of aesthetic mappings (<strong>mappings</strong>)</a></li>
  <li><a href="#statistical-transformation-stat" id="toc-statistical-transformation-stat" class="nav-link" data-scroll-target="#statistical-transformation-stat"><span class="header-section-number">2.4</span> Statistical transformation (<strong>stat</strong>)</a></li>
  <li><a href="#geometric-objects-geoms" id="toc-geometric-objects-geoms" class="nav-link" data-scroll-target="#geometric-objects-geoms"><span class="header-section-number">2.5</span> Geometric objects (<strong>geoms</strong>)</a></li>
  <li><a href="#position-adjustment-position" id="toc-position-adjustment-position" class="nav-link" data-scroll-target="#position-adjustment-position"><span class="header-section-number">2.6</span> Position adjustment (<strong>position</strong>)</a></li>
  <li><a href="#coordinate-system-coord" id="toc-coordinate-system-coord" class="nav-link" data-scroll-target="#coordinate-system-coord"><span class="header-section-number">2.7</span> Coordinate system (<strong>coord</strong>)</a></li>
  <li><a href="#faceting-scheme-facets" id="toc-faceting-scheme-facets" class="nav-link" data-scroll-target="#faceting-scheme-facets"><span class="header-section-number">2.8</span> Faceting scheme (<strong>facets</strong>)</a></li>
  </ul></li>
  <li><a href="#creating-graphs-using-ggplot" id="toc-creating-graphs-using-ggplot" class="nav-link" data-scroll-target="#creating-graphs-using-ggplot"><span class="header-section-number">3</span> Creating graphs using <code>ggplot</code></a>
  <ul class="collapse">
  <li><a href="#ggplot-and-aes-functions" id="toc-ggplot-and-aes-functions" class="nav-link" data-scroll-target="#ggplot-and-aes-functions"><span class="header-section-number">3.1</span> <code>ggplot()</code> and <code>aes()</code> functions</a></li>
  <li><a href="#adding-geometric-layers" id="toc-adding-geometric-layers" class="nav-link" data-scroll-target="#adding-geometric-layers"><span class="header-section-number">3.2</span> Adding geometric layers</a>
  <ul class="collapse">
  <li><a href="#scatterplots-using-geom_point" id="toc-scatterplots-using-geom_point" class="nav-link" data-scroll-target="#scatterplots-using-geom_point"><span class="header-section-number">3.2.1</span> Scatterplots using <code>geom_point()</code></a></li>
  <li><a href="#smoothed-prediction-lines-using-geom_smooth" id="toc-smoothed-prediction-lines-using-geom_smooth" class="nav-link" data-scroll-target="#smoothed-prediction-lines-using-geom_smooth"><span class="header-section-number">3.2.2</span> Smoothed prediction lines using <code>geom_smooth()</code></a></li>
  <li><a href="#plotting-multiple-geom-layers" id="toc-plotting-multiple-geom-layers" class="nav-link" data-scroll-target="#plotting-multiple-geom-layers"><span class="header-section-number">3.2.3</span> Plotting multiple geom layers</a></li>
  <li><a href="#bar-charts-using-geom_bar-and-geom_col" id="toc-bar-charts-using-geom_bar-and-geom_col" class="nav-link" data-scroll-target="#bar-charts-using-geom_bar-and-geom_col"><span class="header-section-number">3.2.4</span> Bar charts using <code>geom_bar()</code> and <code>geom_col()</code></a></li>
  </ul></li>
  <li><a href="#small-multiples-using-faceting" id="toc-small-multiples-using-faceting" class="nav-link" data-scroll-target="#small-multiples-using-faceting"><span class="header-section-number">3.3</span> Small multiples using faceting</a>
  <ul class="collapse">
  <li><a href="#faceting-by-one-variable" id="toc-faceting-by-one-variable" class="nav-link" data-scroll-target="#faceting-by-one-variable"><span class="header-section-number">3.3.1</span> Faceting by one variable</a></li>
  <li><a href="#faceting-by-two-variables" id="toc-faceting-by-two-variables" class="nav-link" data-scroll-target="#faceting-by-two-variables"><span class="header-section-number">3.3.2</span> Faceting by two variables</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#customization" id="toc-customization" class="nav-link" data-scroll-target="#customization"><span class="header-section-number">4</span> Customization</a>
  <ul class="collapse">
  <li><a href="#labels" id="toc-labels" class="nav-link" data-scroll-target="#labels"><span class="header-section-number">4.1</span> Labels</a></li>
  <li><a href="#scales" id="toc-scales" class="nav-link" data-scroll-target="#scales"><span class="header-section-number">4.2</span> Scales</a></li>
  <li><a href="#colors" id="toc-colors" class="nav-link" data-scroll-target="#colors"><span class="header-section-number">4.3</span> Colors</a>
  <ul class="collapse">
  <li><a href="#hcl-color-space" id="toc-hcl-color-space" class="nav-link" data-scroll-target="#hcl-color-space"><span class="header-section-number">4.3.1</span> HCL Color Space</a></li>
  <li><a href="#rcolorbrewer-palettes" id="toc-rcolorbrewer-palettes" class="nav-link" data-scroll-target="#rcolorbrewer-palettes"><span class="header-section-number">4.3.2</span> RColorBrewer Palettes</a></li>
  <li><a href="#scale_color_brewer-for-discrete-variables" id="toc-scale_color_brewer-for-discrete-variables" class="nav-link" data-scroll-target="#scale_color_brewer-for-discrete-variables"><span class="header-section-number">4.3.3</span> <code>scale_color_brewer()</code> for discrete variables</a></li>
  <li><a href="#scale_color_gradient-for-continuous-variables" id="toc-scale_color_gradient-for-continuous-variables" class="nav-link" data-scroll-target="#scale_color_gradient-for-continuous-variables"><span class="header-section-number">4.3.4</span> <code>scale_color_gradient()</code> for continuous variables</a></li>
  <li><a href="#scale_color_manual-to-select-specific-colors" id="toc-scale_color_manual-to-select-specific-colors" class="nav-link" data-scroll-target="#scale_color_manual-to-select-specific-colors"><span class="header-section-number">4.3.5</span> <code>scale_color_manual()</code> to select specific colors</a></li>
  </ul></li>
  <li><a href="#themes" id="toc-themes" class="nav-link" data-scroll-target="#themes"><span class="header-section-number">4.4</span> Themes</a></li>
  </ul></li>
  <li><a href="#exporting-plots" id="toc-exporting-plots" class="nav-link" data-scroll-target="#exporting-plots"><span class="header-section-number">5</span> Exporting plots</a>
  <ul class="collapse">
  <li><a href="#exporting-in-rstudio" id="toc-exporting-in-rstudio" class="nav-link" data-scroll-target="#exporting-in-rstudio"><span class="header-section-number">5.1</span> Exporting in RStudio</a></li>
  <li><a href="#exporting-via-r-code" id="toc-exporting-via-r-code" class="nav-link" data-scroll-target="#exporting-via-r-code"><span class="header-section-number">5.2</span> Exporting via R code</a></li>
  </ul></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references"><span class="header-section-number">6</span> References</a></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Visualizations with ggplot2</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<p>Load packages:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2) <span class="co"># superfluous because ggplot2 is part of tidyverse</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales) <span class="co"># for formatting labels for axes and legends</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven) <span class="co">#read in spss, stata, sas files</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(labelled) <span class="co">#work with metadata e.g., variable and value labels</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer) <span class="co">#manage colors in R</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>If package not yet installed</strong>, then must install before you load. Install in “console” rather than .Rmd file:</p>
<ul>
<li>Generic syntax: <code>install.packages("package_name")</code></li>
<li>Install “tidyverse”: <code>install.packages("ggplot2")</code></li>
</ul>
<p><strong>Note</strong>: When we load package, name of package is not in quotes; but when we install package, name of package is in quotes:</p>
<ul>
<li><code>install.packages("ggplot2")</code></li>
<li><code>library(ggplot2)</code></li>
</ul>
<p><strong>Resources used to create this lecture:</strong></p>
<ul>
<li>https://r4ds.had.co.nz/data-visualisation.html</li>
<li>https://cfss.uchicago.edu/notes/grammar-of-graphics/#data-and-mapping</li>
<li>https://codewords.recurse.com/issues/six/telling-stories-with-data-using-the-grammar-of-graphics</li>
<li>http://r-statistics.co/Complete-Ggplot2-Tutorial-Part1-With-R-Code.html</li>
<li>https://ggplot2-book.org/</li>
</ul>
<p><strong>ggplot cheatsheet</strong>:</p>
<ul>
<li>https://www.maths.usyd.edu.au/u/UG/SM/STAT3022/r/current/Misc/data-visualization-2.1.pdf</li>
</ul>
<p>It may be helpful to familiarize yourself with this cheatsheet and use it as a reference point for review and practice after going through the lecture.</p>
<section id="datasets-we-will-use" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="datasets-we-will-use"><span class="header-section-number">1.1</span> Datasets we will use</h2>
<p>We will use two datasets that are part of the <code>ggplot2</code> package:</p>
<ul>
<li><code>mpg</code>: EPA fuel economy data in 1999 and 2008 for 38 car models that had a new release every year between 1999 and 2008
<ul>
<li>Note: There are no set of variables that uniquely identify observations</li>
</ul></li>
<li><code>diamonds</code>: Prices and attributes of about 54,000 diamonds</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#?mpg</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(mpg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 234
Columns: 11
$ manufacturer &lt;chr&gt; "audi", "audi", "audi", "audi", "audi", "audi", "audi", "…
$ model        &lt;chr&gt; "a4", "a4", "a4", "a4", "a4", "a4", "a4", "a4 quattro", "…
$ displ        &lt;dbl&gt; 1.8, 1.8, 2.0, 2.0, 2.8, 2.8, 3.1, 1.8, 1.8, 2.0, 2.0, 2.…
$ year         &lt;int&gt; 1999, 1999, 2008, 2008, 1999, 1999, 2008, 1999, 1999, 200…
$ cyl          &lt;int&gt; 4, 4, 4, 4, 6, 6, 6, 4, 4, 4, 4, 6, 6, 6, 6, 6, 6, 8, 8, …
$ trans        &lt;chr&gt; "auto(l5)", "manual(m5)", "manual(m6)", "auto(av)", "auto…
$ drv          &lt;chr&gt; "f", "f", "f", "f", "f", "f", "f", "4", "4", "4", "4", "4…
$ cty          &lt;int&gt; 18, 21, 20, 21, 16, 18, 18, 18, 16, 20, 19, 15, 17, 17, 1…
$ hwy          &lt;int&gt; 29, 29, 31, 30, 26, 26, 27, 26, 25, 28, 27, 25, 25, 25, 2…
$ fl           &lt;chr&gt; "p", "p", "p", "p", "p", "p", "p", "p", "p", "p", "p", "p…
$ class        &lt;chr&gt; "compact", "compact", "compact", "compact", "compact", "c…</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">#?diamonds</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(diamonds)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 53,940
Columns: 10
$ carat   &lt;dbl&gt; 0.23, 0.21, 0.23, 0.29, 0.31, 0.24, 0.24, 0.26, 0.22, 0.23, 0.…
$ cut     &lt;ord&gt; Ideal, Premium, Good, Premium, Good, Very Good, Very Good, Ver…
$ color   &lt;ord&gt; E, E, E, I, J, J, I, H, E, H, J, J, F, J, E, E, I, J, J, J, I,…
$ clarity &lt;ord&gt; SI2, SI1, VS1, VS2, SI2, VVS2, VVS1, SI1, VS2, VS1, SI1, VS1, …
$ depth   &lt;dbl&gt; 61.5, 59.8, 56.9, 62.4, 63.3, 62.8, 62.3, 61.9, 65.1, 59.4, 64…
$ table   &lt;dbl&gt; 55, 61, 65, 58, 58, 57, 57, 55, 61, 61, 55, 56, 61, 54, 62, 58…
$ price   &lt;int&gt; 326, 326, 327, 334, 335, 336, 336, 337, 337, 338, 339, 340, 34…
$ x       &lt;dbl&gt; 3.95, 3.89, 4.05, 4.20, 4.34, 3.94, 3.95, 4.07, 3.87, 4.00, 4.…
$ y       &lt;dbl&gt; 3.98, 3.84, 4.07, 4.23, 4.35, 3.96, 3.98, 4.11, 3.78, 4.05, 4.…
$ z       &lt;dbl&gt; 2.43, 2.31, 2.31, 2.63, 2.75, 2.48, 2.47, 2.53, 2.49, 2.39, 2.…</code></pre>
</div>
</div>
<p>We will use public-use data from the <em>National Center for Education Statistics (NCES) Educational Longitudinal Survey (ELS)</em> of 2002:</p>
<ul>
<li>Follows 10th graders from 2002 until 2012</li>
<li>Variable <code>stu_id</code> uniquely identifies observations</li>
</ul>
<p>The following RData file contains 2 dataframes, <code>df_els_stu_allobs</code> (variables are mostly haven labelled) and <code>df_els_stu_allobs_fac</code> (variables are mostly factors). We will be using the <code>df_els_stu_allobs_fac</code> because <code>ggplot</code> generally expects categorical variables to be factor variables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="fu">url</span>(<span class="st">'https://github.com/anyone-can-cook/educ152/raw/main/data/els/output_data/els_stu.RData'</span>))</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>els <span class="ot">&lt;-</span> df_els_stu_allobs_fac</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<details>
<summary>
<strong>ELS dataset</strong>: Overview of variables using <code>glimpse()</code>
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>els <span class="sc">%&gt;%</span> <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 16,197
Columns: 104
$ stu_id        &lt;dbl&gt; 101101, 101102, 101104, 101105, 101106, 101107, 101108, …
$ sch_id        &lt;fct&gt; Suppressed, Suppressed, Suppressed, Suppressed, Suppress…
$ strat_id      &lt;dbl&gt; 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 1…
$ psu           &lt;fct&gt; PSU 1, PSU 1, PSU 1, PSU 1, PSU 1, PSU 1, PSU 1, PSU 1, …
$ f3univ        &lt;chr&gt; "1101", "1111", "1111", "1111", "1111", "1111", "1111", …
$ g10cohrt      &lt;fct&gt; Sophomore cohort member, Sophomore cohort member, Sophom…
$ f1pared       &lt;fct&gt; "Attended college, no 4-year degree", "Attended college,…
$ byincome      &lt;fct&gt; "$50,001-$75,000", "$75,001-$100,000", "$50,001-$75,000"…
$ bystexp       &lt;fct&gt; "Attend or complete 2-year college/school", "Obtain PhD,…
$ byparasp      &lt;fct&gt; "Graduate from college", "Obtain PhD, MD, or other advan…
$ bytxstat      &lt;fct&gt; Both reading and math, Both reading and math, Both readi…
$ bypqstat      &lt;fct&gt; Full CATI, Hard copy full questionnaire, Full CATI, Nonr…
$ bytxmstd      &lt;dbl+lbl&gt; 52.11, 57.65, 66.44, 44.68, 40.57, 35.04, 50.71, 66.…
$ bynels2m      &lt;dbl+lbl&gt; 47.84, 55.30, 66.24, 35.33, 29.97, 24.28, 45.16, 66.…
$ bytxrstd      &lt;dbl+lbl&gt; 59.53, 56.70, 64.46, 48.69, 33.53, 28.85, 40.80, 68.…
$ bysctrl       &lt;fct&gt; Public, Public, Public, Public, Public, Public, Public, …
$ byurban       &lt;fct&gt; Urban, Urban, Urban, Urban, Urban, Urban, Urban, Urban, …
$ byregion      &lt;fct&gt; Northeast, Northeast, Northeast, Northeast, Northeast, N…
$ byfcomp       &lt;fct&gt; Father and female guardian, Mother and father, Mother an…
$ bysibhom      &lt;fct&gt; 0 siblings, Missing, 1 sibling, Nonrespondent, 3 sibling…
$ bys34a        &lt;dbl+lbl&gt;  1,  1, -9,  4,  8,  7,  1,  2, -9,  7,  4,  1,  5, …
$ f1sex         &lt;fct&gt; Female, Female, Female, Female, Female, Male, Male, Male…
$ f1race        &lt;fct&gt; "Hispanic, race specified", "Asian, Hawaii/Pac. Islander…
$ f1stlang      &lt;fct&gt; Yes, No, Yes, Yes, No, No, Yes, Yes, Yes, Yes, Yes, No, …
$ f1homlng      &lt;fct&gt; English, West/South Asian language, English, English, Sp…
$ f1mothed      &lt;fct&gt; "Did not finish high school", "Attended college, no 4-ye…
$ f1fathed      &lt;fct&gt; "Attended college, no 4-year degree", "Attended college,…
$ f1ses1        &lt;fct&gt; -0.25, 0.57, -0.86, -0.81, -1.41, -0.99, 0.27, -0.16, -1…
$ f1ses1qu      &lt;fct&gt; Second quartile, Highest quartile, Lowest quartile, Lowe…
$ f1stexp       &lt;fct&gt; "High school graduation only", "Obtain PhD, MD, or other…
$ f1txmstd      &lt;dbl+lbl&gt; 49.60, 60.64, 64.26, 45.59, 38.79, 32.00, 46.15, -8.…
$ f1rgpp2       &lt;fct&gt; 1.51 - 2.00, 2.51 - 3.00, 2.51 - 3.00, 2.51 - 3.00, 2.51…
$ f1s24cc       &lt;fct&gt; Item legitimate skip/NA, Item legitimate skip/NA, Item l…
$ f1s24bc       &lt;fct&gt; Item legitimate skip/NA, Item legitimate skip/NA, Item l…
$ f2everdo      &lt;fct&gt; No available evidence of dropout episode, No available e…
$ f2dostat      &lt;fct&gt; No known dropout episode, No known dropout episode, No k…
$ f2evratt      &lt;fct&gt; Survey component legitimate skip/NA, Yes, Yes, Yes, Yes,…
$ f2ps1         &lt;fct&gt; Survey component legitimate skip/NA, 1, 1, 1, 1, Item le…
$ f2ps1lvl      &lt;fct&gt; "Survey component legitimate skip/NA", "Four or more yea…
$ f2ps1ctr      &lt;fct&gt; Survey component legitimate skip/NA, Public, Public, Pub…
$ f2ps1sec      &lt;fct&gt; "Survey component legitimate skip/NA", "Public, 4-year o…
$ f2ps1slc      &lt;fct&gt; Suppressed, Suppressed, Suppressed, Suppressed, Suppress…
$ f2rtype       &lt;fct&gt; Survey component legitimate skip/NA, Standard enrollee, …
$ f2c01         &lt;fct&gt; Survey component legitimate skip/NA, Yes, Yes, Yes, Yes,…
$ f2c24_p       &lt;fct&gt; Survey component legitimate skip/NA, 0 jobs, 1 job, Item…
$ f2c25a        &lt;fct&gt; Survey component legitimate skip/NA, Item legitimate ski…
$ f2c29_p       &lt;fct&gt; Survey component legitimate skip/NA, 0 jobs, 1 job, 1 jo…
$ f2c30a        &lt;fct&gt; Survey component legitimate skip/NA, Item legitimate ski…
$ f3hsstat      &lt;fct&gt; Recvd HS diploma: Fall 2003 - Summer 2004 graduate, Recv…
$ f3hscpdr      &lt;dbl+lbl&gt; 2004, 2004, 2004, 2004, 2004, 2004, 2004, 2004, 2004…
$ f3edstat      &lt;fct&gt; "Not currently enrolled, but has previous PS attendance"…
$ f3a01d        &lt;fct&gt; No, No, No, Yes, Yes, No, No, No, Nonrespondent, Yes, No…
$ f3evratt      &lt;fct&gt; Has some postsecondary enrollment, Has some postsecondar…
$ f3ps1start    &lt;fct&gt; 2005, 2004, 2004, 2005, 2004, 2006, 2004, 2004, Nonrespo…
$ f3ps1lvl      &lt;fct&gt; "At least 2, but less-than-4-year institution", "4-year …
$ f3ps1ctr      &lt;fct&gt; Public, Public, Public, Public, Public, Private for-prof…
$ f3ps1sec      &lt;fct&gt; "2-year public", "4-year public", "4-year public", "2-ye…
$ f3ps1slc      &lt;fct&gt; Suppressed, Suppressed, Suppressed, Suppressed, Suppress…
$ f3ps1out      &lt;fct&gt; Yes, No, No, No, No, No, No, Yes, Nonrespondent, No, Yes…
$ f3ps1retain   &lt;fct&gt; No cred from PS1; no longer attending PS1; did attend an…
$ f3pstiming    &lt;fct&gt; Delayed postsecondary enrollment, Immediate postsecondar…
$ f3tztranresp  &lt;fct&gt; "Postsecondary attendance reported, transcript responden…
$ f3tzcoverage  &lt;fct&gt; "Potentially incomplete coverage: not all transcripts we…
$ f3tzrectrans  &lt;dbl+lbl&gt;  2,  2,  2,  3,  1, -4,  1,  2, -8,  1,  2,  2,  1, …
$ f3tzreqtrans  &lt;dbl+lbl&gt;  3,  2,  2,  3,  2, -4,  1,  2, -8,  2,  2,  3,  1, …
$ f3tzschtotal  &lt;dbl+lbl&gt;  3,  4,  2,  3,  2, -4,  1,  2, -8,  2,  3,  3,  1, …
$ f3tzps1sec    &lt;fct&gt; "2-year public", "4-year public", "4-year public", "Less…
$ f3tzps1slc    &lt;fct&gt; "Selectivity not classified, 2-year institution", "Highl…
$ f3tzps1start  &lt;dbl+lbl&gt; 2005, 2004, 2004, 2008, 2004,   -4, 2004, 2004,   -8…
$ f3tzhs2ps1    &lt;fct&gt; 18, 3, 3, 54, 3, Nonrespondent, 3, 3, Survey component l…
$ f3tzever2yr   &lt;fct&gt; Yes, Yes, Yes, Yes, Yes, Nonrespondent, Yes, Yes, Survey…
$ f3tzever4yr   &lt;fct&gt; Yes, Yes, Yes, No, No, Nonrespondent, No, Yes, Survey co…
$ f3tzremtot    &lt;dbl+lbl&gt;  0,  0,  0,  3,  5, -4,  2,  0, -8,  4,  0,  0,  4, …
$ f3tzrempass   &lt;dbl+lbl&gt;  0,  0,  0,  1,  5, -4,  2,  0, -8,  2,  0,  0,  4, …
$ f3tzremengps  &lt;dbl+lbl&gt;  0,  0,  0,  0,  0, -4,  0,  0, -8,  0,  0,  0,  1, …
$ f3tzrementot  &lt;dbl+lbl&gt;  0,  0,  0,  0,  0, -4,  0,  0, -8,  0,  0,  0,  1, …
$ f3tzremmthps  &lt;dbl+lbl&gt;  0,  0,  0,  1,  3, -4,  1,  0, -8,  1,  0,  0,  2, …
$ f3tzremmttot  &lt;dbl+lbl&gt;  0,  0,  0,  3,  3, -4,  1,  0, -8,  3,  0,  0,  2, …
$ f3tzanydegre  &lt;fct&gt; No, No, Yes, Yes, No, Nonrespondent, No, Yes, Survey com…
$ f3tzhighdeg   &lt;fct&gt; Item legitimate skip/NA, Item legitimate skip/NA, Bachel…
$ f3tzcert1dt   &lt;fct&gt; Item legitimate skip/NA, Item legitimate skip/NA, Item l…
$ f3tzcrt1cip2  &lt;fct&gt; "Item legitimate skip/NA", "Item legitimate skip/NA", "I…
$ f3tzasoc1dt   &lt;fct&gt; Item legitimate skip/NA, Item legitimate skip/NA, Item l…
$ f3tzasc1cip2  &lt;fct&gt; "Item legitimate skip/NA", "Item legitimate skip/NA", "I…
$ f3tzbach1dt   &lt;fct&gt; Item legitimate skip/NA, Item legitimate skip/NA, 2008, …
$ f3tzbch1cip2  &lt;fct&gt; "Item legitimate skip/NA", "Item legitimate skip/NA", "V…
$ f3stloanamt   &lt;dbl+lbl&gt;    -3,    -3, 40000,    -3, 20000,  5000,    -3, 250…
$ f3stloanevr   &lt;fct&gt; No, No, Yes, No, Yes, Yes, No, Yes, Nonrespondent, No, Y…
$ f3stloanpay   &lt;dbl+lbl&gt;  -3,  -3, 400,  -3, 260,  50,  -3, 260,  -4,  -3,  -…
$ f3ern2011     &lt;dbl+lbl&gt;  4000,  3000, 37000,  1500, 48000, 35000, 17000, 680…
$ f3tzpostatt   &lt;dbl+lbl&gt;  56,  51, 132,  90,  50,  -4,  30, 204,  -8,  15, 12…
$ f3tzpostern   &lt;dbl+lbl&gt;  44,  51, 132,  72,  50,  -4,  30, 195,  -8,  15, 10…
$ f1rmat_p      &lt;fct&gt; 4.0 - 4.99, 5.0 - 5.99, 5.0 - 5.99, 5.0 - 5.99, 5.0 - 5.…
$ f3totloan     &lt;dbl&gt; 0, 0, 40000, 0, 20000, 5000, 0, 25000, 0, 0, 45000, 2000…
$ f2enroll0405  &lt;fct&gt; NA, yes, yes, no, yes, no, yes, yes, NA, yes, yes, NA, N…
$ f2enroll0506  &lt;fct&gt; NA, yes, yes, yes, yes, no, yes, yes, NA, yes, yes, NA, …
$ f2intern0405  &lt;fct&gt; NA, no, no, NA, no, NA, no, no, NA, no, no, NA, NA, no, …
$ f2intern0506  &lt;fct&gt; NA, no, no, no, yes, NA, no, yes, NA, no, no, NA, NA, no…
$ parent_income &lt;dbl&gt; 62500, 87500, 62500, 500, 17500, 32500, 62500, 62500, 30…
$ f1race_v2     &lt;fct&gt; latinx, api, white, black, latinx, latinx, latinx, white…
$ hs_math_cred  &lt;fct&gt; 4.0 - 4.99, 5.0 - 5.99, 5.0 - 5.99, 5.0 - 5.99, 5.0 - 5.…
$ dev_math_01   &lt;fct&gt; no, no, no, yes, yes, NA, yes, no, NA, yes, no, no, yes,…
$ dev_math_cat4 &lt;fct&gt; 0 courses, 0 courses, 0 courses, 3+ courses, 3+ courses,…
$ dev_math_cat3 &lt;fct&gt; 0 courses, 0 courses, 0 courses, 2+ courses, 2+ courses,…</code></pre>
</div>
</div>
</details>
<details>
<summary>
<strong>ELS dataset</strong>: Overview of variable labels using <code>var_label()</code>
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>els <span class="sc">%&gt;%</span> <span class="fu">var_label</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$stu_id
[1] "Student ID"

$sch_id
[1] "School ID"

$strat_id
[1] "Stratum"

$psu
[1] "Primary sampling unit"

$f3univ
[1] "Cross-round sample member status summary (BY to F3)"

$g10cohrt
[1] "Sophomore cohort member in 2001-2002 school year"

$f1pared
[1] "F1 parent's highest level of education"

$byincome
[1] "Total family income from all sources 2001-composite"

$bystexp
[1] "How far in school student thinks will get-composite"

$byparasp
[1] "How far in school parent wants 10th-grader to go-composite"

$bytxstat
[1] "Base year test score status"

$bypqstat
[1] "Base year parent questionnaire status"

$bytxmstd
[1] "Math test standardized score"

$bynels2m
[1] "ELS-NELS 1992 scale equated sophomore math score"

$bytxrstd
[1] "Reading test standardized score"

$bysctrl
[1] "School control"

$byurban
[1] "School urbanicity"

$byregion
[1] "Geographic region of school"

$byfcomp
[1] "Family composition"

$bysibhom
[1] "BY number of in-home siblings"

$bys34a
[1] "Hours/week spent on homework in school"

$f1sex
[1] "F1 sex-composite"

$f1race
[1] "F1 student's race/ethnicity-composite"

$f1stlang
[1] "F1 whether English is student's native language-composite"

$f1homlng
[1] "F1 student's native language-composite"

$f1mothed
[1] "F1 mother's highest level of education-composite"

$f1fathed
[1] "F1 father's highest level of education-composite"

$f1ses1
[1] "F1 socio-economic status composite, v.1"

$f1ses1qu
[1] "F1 quartile coding of SES1 variable"

$f1stexp
[1] "F1 how far in school student thinks will get-composite"

$f1txmstd
[1] "F1 math standardized score"

$f1rgpp2
[1] "GPA for all courses taken in the 9th - 12th grades - categorical"

$f1s24cc
[1] "Participated in Gear Up/other similar program in 11th grade"

$f1s24bc
[1] "Participated in Upward Bound in 11th grade"

$f2everdo
[1] "F2 ever dropped out"

$f2dostat
[1] "F2 dropout status (as of 2006 interview)"

$f2evratt
[1] "Whether has ever attended a postsecondary institution - composite"

$f2ps1
[1] "First 'real' postsecondary institution link number"

$f2ps1lvl
[1] "Level of offering of first postsecondary institution"

$f2ps1ctr
[1] "Control of first postsecondary institution"

$f2ps1sec
[1] "Sector of first postsecondary institution"

$f2ps1slc
[1] "Institutional selectivity of first attended postsecondary institution"

$f2rtype
[1] "F2 respondent type"

$f2c01
[1] "Ever held a job since leaving high school"

$f2c24_p
[1] "Number of jobs during 2004-2005 school year"

$f2c25a
[1] "Held internship or co-op job while enrolled in 2004-2005 school year"

$f2c29_p
[1] "Number of jobs during 2005-2006 school year"

$f2c30a
[1] "Held internship or co-op job while enrolled in 2005-2006 school year"

$f3hsstat
[1] "High school completion status (updated version of F2HSSTAT)"

$f3hscpdr
[1] "High school completion date (updated version of F2HSCPDR)"

$f3edstat
[1] "Postsecondary enrollment status as of the F3 interview"

$f3a01d
[1] "Current activities:  Taking courses at a 2- or 4-yr school"

$f3evratt
[1] "F3 ever attended a postsecondary institution"

$f3ps1start
[1] "Year/month first attended a postsecondary institution"

$f3ps1lvl
[1] "Level of first-attended PS institution"

$f3ps1ctr
[1] "Control of first-attended PS institution"

$f3ps1sec
[1] "Sector of first-attended PS institution"

$f3ps1slc
[1] "Selectivity of first-attended PS institution"

$f3ps1out
[1] "Whether 1st PS institution was out-of-state"

$f3ps1retain
[1] "Status relative to first-attended postsecondary institution"

$f3pstiming
[1] "Timing of first postsecondary enrollment"

$f3tztranresp
[1] "Transcript: Transcript response status"

$f3tzcoverage
[1] "Transcript: Overall transcript coverage indicator"

$f3tzrectrans
[1] "Transcript: Number of transcripts received"

$f3tzreqtrans
[1] "Transcript: Number of transcripts requested"

$f3tzschtotal
[1] "Transcript: Total known institutions attended"

$f3tzps1sec
[1] "Transcript: Sector of first known postsecondary institution"

$f3tzps1slc
[1] "Transcript: Institutional selectivity of first known postsecondary institution"

$f3tzps1start
[1] "Transcript: Date of first known postsecondary attendance"

$f3tzhs2ps1
[1] "Transcript: Number of months between HS exit and postsecondary entry"

$f3tzever2yr
[1] "Transcript: Ever attended a known 2-year institution"

$f3tzever4yr
[1] "Transcript: Ever attended a known 4-year institution"

$f3tzremtot
[1] "Transcript: Remedial courses: known number taken"

$f3tzrempass
[1] "Transcript: Remedial courses: known number passed"

$f3tzremengps
[1] "Transcript: Remedial English courses: known number passed"

$f3tzrementot
[1] "Transcript: Remedial English courses: known number taken"

$f3tzremmthps
[1] "Transcript: Remedial mathematics courses: known number passed"

$f3tzremmttot
[1] "Transcript: Remedial mathematics courses: known number taken"

$f3tzanydegre
[1] "Transcript: Any known degree attained as of June 2013"

$f3tzhighdeg
[1] "Transcript: Highest known degree attained as of June 2013"

$f3tzcert1dt
[1] "Transcript: Date of first known certificate earned"

$f3tzcrt1cip2
[1] "Transcript: First known certificate major/field of study: 2-digit CIP"

$f3tzasoc1dt
[1] "Transcript: Date of first known associate's degree earned"

$f3tzasc1cip2
[1] "Transcript: First known associate's degree major/field of study: 2-digit CIP"

$f3tzbach1dt
[1] "Transcript: Date of first known bachelor's degree earned"

$f3tzbch1cip2
[1] "Transcript: First known bachelor's degree major/field of study: 2-digit CIP"

$f3stloanamt
[1] "Total amount borrowed in student loans"

$f3stloanevr
[1] "Whether R took out any student/PSE loans"

$f3stloanpay
[1] "Amount currently paid monthly toward student loan balance"

$f3ern2011
[1] "2011 employment income:  R only"

$f3tzpostatt
[1] "Transcript: Postsecondary career: known credits attempted"

$f3tzpostern
[1] "Transcript: Postsecondary career: known credits earned"

$f1rmat_p
[1] "Units in mathematics (SST) - categorical"

$f3totloan
[1] "total loans taken out to pay for postsecondary education as of f3 (2013)"

$f2enroll0405
[1] "0/1 (no/yes) enrolled in 2004-05, based on student survey follow-up 2"

$f2enroll0506
[1] "0/1 (no/yes) enrolled in 2005-06, based on student survey follow-up 2"

$f2intern0405
[1] "0/1 (no/yes) held an internship or co-op in 2004-05; NA if not enrolled in postsecondary education in 2004-05"

$f2intern0506
[1] "0/1 (no/yes) held an internship or co-op in 2005-06; NA if not enrolled in postsecondary education in 2005-06"

$parent_income
[1] "continuous measure of base year parental household income, calculated from categorical variable byincome"

$f1race_v2
[1] "categorical measure of race based on variable f1race"

$hs_math_cred
[1] "Units in mathematics (SST) - categorical"

$dev_math_01
[1] "dichotomous indicator of whether student took any developmental math courses in postsecondary education (based on f3tzremmttot)"

$dev_math_cat4
[1] "four category indicator of whether student took any developmental math courses in postsecondary education (based on f3tzremmttot)"

$dev_math_cat3
[1] "three category indicator of whether student took any developmental math courses in postsecondary education (based on f3tzremmttot)"</code></pre>
</div>
</div>
</details>
</section>
<section id="typeclass-of-variables-ggplot-expects" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="typeclass-of-variables-ggplot-expects"><span class="header-section-number">1.2</span> Type/class of variables ggplot expects</h2>
<p><code>ggplot</code> often doesn’t work well with variables whose class is haven labelled. For categorical variables, <code>ggplot</code> works best with factor class because there is an ordering to the categorical values. We can convert variables to factor class as part of the data manipulation step prior to plotting.</p>
<p><br> <strong>Example</strong>: Comparing plotting haven labelled and factor variables</p>
<p>The <code>f1race</code> variable has a class of haven labelled in the <code>df_els_stu_allobs</code> dataframe and class of factor in the <code>df_els_stu_allobs_fac</code> dataframe. For the factor version, the levels should be the values we want the plot to display (e.g., <code>White, non-Hispanic</code>, <code>Black or African American, non-Hispanic</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Haven labelled</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>df_els_stu_allobs<span class="sc">$</span>f1race <span class="sc">%&gt;%</span> <span class="fu">str</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> dbl+lbl [1:16197] 5, 2, 7, 3, 4, 4, 4, 7, 4, 3, 3, 4, 3, 2, 2, 3, 3, 4, 7,...
 @ label       : chr "F1 student's race/ethnicity-composite"
 @ format.stata: chr "%8.0g"
 @ labels      : Named num [1:7] 1 2 3 4 5 6 7
  ..- attr(*, "names")= chr [1:7] "Amer. Indian/Alaska Native, non-Hispanic" "Asian, Hawaii/Pac. Islander,non-Hispanic" "Black or African American, non-Hispanic" "Hispanic, no race specified" ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>df_els_stu_allobs <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">y=</span>f1race))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Factor</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>df_els_stu_allobs_fac<span class="sc">$</span>f1race <span class="sc">%&gt;%</span> <span class="fu">str</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Factor w/ 7 levels "Amer. Indian/Alaska Native, non-Hispanic",..: 5 2 7 3 4 4 4 7 4 3 ...
 - attr(*, "label")= chr "F1 student's race/ethnicity-composite"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>df_els_stu_allobs_fac <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">y=</span>f1race))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><br> If we try using <code>f1race</code> from <code>df_els_stu_allobs</code> (haven labelled) to specify the color of the points in the following scatterplot, we will get an error:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Haven labelled (does not work)</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>df_els_stu_allobs <span class="sc">%&gt;%</span> </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">unclass</span>(bys34a) <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> bys34a, <span class="at">y =</span> f3ern2011, <span class="at">color =</span> f1race)) <span class="sc">+</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>But using <code>f1race</code> from <code>df_els_stu_allobs_fac</code> (factor) works:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Factor</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>df_els_stu_allobs_fac <span class="sc">%&gt;%</span> </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">unclass</span>(bys34a) <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> bys34a, <span class="at">y =</span> f3ern2011, <span class="at">color =</span> f1race)) <span class="sc">+</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>We can also specify the <em>levels</em> of a factor variable to control the order in which the values are displayed:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>df_els_stu_allobs_fac<span class="sc">$</span>f1race <span class="ot">&lt;-</span> <span class="fu">factor</span>(</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  df_els_stu_allobs_fac<span class="sc">$</span>f1race, </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">'Amer. Indian/Alaska Native, non-Hispanic'</span>,</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>             <span class="st">'Black or African American, non-Hispanic'</span>, </span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>             <span class="st">'Asian, Hawaii/Pac. Islander,non-Hispanic'</span>, </span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>             <span class="st">'More than one race, non-Hispanic'</span>, </span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>             <span class="st">'Hispanic, race specified'</span>, </span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>             <span class="st">'Hispanic, no race specified'</span>,</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>             <span class="st">'White, non-Hispanic'</span>)</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>df_els_stu_allobs_fac <span class="sc">%&gt;%</span> </span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">unclass</span>(bys34a) <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> bys34a, <span class="at">y =</span> f3ern2011, <span class="at">color =</span> f1race)) <span class="sc">+</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="concepts" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Concepts</h1>
<p><strong>Basic definitions:</strong></p>
<ul>
<li>Grammar
<ul>
<li>“The fundamental principles or rules of an art or science” (Oxford English dictionary)</li>
</ul></li>
<li>Grammar of graphics <span class="citation" data-cites="RN4563">[@RN4563]</span>
<ul>
<li>Principles/rules to describe and construct statistical graphics</li>
</ul></li>
<li>Layered grammar of graphics <span class="citation" data-cites="RN4561">[@RN4561]</span>
<ul>
<li>Principles/rules to describe and construct statistical graphics “based around the idea of building up a graphic from multiple layers of data” <span class="citation" data-cites="RN4561">[@RN4561, p. 4]</span></li>
<li>The layered grammar of graphics is a “formal system for building plots… based on the insight that you can uniquely describe <em>any</em> plot as a combination of” seven paramaters <span class="citation" data-cites="RN4564">[@RN4564, chapter 3]</span></li>
</ul></li>
<li>Aesthetics
<ul>
<li><strong>Aesthetics</strong> are visual elements of the plot (e.g., lines, points, symbols, colors, axes)</li>
<li><strong>Aesthetic mappings</strong> (<strong>mappings</strong>) are visual elements of the plot determined by values of specific variables (e.g., a scatterplot where the color of each point depends on the value of the variable <code>race</code>)</li>
<li>In the context of visualization using ggplot, all <strong>mappings</strong> are <strong>aesthetic mappings</strong> but not all <strong>aesthetics</strong> are <strong>aesthetic mappings</strong> (i.e., determined by variable values). For example, when creating a scatterplot you may specify that the color of each point be blue.</li>
</ul></li>
</ul>
<p><strong>The seven parameters of the layered grammar of graphics consists of:</strong></p>
<ul>
<li>Five layers
<ul>
<li>A dataset (<strong>data</strong>)</li>
<li>A set of aesthetic mappings (<strong>mappings</strong>)</li>
<li>A statistical transformation (<strong>stat</strong>)</li>
<li>A geometric object (<strong>geom</strong>)<br>
</li>
<li>A position adjustment (<strong>position</strong>)</li>
</ul></li>
<li>A coordinate system (<strong>coord</strong>)</li>
<li>A faceting scheme (<strong>facets</strong>)</li>
</ul>
<p><code>ggplot2</code> is an R package in the tidyverse suite used to create graphics. We use the <code>ggplot()</code> function to create graphs.</p>
<blockquote class="blockquote">
<p>“In practice, you rarely need to supply all seven parameters to make a graph because ggplot2 will provide useful defaults for everything except the data, the mappings, and the geom function.” <span class="citation" data-cites="RN4564">[@RN4564, chapter 3]</span></p>
</blockquote>
<p>Syntax conveying the seven parameters of the layered grammar of graphics:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> <span class="sc">&lt;</span>DATA<span class="sc">&gt;</span>, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="sc">&lt;</span>MAPPINGS<span class="sc">&gt;</span>)) <span class="sc">+</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="er">&lt;</span>GEOM_FUNCTION<span class="sc">&gt;</span>(</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">stat =</span> <span class="sc">&lt;</span>STAT<span class="sc">&gt;</span>, </span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">position =</span> <span class="sc">&lt;</span>POSITION<span class="sc">&gt;</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="er">&lt;</span>COORDINATE_FUNCTION<span class="sc">&gt;</span> <span class="sc">+</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>  <span class="er">&lt;</span>FACET_FUNCTION<span class="sc">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="layers" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="layers"><span class="header-section-number">2.1</span> Layers</h2>
<p>What does Wickham mean by <strong>layers</strong>? (from “<a href="https://codewords.recurse.com/issues/six/telling-stories-with-data-using-the-grammar-of-graphics">Telling Stories with Data Using the Grammar of Graphics</a>” by Liz Sander)</p>
<ul>
<li>In the grammar of a language, words have different parts of speech (e.g., noun, verb, adjective), with each part of speech performing a different role in a sentence</li>
<li>The layered grammar of graphics decomposes a graphic into different <strong>layers</strong>
<ul>
<li>“These are layers in a literal sense – you can think of them as transparency sheets for an overhead projector, each containing a piece of the graphic, which can be arranged and combined in a variety of ways.”</li>
</ul></li>
</ul>
<p>The five layers of the grammar of graphics:</p>
<ul>
<li><a href="#dataset-data">Dataset</a> (<strong>data</strong>)</li>
<li><a href="#set-of-aesthetic-mappings-mappings">Set of aesthetic mappings</a> (<strong>mappings</strong>)</li>
<li><a href="#statistical-transformation-stat">Statistical transformation</a> (<strong>stat</strong>)</li>
<li><a href="#geometric-objects-geoms">Geometric object</a> (<strong>geom</strong>)</li>
<li><a href="#position-adjustment-position">Position adjustment</a> (<strong>position</strong>)</li>
</ul>
</section>
<section id="dataset-data" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="dataset-data"><span class="header-section-number">2.2</span> Dataset (<strong>data</strong>)</h2>
<p><strong>Data</strong> defines the information to be visualized.</p>
<p><strong>Example</strong>: Imagine a dataset where each observation is a student</p>
<ul>
<li>The variables of interest are hours per week spent on homework in high school (<code>bys34a</code>), earnings in 2011 (<code>f3ern2011</code>), and student sex (<code>f1sex</code>)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>els <span class="sc">%&gt;%</span> <span class="fu">select</span>(stu_id, bys34a, f3ern2011, f1sex) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 4
   stu_id bys34a f3ern2011 f1sex 
    &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt; &lt;fct&gt; 
 1 101101      1      4000 Female
 2 101102      1      3000 Female
 3 101104     -9     37000 Female
 4 101105      4      1500 Female
 5 101106      8     48000 Female
 6 101107      7     35000 Male  
 7 101108      1     17000 Male  
 8 101109      2     68000 Male  
 9 101110     -9        -4 Male  
10 101111      7     42000 Male  </code></pre>
</div>
</div>
</section>
<section id="set-of-aesthetic-mappings-mappings" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="set-of-aesthetic-mappings-mappings"><span class="header-section-number">2.3</span> Set of aesthetic mappings (<strong>mappings</strong>)</h2>
<p><strong>Mapping</strong> defines how variables in a dataset are applied (mapped) to a graphic.</p>
<p><strong>Example</strong>: Consider the previous dataset</p>
<ul>
<li>Map hours/week spent on homework to the x-axis</li>
<li>Map 2011 income to the y-axis</li>
<li>Map sex to the color of each point</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>els <span class="sc">%&gt;%</span> <span class="fu">select</span>(stu_id, bys34a, f3ern2011, f1sex) <span class="sc">%&gt;%</span> </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">x =</span> bys34a, <span class="at">y =</span> f3ern2011, <span class="at">color =</span> f1sex) <span class="sc">%&gt;%</span> </span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 4
   stu_id     x     y color 
    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt; 
 1 101101     1  4000 Female
 2 101102     1  3000 Female
 3 101104    -9 37000 Female
 4 101105     4  1500 Female
 5 101106     8 48000 Female
 6 101107     7 35000 Male  
 7 101108     1 17000 Male  
 8 101109     2 68000 Male  
 9 101110    -9    -4 Male  
10 101111     7 42000 Male  </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>els <span class="sc">%&gt;%</span> </span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(bys34a <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> bys34a, <span class="at">y =</span> f3ern2011, <span class="at">color =</span> f1sex)) <span class="sc">+</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Example</strong>: Depending on the type of plot, a different set of mapping may be needed (i.e., not always <code>x</code> to one variable and <code>y</code> to another)</p>
<ul>
<li>Map sex to the x-axis (<em>by default, bar plots will plot the counts, see next section</em>)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>els <span class="sc">%&gt;%</span> <span class="fu">select</span>(stu_id, f1sex) <span class="sc">%&gt;%</span> </span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">x =</span> f1sex) <span class="sc">%&gt;%</span> </span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 2
   stu_id x     
    &lt;dbl&gt; &lt;fct&gt; 
 1 101101 Female
 2 101102 Female
 3 101104 Female
 4 101105 Female
 5 101106 Female
 6 101107 Male  
 7 101108 Male  
 8 101109 Male  
 9 101110 Male  
10 101111 Male  </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>els <span class="sc">%&gt;%</span> </span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> f1sex)) <span class="sc">+</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">width =</span> <span class="fl">0.6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-38-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="statistical-transformation-stat" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="statistical-transformation-stat"><span class="header-section-number">2.4</span> Statistical transformation (<strong>stat</strong>)</h2>
<p>A <strong>statistical transformation</strong> transforms the underlying data before plotting it. Different types of plots (i.e., <code>geom_*()</code>) will use a different transformation by default so we often do not need to explicitly specify it.</p>
<p><strong>Example</strong>: Imagine creating a scatterplot of the relationship between hours/week spent on homework (x-axis) and 2011 income (y-axis)</p>
<ul>
<li>When creating a scatterplot we usually do not transform the data prior to plotting</li>
<li>This is the “identity” transformation (<em>default for plots like scatterplots</em>)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>els <span class="sc">%&gt;%</span> <span class="fu">select</span>(stu_id,bys34a,f3ern2011) <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">x=</span>bys34a, <span class="at">y=</span>f3ern2011) <span class="sc">%&gt;%</span> </span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 3
   stu_id     x     y
    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 101101     1  4000
 2 101102     1  3000
 3 101104    -9 37000
 4 101105     4  1500
 5 101106     8 48000
 6 101107     7 35000
 7 101108     1 17000
 8 101109     2 68000
 9 101110    -9    -4
10 101111     7 42000</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>els <span class="sc">%&gt;%</span> </span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(bys34a <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> bys34a, <span class="at">y =</span> f3ern2011)) <span class="sc">+</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-42-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Example</strong>: Imagine creating a bar chart of the number of students by sex</p>
<ul>
<li>Here, we do not plot the raw data. Rather, we count the number of observations for each sex category.</li>
<li>This is the “count” transformation (<em>default for plots like barplots</em>)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>els <span class="sc">%&gt;%</span> <span class="fu">count</span>(f1sex) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  f1sex      n
  &lt;fct&gt;  &lt;int&gt;
1 Male    8090
2 Female  8107</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>els <span class="sc">%&gt;%</span> </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> f1sex)) <span class="sc">+</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">width =</span> <span class="fl">0.6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-46-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="geometric-objects-geoms" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="geometric-objects-geoms"><span class="header-section-number">2.5</span> Geometric objects (<strong>geoms</strong>)</h2>
<p>Graphs visually display data, using <strong>geometric objects</strong> like a point, line, bar, etc.</p>
<ul>
<li>Each geometric object in a graph is called a “geom” – they are defined as “visual marks that represent data points” (<a href="https://www.maths.usyd.edu.au/u/UG/SM/STAT3022/r/current/Misc/data-visualization-2.1.pdf">ggplot cheatsheet</a>)</li>
<li>“A geom is the geometrical object that a plot uses to represent data” <span class="citation" data-cites="RN4564">[@RN4564, chapter 3]</span></li>
<li>“People often describe plots by the type of geom that the plot uses. For example, bar charts use bar geoms, line charts use line geoms, boxplots use boxplot geoms” <span class="citation" data-cites="RN4564">[@RN4564, chapter 3]</span></li>
<li><strong>Aesthetics</strong> are “visual attributes of the geom” (e.g., color, fill, shape, position) (<a href="https://cfss.uchicago.edu/notes/grammar-of-graphics/">Grammar of Graphics</a>)
<ul>
<li>Each geom can only display certain aesthetics</li>
<li>For example, a “point geom” can only include the aesthetics position, color, shape, and size</li>
</ul></li>
<li>We can plot the same underlying data using different geoms (e.g., bar chart vs.&nbsp;pie chart)</li>
<li>A single graph can layer multiple geoms (e.g., scatterplot with a “line of best fit” layered on top)</li>
</ul>
</section>
<section id="position-adjustment-position" class="level2" data-number="2.6">
<h2 data-number="2.6" class="anchored" data-anchor-id="position-adjustment-position"><span class="header-section-number">2.6</span> Position adjustment (<strong>position</strong>)</h2>
<p><strong>Position adjustment</strong> adjusts the position of visual elements in the plot so that these visual elements do not overlap with one another in ways that make the plot difficult to interpret.</p>
<p><strong>Example</strong>: The dataset <code>mpg</code> (included in the <code>ggplot2</code> package) contains variables for the specifications of different cars, with 234 observations</p>
<ul>
<li>Create a scatterplot of the relationship between number of cylinders in the engine (x-axis) and highway miles-per-gallon (y-axis)</li>
<li>Below plot is difficult to interpet because many points overlap with one another</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> cyl, <span class="at">y =</span> hwy)) <span class="sc">+</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-48-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>The <code>jitter</code> position adjustment “adds a small amount of random variation to the location of each point” (from <code>?geom_jitter</code>)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> cyl, <span class="at">y =</span> hwy)) <span class="sc">+</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="st">"jitter"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-50-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="coordinate-system-coord" class="level2" data-number="2.7">
<h2 data-number="2.7" class="anchored" data-anchor-id="coordinate-system-coord"><span class="header-section-number">2.7</span> Coordinate system (<strong>coord</strong>)</h2>
<p>“A <strong>coordinate system</strong> maps the position of objects onto the plane of the plot, and controls how the axes and grid lines are drawn. Plots typically use two coordinates (x,y), but could use any number of coordinates.” (<a href="https://cfss.uchicago.edu/notes/grammar-of-graphics/">Grammar of Graphics</a>)</p>
<p><strong>Example</strong>: Cartesian coordinate system</p>
<ul>
<li>Most plots use the Cartesian coordinate system</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>x1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">10</span>)</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>y1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>)</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">qplot</span>(<span class="at">x =</span> x1, <span class="at">y =</span> y1, <span class="at">geom =</span> <span class="st">"blank"</span>, <span class="at">xlab =</span> <span class="cn">NULL</span>, <span class="at">ylab =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="at">label =</span> <span class="st">"Cartesian coordinate system"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-52-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>Use <code>coord_fixed()</code> to fix the scaling of the coordinate system</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_fixed</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-54-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>When using the default Cartesian coordinate system, a common task is to flip the x and y axis using <code>coord_flip()</code>. (From <a href="https://r4ds.had.co.nz/data-visualisation.html#coordinate-systems">R for Data Science</a>)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> class, <span class="at">y =</span> hwy)) <span class="sc">+</span> </span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-56-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> class, <span class="at">y =</span> hwy)) <span class="sc">+</span> </span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-56-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Example</strong>: Polar coordinate system</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>() <span class="sc">+</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="at">label =</span> <span class="st">"Polar coordinate system"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-58-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="faceting-scheme-facets" class="level2" data-number="2.8">
<h2 data-number="2.8" class="anchored" data-anchor-id="faceting-scheme-facets"><span class="header-section-number">2.8</span> Faceting scheme (<strong>facets</strong>)</h2>
<p><strong>Facets</strong> are subplots that display one subset of the data. They are most commonly used to create “small multiples”</p>
<p><strong>Example</strong>: Imagine creating a scatterplot of the relationship between number of cylinders in the engine (x-axis) and highway miles-per-gallon (y-axis), with separate subplots for car <code>class</code> (e.g., midsize, minivan, pickup, suv)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg) <span class="sc">+</span> </span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> cyl, <span class="at">y =</span> hwy), <span class="at">position =</span> <span class="st">"jitter"</span>) <span class="sc">+</span> </span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> class, <span class="at">nrow =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-60-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="creating-graphs-using-ggplot" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Creating graphs using <code>ggplot</code></h1>
<section id="ggplot-and-aes-functions" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="ggplot-and-aes-functions"><span class="header-section-number">3.1</span> <code>ggplot()</code> and <code>aes()</code> functions</h2>
<p>Show help pages for package <code>ggplot2</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(<span class="at">package =</span> ggplot2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>The <code>ggplot()</code> function</strong>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>?ggplot</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="co"># SYNTAX AND DEFAULT VALUES</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> <span class="cn">NULL</span>, <span class="at">mapping =</span> <span class="fu">aes</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Description (from help file)
<ul>
<li>“<code>ggplot()</code> initializes a ggplot object. It can be used to declare the input data frame for a graphic and to specify the set of plot aesthetics intended to be common throughout all subsequent layers unless specifically overridden”</li>
</ul></li>
<li>Arguments
<ul>
<li><code>data</code>: Dataset to use for plot. If not specified in <code>ggplot()</code> function, must be supplied in each layer added to the plot.</li>
<li><code>mapping</code>: Default list of aesthetic mappings to use for plot. If not specified, must be supplied in each layer added to the plot.</li>
</ul></li>
</ul>
<p><strong>The <code>aes()</code> function</strong> (often called within the <code>ggplot()</code> function):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>?aes</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="co"># SYNTAX</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="fu">aes</span>(x, y, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Description (from help file)
<ul>
<li>“Aesthetic mappings describe how variables in the data are mapped to visual properties (aesthetics) of geoms. Aesthetic mappings can be set in <code>ggplot()</code> and in individual layers.”</li>
</ul></li>
<li>Arguments
<ul>
<li><code>x, y, ...</code>: List of name value pairs giving aesthetics to map to variables
<ul>
<li>The names for <code>x</code> and <code>y</code> aesthetics are typically omitted because they are so common</li>
<li>All other aesthetics must be named</li>
</ul></li>
</ul></li>
</ul>
<p><strong>Example</strong>: Putting <code>ggplot()</code> and <code>aes()</code> together</p>
<ul>
<li>Specifying <code>ggplot()</code> and <code>aes()</code> without specifying a geom layer (e.g., <code>geom_point()</code>) creates a blank ggplot:
<ul>
<li>(The two lines of code below are functionally identical)</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> diamonds, <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-68-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> diamonds, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-68-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>Alternatively, we can use pipes with the dataframe we want to plot, which allows us to omit the first <code>data</code> argument of <code>ggplot()</code>:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(diamonds)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "tbl_df"     "tbl"        "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-70-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>We can also create a ggplot object and assign it to a variable for later use:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>diam_ggplot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> diamonds, <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price))</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>diam_ggplot <span class="co"># blank ggplot</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-72-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>Investigate ggplot object:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(diam_ggplot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "list"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(diam_ggplot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "gg"     "ggplot"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(diam_ggplot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 9
 $ data       : tibble [53,940 × 10] (S3: tbl_df/tbl/data.frame)
  ..$ carat  : num [1:53940] 0.23 0.21 0.23 0.29 0.31 0.24 0.24 0.26 0.22 0.23 ...
  ..$ cut    : Ord.factor w/ 5 levels "Fair"&lt;"Good"&lt;..: 5 4 2 4 2 3 3 3 1 3 ...
  ..$ color  : Ord.factor w/ 7 levels "D"&lt;"E"&lt;"F"&lt;"G"&lt;..: 2 2 2 6 7 7 6 5 2 5 ...
  ..$ clarity: Ord.factor w/ 8 levels "I1"&lt;"SI2"&lt;"SI1"&lt;..: 2 3 5 4 2 6 7 3 4 5 ...
  ..$ depth  : num [1:53940] 61.5 59.8 56.9 62.4 63.3 62.8 62.3 61.9 65.1 59.4 ...
  ..$ table  : num [1:53940] 55 61 65 58 58 57 57 55 61 61 ...
  ..$ price  : int [1:53940] 326 326 327 334 335 336 336 337 337 338 ...
  ..$ x      : num [1:53940] 3.95 3.89 4.05 4.2 4.34 3.94 3.95 4.07 3.87 4 ...
  ..$ y      : num [1:53940] 3.98 3.84 4.07 4.23 4.35 3.96 3.98 4.11 3.78 4.05 ...
  ..$ z      : num [1:53940] 2.43 2.31 2.31 2.63 2.75 2.48 2.47 2.53 2.49 2.39 ...
 $ layers     : list()
 $ scales     :Classes 'ScalesList', 'ggproto', 'gg' &lt;ggproto object: Class ScalesList, gg&gt;
    add: function
    clone: function
    find: function
    get_scales: function
    has_scale: function
    input: function
    n: function
    non_position_scales: function
    scales: NULL
    super:  &lt;ggproto object: Class ScalesList, gg&gt; 
 $ mapping    :List of 2
  ..$ x: language ~carat
  .. ..- attr(*, ".Environment")=&lt;environment: R_GlobalEnv&gt; 
  ..$ y: language ~price
  .. ..- attr(*, ".Environment")=&lt;environment: R_GlobalEnv&gt; 
  ..- attr(*, "class")= chr "uneval"
 $ theme      : list()
 $ coordinates:Classes 'CoordCartesian', 'Coord', 'ggproto', 'gg' &lt;ggproto object: Class CoordCartesian, Coord, gg&gt;
    aspect: function
    backtransform_range: function
    clip: on
    default: TRUE
    distance: function
    expand: TRUE
    is_free: function
    is_linear: function
    labels: function
    limits: list
    modify_scales: function
    range: function
    render_axis_h: function
    render_axis_v: function
    render_bg: function
    render_fg: function
    setup_data: function
    setup_layout: function
    setup_panel_guides: function
    setup_panel_params: function
    setup_params: function
    train_panel_guides: function
    transform: function
    super:  &lt;ggproto object: Class CoordCartesian, Coord, gg&gt; 
 $ facet      :Classes 'FacetNull', 'Facet', 'ggproto', 'gg' &lt;ggproto object: Class FacetNull, Facet, gg&gt;
    compute_layout: function
    draw_back: function
    draw_front: function
    draw_labels: function
    draw_panels: function
    finish_data: function
    init_scales: function
    map_data: function
    params: list
    setup_data: function
    setup_params: function
    shrink: TRUE
    train_scales: function
    vars: function
    super:  &lt;ggproto object: Class FacetNull, Facet, gg&gt; 
 $ plot_env   :&lt;environment: R_GlobalEnv&gt; 
 $ labels     :List of 2
  ..$ x: chr "carat"
  ..$ y: chr "price"
 - attr(*, "class")= chr [1:2] "gg" "ggplot"</code></pre>
</div>
</div>
<ul>
<li>Attributes of ggplot object:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(diam_ggplot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$names
[1] "data"        "layers"      "scales"      "mapping"     "theme"      
[6] "coordinates" "facet"       "plot_env"    "labels"     

$class
[1] "gg"     "ggplot"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>diam_ggplot<span class="sc">$</span>mapping</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Aesthetic mapping: 
* `x` -&gt; `carat`
* `y` -&gt; `price`</code></pre>
</div>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>diam_ggplot<span class="sc">$</span>labels</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$x
[1] "carat"

$y
[1] "price"</code></pre>
</div>
</div>
</section>
<section id="adding-geometric-layers" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="adding-geometric-layers"><span class="header-section-number">3.2</span> Adding geometric layers</h2>
<p>Adding a <strong>geometric layer</strong> to a ggplot object dictates how observations are displayed in the plot.</p>
<ul>
<li>Geometric layers are specified using “geom functions”</li>
<li>There are many different geom functions:
<ul>
<li><code>geom_point()</code>: creates a scatterplot</li>
<li><code>geom_bar()</code>: creates a bar chart</li>
<li>etc.</li>
</ul></li>
</ul>
<section id="scatterplots-using-geom_point" class="level3" data-number="3.2.1">
<h3 data-number="3.2.1" class="anchored" data-anchor-id="scatterplots-using-geom_point"><span class="header-section-number">3.2.1</span> Scatterplots using <code>geom_point()</code></h3>
<p><strong>Scatterplots</strong> are most useful for showing the relationship between two continuous variables.</p>
<p><strong>Example</strong>: Scatterplot of the relationship between <code>carat</code> and <code>price</code>, using the <code>diamonds</code> dataset</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co">#ggplot(data = diamonds, aes(x = carat, y = price)) + geom_point()</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> diamonds, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price)) <span class="sc">+</span> <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-78-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>If we already created and assigned a ggplot object, we can use that object to create the plot:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>diam_ggplot <span class="sc">+</span> <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-80-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Example</strong>: Scatterplot of the hours/week spent on homework (<code>bys34a</code>) and 2011 earnings (<code>f3ern2011</code>), using the <code>els</code> dataset</p>
<ul>
<li>First, let’s investigate the underlying variables:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>els <span class="sc">%&gt;%</span> <span class="fu">select</span>(bys34a,f3ern2011) <span class="sc">%&gt;%</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize_all</span>(<span class="at">.funs =</span> <span class="fu">list</span>(<span class="sc">~</span> <span class="fu">mean</span>(., <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="sc">~</span> <span class="fu">min</span>(., <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="sc">~</span> <span class="fu">max</span>(., <span class="at">na.rm =</span> <span class="cn">TRUE</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 6
  bys34a_mean f3ern2011_mean bys34a_min f3ern2011_min bys34a_max f3ern2011_max
        &lt;dbl&gt;          &lt;dbl&gt;      &lt;dbl&gt;         &lt;dbl&gt;      &lt;dbl&gt;         &lt;dbl&gt;
1        3.65         21276.         -9            -8         21        250000</code></pre>
</div>
</div>
<ul>
<li>Investigate values less than zero:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>els <span class="sc">%&gt;%</span> <span class="fu">select</span>(bys34a) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(bys34a<span class="sc">&lt;</span><span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="fu">count</span>(bys34a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 2
  bys34a     n
   &lt;dbl&gt; &lt;int&gt;
1     -9   572
2     -8   305
3     -4   648
4     -1     2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>els <span class="sc">%&gt;%</span> <span class="fu">select</span>(f3ern2011) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(f3ern2011<span class="sc">&lt;</span><span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="fu">count</span>(f3ern2011)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  f3ern2011     n
      &lt;dbl&gt; &lt;int&gt;
1        -8   459
2        -4  2488</code></pre>
</div>
</div>
<ul>
<li>Create version of variables that replace values less than zero with <code>NA</code>:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>els_v2 <span class="ot">&lt;-</span> els <span class="sc">%&gt;%</span> </span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">hw_time =</span> <span class="fu">if_else</span>(bys34a<span class="sc">&lt;</span><span class="dv">0</span>,<span class="cn">NA_real_</span>,<span class="fu">as.numeric</span>(bys34a)),</span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">earn2011 =</span> <span class="fu">if_else</span>(f3ern2011<span class="sc">&lt;</span><span class="dv">0</span>,<span class="cn">NA_real_</span>,<span class="fu">as.numeric</span>(f3ern2011)),</span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a><span class="co">#check</span></span>
<span id="cb72-8"><a href="#cb72-8" aria-hidden="true" tabindex="-1"></a>els_v2 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(bys34a<span class="sc">&lt;</span><span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="fu">count</span>(bys34a, hw_time)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
  bys34a hw_time     n
   &lt;dbl&gt;   &lt;dbl&gt; &lt;int&gt;
1     -9      NA   572
2     -8      NA   305
3     -4      NA   648
4     -1      NA     2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>els_v2 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(f3ern2011<span class="sc">&lt;</span><span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="fu">count</span>(f3ern2011, earn2011)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  f3ern2011 earn2011     n
      &lt;dbl&gt;    &lt;dbl&gt; &lt;int&gt;
1        -8       NA   459
2        -4       NA  2488</code></pre>
</div>
</div>
<ul>
<li>To avoid scatterplot with too many points, create a dataframe consisting of students whose parents have a PhD or first professional degree:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>els_v2 <span class="sc">%&gt;%</span> <span class="fu">count</span>(f1pared)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 × 2
  f1pared                                      n
  &lt;fct&gt;                                    &lt;int&gt;
1 Did not finish high school                1020
2 Graduated from high school or GED         3250
3 Attended 2-year school, no degree         1736
4 Graduated from 2-year school              1660
5 Attended college, no 4-year degree        1820
6 Graduated from college                    3663
7 Completed Master's degree or equivalent   1927
8 Completed PhD, MD, other advanced degree  1121</code></pre>
</div>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>els_v2<span class="sc">$</span>f1pared <span class="sc">%&gt;%</span> <span class="fu">class</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "factor"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>els_v2<span class="sc">$</span>f1pared <span class="sc">%&gt;%</span> <span class="fu">attributes</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$levels
[1] "Did not finish high school"              
[2] "Graduated from high school or GED"       
[3] "Attended 2-year school, no degree"       
[4] "Graduated from 2-year school"            
[5] "Attended college, no 4-year degree"      
[6] "Graduated from college"                  
[7] "Completed Master's degree or equivalent" 
[8] "Completed PhD, MD, other advanced degree"

$class
[1] "factor"

$label
[1] "F1 parent's highest level of education"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co"># els_v2$f1pared is a factor class variable so we filter based on factor levels</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>els_parphd <span class="ot">&lt;-</span> els_v2 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(f1pared<span class="sc">==</span><span class="st">"Completed PhD, MD, other advanced degree"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Plot the scatterplot:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span> els_parphd, <span class="fu">aes</span>(<span class="at">x =</span> hw_time, <span class="at">y =</span> earn2011)) <span class="sc">+</span> <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-90-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><br></p>
<p><strong>Example</strong>: Scatterplot of the relationship between engine displacement (<code>displ</code>) and highway miles-per-gallon (<code>hwy</code>), using the <code>mpg</code> dataset</p>
<ul>
<li>Color of points determined by type of car (<code>class</code>):</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy, <span class="at">color =</span> class)) <span class="sc">+</span> </span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-92-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>Alternatively, the <code>color</code> aesthetic can be specified within <code>geom_point()</code>:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy)) <span class="sc">+</span> </span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">color =</span> class))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-94-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><br></p>
<p><strong>The <code>geom_point()</code> function</strong>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>?geom_point</span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a><span class="co"># SYNTAX AND DEFAULT VALUES</span></span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="cn">NULL</span>, <span class="at">data =</span> <span class="cn">NULL</span>, <span class="at">stat =</span> <span class="st">"identity"</span>,</span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">position =</span> <span class="st">"identity"</span>, ..., <span class="at">na.rm =</span> <span class="cn">FALSE</span>, <span class="at">show.legend =</span> <span class="cn">NA</span>,</span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">inherit.aes =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>note that the default statistical transformation is <code>stat = "identity"</code>
<ul>
<li>that is, we simply plot values of <code>x</code> and <code>y</code> on the Cartesian coordinate system; we don’t perform some kind of statistical transformation before plotting</li>
</ul></li>
<li>The <code>mapping</code> argument determines Aesthetics, like this:
<ul>
<li><code>geom_point(mapping = aes(...))</code></li>
</ul></li>
<li>Aesthetics previously stated from <code>ggplot(mapping = aes(...))</code> will be carried forward unless you explicitly change them within <code>geom_point(mapping = aes(...))</code></li>
<li>For any geometric layer function (e.g., <code>geom_point</code>, <code>geom_bar</code>, <code>geom_boxplot</code>), the help file will tell you which aesthetics the function will accept
<ul>
<li>Aesthetics: <code>geom_point()</code> understands (i.e., accepts) the following aesthetics (required aesthetics in <strong>bold</strong>)
<ul>
<li><strong><code>x</code></strong>, <strong><code>y</code></strong>, <code>alpha</code>, <code>colour</code>, <code>fill</code>, <code>group</code>, <code>shape</code>, <code>size</code>, <code>stroke</code></li>
</ul></li>
<li>Note: Other geom functions (e.g., <code>geom_bar()</code>) accepts a different set of aesthetics</li>
</ul></li>
</ul>
<p><strong>Student Task</strong>: Using the <code>els_parphd</code> dataset, create a scatterplot of the relationship between hours/week spent on homework (<code>hw_time</code>) on the x-axis and 2011 earnings (<code>earn2011</code>) on the y-axis, with the color of points determined by sex (<code>f1sex</code>)</p>
<details>
<summary>
Solution
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span> els_parphd, <span class="fu">aes</span>(<span class="at">x =</span> hw_time, <span class="at">y =</span> earn2011, <span class="at">color =</span> f1sex)) <span class="sc">+</span> <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<p><br></p>
</section>
<section id="smoothed-prediction-lines-using-geom_smooth" class="level3" data-number="3.2.2">
<h3 data-number="3.2.2" class="anchored" data-anchor-id="smoothed-prediction-lines-using-geom_smooth"><span class="header-section-number">3.2.2</span> Smoothed prediction lines using <code>geom_smooth()</code></h3>
<p>Why use <code>geom_smooth()</code>?</p>
<ul>
<li>The biggest problem with scatterplots is “overplotting.” That is, when you plot many observations, points may be plotted on top of one another and it becomes difficult to visually discern the relationship:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> els_v2, <span class="fu">aes</span>(<span class="at">x =</span> hw_time, <span class="at">y =</span> earn2011)) <span class="sc">+</span> <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-100-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>Instead, using <code>geom_smooth()</code> creates smoothed prediction lines with shaded confidence intervals:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> els_v2, <span class="fu">aes</span>(<span class="at">x =</span> hw_time, <span class="at">y =</span> earn2011)) <span class="sc">+</span> <span class="fu">geom_smooth</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-102-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><br></p>
<p><strong>The <code>geom_smooth()</code> function</strong>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>?geom_smooth</span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a><span class="co"># SYNTAX AND DEFAULT VALUES</span></span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_smooth</span>(<span class="at">mapping =</span> <span class="cn">NULL</span>, <span class="at">data =</span> <span class="cn">NULL</span>, <span class="at">stat =</span> <span class="st">"smooth"</span>,</span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">position =</span> <span class="st">"identity"</span>, ..., <span class="at">method =</span> <span class="st">"auto"</span>, <span class="at">formula =</span> y <span class="sc">~</span> x,</span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">se =</span> <span class="cn">TRUE</span>, <span class="at">na.rm =</span> <span class="cn">FALSE</span>, <span class="at">show.legend =</span> <span class="cn">NA</span>, <span class="at">inherit.aes =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Arguments
<ul>
<li>Note default “statistical transformation” (<code>stat</code>), as compared to that of <code>geom_point()</code>:
<ul>
<li><code>stat = "smooth"</code> for <code>geom_smooth()</code></li>
<li><code>stat = "identity"</code> for <code>geom_point()</code></li>
</ul></li>
</ul></li>
<li>Aesthetics: <code>geom_smooth()</code> accepts the following aesthetics (required aesthetics in <strong>bold</strong>)
<ul>
<li><strong><code>x</code></strong>, <strong><code>y</code></strong>, <code>alpha</code>, <code>colour</code>, <code>fill</code>, <code>group</code>, <code>linetype</code>, <code>size</code>, <code>weight</code>, <code>ymax</code>, <code>ymin</code></li>
</ul></li>
</ul>
<p><br></p>
<p><strong>Example</strong>: Smoothed prediction lines for hours/week spent on homework (<code>bys34a</code>) versus 2011 earnings (<code>f3ern2011</code>), using the <code>els</code> dataset</p>
<ul>
<li>This code produces same plot as above, when aesthetics were specified in <code>ggplot()</code>:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>els_v2) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> hw_time, <span class="at">y =</span> earn2011))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-106-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>Use <code>group</code> aesthetic to create separate prediction lines by sex (<code>f1sex</code>):</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co">#ggplot(data=els_v2, aes(x = hw_time, y = earn2011, group=as_factor(f1sex))) + geom_smooth()</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>els_v2) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> hw_time, <span class="at">y =</span> earn2011, <span class="at">group=</span>f1sex))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-108-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>Alternatively, we could produce the same plot by specifying all aesthetics – including the <code>group</code> aesthetic – within the <code>ggplot()</code> function rather than the <code>geom_smooth()</code> function:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> els_v2, <span class="fu">aes</span>(<span class="at">x =</span> hw_time, <span class="at">y =</span> earn2011, <span class="at">group=</span>f1sex)) <span class="sc">+</span> <span class="fu">geom_smooth</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-110-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>Use <code>linetype</code> aesthetic to create separate prediction lines (with different line styles) by sex (<code>f1sex</code>):</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co">#ggplot(data=els_v2, aes(x = hw_time, y = earn2011, linetype=as_factor(f1sex))) + geom_smooth()</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>els_v2) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> hw_time, <span class="at">y =</span> earn2011, <span class="at">linetype=</span>f1sex))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-112-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>Use <code>color</code> aesthetic to create separate prediction lines (with different colors) by sex (<code>f1sex</code>):</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co">#ggplot(data=els_v2, aes(x = hw_time, y = earn2011, color=as_factor(f1sex))) + geom_smooth()</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>els_v2) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> hw_time, <span class="at">y =</span> earn2011, <span class="at">color=</span>f1sex))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-114-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="plotting-multiple-geom-layers" class="level3" data-number="3.2.3">
<h3 data-number="3.2.3" class="anchored" data-anchor-id="plotting-multiple-geom-layers"><span class="header-section-number">3.2.3</span> Plotting multiple geom layers</h3>
<p><strong>Example</strong>: Layer smoothed prediction lines (<code>geom_smooth()</code>) on top of scatterplot (<code>geom_point()</code>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span> els_v2) <span class="sc">+</span> </span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> hw_time, <span class="at">y =</span> earn2011)) <span class="sc">+</span> </span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> hw_time, <span class="at">y =</span> earn2011))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-116-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>Equivalently, the same plot can be created using this syntax:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span> els_v2, <span class="fu">aes</span>(<span class="at">x =</span> hw_time, <span class="at">y =</span> earn2011)) <span class="sc">+</span> </span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-118-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>Adjust x-axis and y-axis limits by using <code>+ xlim()</code> and <code>+ ylim()</code>:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span> els_v2, <span class="fu">aes</span>(<span class="at">x =</span> hw_time, <span class="at">y =</span> earn2011)) <span class="sc">+</span> </span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">21</span>)) <span class="sc">+</span> <span class="fu">ylim</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">100000</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-120-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>Let’s try smaller y-axis limits:
<ul>
<li><strong>Note</strong>. Observations with income values above the y-axis limit are removed from the plot. This includes being removed from the calculation of the smooted prediction line</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span> els_v2, <span class="fu">aes</span>(<span class="at">x =</span> hw_time, <span class="at">y =</span> earn2011)) <span class="sc">+</span> </span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">21</span>)) <span class="sc">+</span> <span class="fu">ylim</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">35000</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-122-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>Layer smoothed prediction lines with different line types by sex (<code>f1sex</code>) on top of scatterplot with different point colors by sex:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span> els_v2) <span class="sc">+</span> </span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> hw_time, <span class="at">y =</span> earn2011, <span class="at">color =</span> f1sex)) <span class="sc">+</span> </span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> hw_time, <span class="at">y =</span> earn2011, <span class="at">linetype =</span> f1sex)) <span class="sc">+</span></span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">21</span>)) <span class="sc">+</span> <span class="fu">ylim</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">100000</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-124-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="bar-charts-using-geom_bar-and-geom_col" class="level3" data-number="3.2.4">
<h3 data-number="3.2.4" class="anchored" data-anchor-id="bar-charts-using-geom_bar-and-geom_col"><span class="header-section-number">3.2.4</span> Bar charts using <code>geom_bar()</code> and <code>geom_col()</code></h3>
<p><strong>Bar charts</strong> are used to plot a single, discrete variable.</p>
<ul>
<li>X-axis typically represents a categorical variable (e.g,. race, sex, institutional type)
<ul>
<li>Each value of the categorical variable is a “group”</li>
</ul></li>
<li>Y-axis often represents the number of cases in a group (or the proportion of cases in a group)
<ul>
<li>But height of bar could also represent mean value for a group or some other summary statistic (e.g., min, max, std)</li>
</ul></li>
</ul>
<p>Two geom functions to create bar charts:</p>
<ul>
<li><code>geom_bar()</code>: The height of each bar represents the number of cases (i.e., observations) in the group
<ul>
<li>Statistical transformation = “count”
<ul>
<li>Y-value for a group is the number of cases in the group</li>
</ul></li>
<li>Use <code>geom_bar()</code> when using (for example) student-level data and you don’t want to summarize student-level data prior to creating the chart</li>
</ul></li>
<li><code>geom_col()</code>: The height of each bar represents the value of some variable for the group
<ul>
<li>Statistical transformation = “identity”
<ul>
<li>Y-value for a group is the value of a variable in the dataframe</li>
</ul></li>
<li>Use <code>geom_col()</code> when you have already created an object of summary statistics (e.g., counts, mean value, etc.)</li>
</ul></li>
</ul>
<p><br></p>
<p><strong>The <code>geom_bar()</code> and <code>geom_col()</code> functions</strong>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>?geom_bar</span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a><span class="co"># SYNTAX AND DEFAULT VALUES</span></span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_bar</span>(<span class="at">mapping =</span> <span class="cn">NULL</span>, <span class="at">data =</span> <span class="cn">NULL</span>, <span class="at">stat =</span> <span class="st">"count"</span>,</span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">position =</span> <span class="st">"stack"</span>, ..., <span class="at">width =</span> <span class="cn">NULL</span>, <span class="at">binwidth =</span> <span class="cn">NULL</span>,</span>
<span id="cb101-6"><a href="#cb101-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">na.rm =</span> <span class="cn">FALSE</span>, <span class="at">show.legend =</span> <span class="cn">NA</span>, <span class="at">inherit.aes =</span> <span class="cn">TRUE</span>)</span>
<span id="cb101-7"><a href="#cb101-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-8"><a href="#cb101-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-9"><a href="#cb101-9" aria-hidden="true" tabindex="-1"></a>?geom_col</span>
<span id="cb101-10"><a href="#cb101-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-11"><a href="#cb101-11" aria-hidden="true" tabindex="-1"></a><span class="co"># SYNTAX AND DEFAULT VALUES</span></span>
<span id="cb101-12"><a href="#cb101-12" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_col</span>(<span class="at">mapping =</span> <span class="cn">NULL</span>, <span class="at">data =</span> <span class="cn">NULL</span>, <span class="at">position =</span> <span class="st">"stack"</span>, ...,</span>
<span id="cb101-13"><a href="#cb101-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">width =</span> <span class="cn">NULL</span>, <span class="at">na.rm =</span> <span class="cn">FALSE</span>, <span class="at">show.legend =</span> <span class="cn">NA</span>,</span>
<span id="cb101-14"><a href="#cb101-14" aria-hidden="true" tabindex="-1"></a>         <span class="at">inherit.aes =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Both <code>geom_bar</code> and <code>geom_col</code> accept the following aesthetics:
<ul>
<li>x, y, alpha, colour, fill, group, linetype, size</li>
</ul></li>
</ul>
<p><br></p>
<p><strong>Example</strong>: Bar chart with the variable <code>cut</code> (e.g., “Fair,” “Good,” “Ideal”) as x-axis and number of diamonds as y-axis, using the <code>diamonds</code> dataset</p>
<ul>
<li>Essentially, you are being asked to create a bar chart from the following frequency count:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> <span class="fu">count</span>(cut)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  cut           n
  &lt;ord&gt;     &lt;int&gt;
1 Fair       1610
2 Good       4906
3 Very Good 12082
4 Premium   13791
5 Ideal     21551</code></pre>
</div>
</div>
<p><strong><em>Method 1</em></strong>: Create bar chart using <code>geom_bar()</code></p>
<ul>
<li>note: <code>geom_bar()</code> uses <code>stat = "count"</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> diamonds, <span class="fu">aes</span>(<span class="at">x =</span> cut)) <span class="sc">+</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-130-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong><em>Method 2</em></strong>: Create bar chart using <code>geom_col()</code></p>
<p>By contrast, help file says <code>geom_col()</code> uses ” uses <code>stat_identity()</code>: it leaves the data as is.”</p>
<ul>
<li>So before we create chart using <code>geom_col()</code> we create an object that contains the frequency count for the variable <code>cut</code>:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>cut_count <span class="ot">&lt;-</span> diamonds <span class="sc">%&gt;%</span> <span class="fu">count</span>(cut)</span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>cut_count</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  cut           n
  &lt;ord&gt;     &lt;int&gt;
1 Fair       1610
2 Good       4906
3 Very Good 12082
4 Premium   13791
5 Ideal     21551</code></pre>
</div>
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>cut_count <span class="sc">%&gt;%</span> <span class="fu">str</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [5 × 2] (S3: tbl_df/tbl/data.frame)
 $ cut: Ord.factor w/ 5 levels "Fair"&lt;"Good"&lt;..: 1 2 3 4 5
 $ n  : int [1:5] 1610 4906 12082 13791 21551</code></pre>
</div>
</div>
<ul>
<li>Note that the object <code>cut_count</code> is just a data frame with two variables:
<ul>
<li><code>cut</code> is a factor variable with five levels</li>
<li><code>n</code> is an integer variable, showing the number of observations for each level of <code>cut</code></li>
</ul></li>
<li>Next, use <code>ggplot() + geom_col</code> to plot the data from the object <code>cut_count</code>:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> cut_count, <span class="fu">aes</span>(<span class="at">x =</span> cut, <span class="at">y=</span>n)) <span class="sc">+</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-134-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>note: if we didn’t specify the aesthetic <code>y=n</code> we would get an error because <code>y</code> is a required aesthetic for <code>geom_col()</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> cut_count, <span class="fu">aes</span>(<span class="at">x =</span> cut)) <span class="sc">+</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Alternatively, we can use pipes to create the plot without creating a separate <code>cut_count</code> object first:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="co">#diamonds %&gt;% count(cut) %&gt;% str()</span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> <span class="fu">count</span>(cut) <span class="sc">%&gt;%</span> <span class="fu">str</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [5 × 2] (S3: tbl_df/tbl/data.frame)
 $ cut: Ord.factor w/ 5 levels "Fair"&lt;"Good"&lt;..: 1 2 3 4 5
 $ n  : int [1:5] 1610 4906 12082 13791 21551</code></pre>
</div>
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> <span class="fu">count</span>(cut) <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span> cut, <span class="at">y=</span>n)) <span class="sc">+</span> </span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-138-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Student Task</strong>: Using the <code>els_v2</code> dataset, create a bar chart with the variable “ever attended postsecondary education” (<code>f2evratt</code>) as x-axis and number of students as y-axis</p>
<details>
<summary>
Solution
</summary>
<ul>
<li>Essentially, you are being asked to create a bar chart from the following frequency count:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>els_v2 <span class="sc">%&gt;%</span> <span class="fu">count</span>(f2evratt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  f2evratt     n
     &lt;int&gt; &lt;int&gt;
1        1   359
2        2  1691
3        3   108
4        4  3505
5        5 10534</code></pre>
</div>
</div>
<p><strong><em>Method 1</em></strong>: Create bar chart using <code>geom_bar()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> els_v2, <span class="fu">aes</span>(<span class="at">x =</span> f2evratt)) <span class="sc">+</span></span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-144-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>Additionally, we can use pipes to filter values of <code>f2evratt</code> before plotting:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="co">#check variable f2evratt</span></span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(els_v2<span class="sc">$</span>f2evratt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "integer"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(els_v2<span class="sc">$</span>f2evratt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "integer"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(els_v2<span class="sc">$</span>f2evratt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> int [1:16197] 1 5 5 5 5 4 5 5 2 5 ...
 - attr(*, "levels")= chr [1:5] "Survey component legitimate skip/NA" "Nonrespondent" "Item legitimate skip/NA" "No" ...
 - attr(*, "label")= chr "Whether has ever attended a postsecondary institution - composite"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(els_v2<span class="sc">$</span>f2evratt)<span class="sc">$</span>levels</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Survey component legitimate skip/NA" "Nonrespondent"                      
[3] "Item legitimate skip/NA"             "No"                                 
[5] "Yes"                                </code></pre>
</div>
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="co">#new factor var</span></span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>els_v2<span class="sc">$</span>attend_coll_fac <span class="ot">&lt;-</span> <span class="fu">factor</span>(els_v2<span class="sc">$</span>f2evratt,</span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Survey component legitimate skip/NA"</span>, <span class="st">"Nonrespondent"</span>, <span class="st">"Item legitimate skip/NA"</span>, <span class="st">"No"</span>, <span class="st">"Yes"</span>))</span>
<span id="cb125-4"><a href="#cb125-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-5"><a href="#cb125-5" aria-hidden="true" tabindex="-1"></a><span class="co">#check variable</span></span>
<span id="cb125-6"><a href="#cb125-6" aria-hidden="true" tabindex="-1"></a>els_v2 <span class="sc">%&gt;%</span></span>
<span id="cb125-7"><a href="#cb125-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(attend_coll_fac)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  attend_coll_fac                         n
  &lt;fct&gt;                               &lt;int&gt;
1 Survey component legitimate skip/NA   359
2 Nonrespondent                        1691
3 Item legitimate skip/NA               108
4 No                                   3505
5 Yes                                 10534</code></pre>
</div>
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a>els_v2 <span class="sc">%&gt;%</span></span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(f2evratt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  f2evratt     n
     &lt;int&gt; &lt;int&gt;
1        1   359
2        2  1691
3        3   108
4        4  3505
5        5 10534</code></pre>
</div>
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(els_v2<span class="sc">$</span>attend_coll_fac)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "integer"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(els_v2<span class="sc">$</span>attend_coll_fac)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "factor"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="co">#els_v2 %&gt;% filter(f2evratt %in% c('No','Yes')) %&gt;% ggplot(aes(x = f2evratt)) +</span></span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  geom_bar()</span></span>
<span id="cb133-3"><a href="#cb133-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-4"><a href="#cb133-4" aria-hidden="true" tabindex="-1"></a>els_v2 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(attend_coll_fac <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">'No'</span>,<span class="st">'Yes'</span>)) <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> attend_coll_fac)) <span class="sc">+</span></span>
<span id="cb133-5"><a href="#cb133-5" aria-hidden="true" tabindex="-1"></a> <span class="fu">geom_bar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-146-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong><em>Method 2</em></strong>: Create bar chart using <code>geom_col()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="co">#els_v2 %&gt;% </span></span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filter to remove missing values</span></span>
<span id="cb134-3"><a href="#cb134-3" aria-hidden="true" tabindex="-1"></a><span class="co">#  filter(f2evratt %in% c('No','Yes')) %&gt;% </span></span>
<span id="cb134-4"><a href="#cb134-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># use count() to create summary statistics object</span></span>
<span id="cb134-5"><a href="#cb134-5" aria-hidden="true" tabindex="-1"></a><span class="co">#  count(f2evratt) %&gt;%</span></span>
<span id="cb134-6"><a href="#cb134-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># plot summary statistic object</span></span>
<span id="cb134-7"><a href="#cb134-7" aria-hidden="true" tabindex="-1"></a><span class="co">#  ggplot(aes(x=f2evratt, y=n)) + geom_col()</span></span>
<span id="cb134-8"><a href="#cb134-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-9"><a href="#cb134-9" aria-hidden="true" tabindex="-1"></a>els_v2 <span class="sc">%&gt;%</span> </span>
<span id="cb134-10"><a href="#cb134-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filter to remove missing values</span></span>
<span id="cb134-11"><a href="#cb134-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(attend_coll_fac <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">'No'</span>,<span class="st">'Yes'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb134-12"><a href="#cb134-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># use count() to create summary statistics object</span></span>
<span id="cb134-13"><a href="#cb134-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(attend_coll_fac) <span class="sc">%&gt;%</span></span>
<span id="cb134-14"><a href="#cb134-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># plot summary statistic object</span></span>
<span id="cb134-15"><a href="#cb134-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>attend_coll_fac, <span class="at">y=</span>n)) <span class="sc">+</span> <span class="fu">geom_col</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-148-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</details>
<p><br></p>
<!-- Relationship between discrete x and discrete y -->
</section>
</section>
<section id="small-multiples-using-faceting" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="small-multiples-using-faceting"><span class="header-section-number">3.3</span> Small multiples using faceting</h2>
<p><strong>Facets</strong> divide a plot into subplots based on the values of one or more discrete variables. They are most commonly used to create “small multiples”</p>
<p>Two functions to split your plots into facets:</p>
<ul>
<li><code>facet_grid()</code>: Display subplots in grid format, where rows and columns are determined by the faceting variable(s)
<ul>
<li><code>facet_grid()</code> is most useful when you have two discrete variables, and all combinations of the variables exist in the data</li>
</ul></li>
<li><code>facet_wrap()</code>: Display all subplots side-by-side, but can be wrapped to fill multiple rows
<ul>
<li><code>facet_wrap()</code> generally has better use of screen space, and you can specify the number of plots in each row or column</li>
</ul></li>
</ul>
<p><br></p>
<p><strong>The <code>facet_grid()</code> and <code>facet_wrap()</code> functions</strong>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a>?facet_grid</span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-3"><a href="#cb135-3" aria-hidden="true" tabindex="-1"></a><span class="co"># SYNTAX AND DEFAULT VALUES</span></span>
<span id="cb135-4"><a href="#cb135-4" aria-hidden="true" tabindex="-1"></a><span class="fu">facet_grid</span>(<span class="at">rows =</span> <span class="cn">NULL</span>, <span class="at">cols =</span> <span class="cn">NULL</span>, <span class="at">scales =</span> <span class="st">"fixed"</span>,</span>
<span id="cb135-5"><a href="#cb135-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">space =</span> <span class="st">"fixed"</span>, <span class="at">shrink =</span> <span class="cn">TRUE</span>, <span class="at">labeller =</span> <span class="st">"label_value"</span>,</span>
<span id="cb135-6"><a href="#cb135-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">as.table =</span> <span class="cn">TRUE</span>, <span class="at">switch =</span> <span class="cn">NULL</span>, <span class="at">drop =</span> <span class="cn">TRUE</span>, <span class="at">margins =</span> <span class="cn">FALSE</span>,</span>
<span id="cb135-7"><a href="#cb135-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">facets =</span> <span class="cn">NULL</span>)</span>
<span id="cb135-8"><a href="#cb135-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-9"><a href="#cb135-9" aria-hidden="true" tabindex="-1"></a>?facet_wrap</span>
<span id="cb135-10"><a href="#cb135-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-11"><a href="#cb135-11" aria-hidden="true" tabindex="-1"></a><span class="co"># SYNTAX AND DEFAULT VALUES</span></span>
<span id="cb135-12"><a href="#cb135-12" aria-hidden="true" tabindex="-1"></a><span class="fu">facet_wrap</span>(facets, <span class="at">nrow =</span> <span class="cn">NULL</span>, <span class="at">ncol =</span> <span class="cn">NULL</span>, <span class="at">scales =</span> <span class="st">"fixed"</span>,</span>
<span id="cb135-13"><a href="#cb135-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">shrink =</span> <span class="cn">TRUE</span>, <span class="at">labeller =</span> <span class="st">"label_value"</span>, <span class="at">as.table =</span> <span class="cn">TRUE</span>,</span>
<span id="cb135-14"><a href="#cb135-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">switch =</span> <span class="cn">NULL</span>, <span class="at">drop =</span> <span class="cn">TRUE</span>, <span class="at">dir =</span> <span class="st">"h"</span>, <span class="at">strip.position =</span> <span class="st">"top"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Specifying which variable(s) to facet your plot on:</p>
<ul>
<li><code>facet_grid()</code>
<ul>
<li>Since <code>facet_grid()</code> arranges subplots in a grid format, we need to specify how we define the rows and columns</li>
<li>One way to do this is passing in the <code>rows</code> and <code>cols</code> arguments, which should be variables quoted by <code>vars()</code>
<ul>
<li><code>facet_grid(rows = vars(&lt;var_1&gt;), cols = vars(&lt;var_2&gt;))</code>: facet into both rows and columns</li>
<li><code>facet_grid(rows = vars(&lt;var_1&gt;))</code>: facet into rows only</li>
<li><code>facet_grid(cols = vars(&lt;var_1&gt;))</code>: facet into columns only</li>
</ul></li>
<li>Alternatively, we can pass in a <em>formula</em>, which has the syntax <code>&lt;row_var&gt; ~ &lt;col_var&gt;</code>
<ul>
<li><code>facet_grid(&lt;var_1&gt; ~ &lt;var_2&gt;)</code>: facet into both rows and columns</li>
<li><code>facet_grid(&lt;var_1&gt; ~ .)</code>: facet into rows only</li>
<li><code>facet_grid(. ~ &lt;var_1&gt;)</code>: facet into columns only</li>
</ul></li>
</ul></li>
<li><code>facet_wrap()</code>
<ul>
<li><code>facet_wrap()</code> also accepts a <em>formula</em> for its <code>facets</code> argument
<ul>
<li><code>facet_wrap(~ &lt;var_1&gt;)</code>: facet by one variable</li>
<li><code>facet_wrap(&lt;var_1&gt; ~ &lt;var_2&gt;)</code>: facet on the combination of two variables</li>
</ul></li>
</ul></li>
</ul>
<section id="faceting-by-one-variable" class="level3" data-number="3.3.1">
<h3 data-number="3.3.1" class="anchored" data-anchor-id="faceting-by-one-variable"><span class="header-section-number">3.3.1</span> Faceting by one variable</h3>
<p><strong>Example</strong>: Scatterplot of the relationship between engine displacement (<code>displ</code>) and highway miles-per-gallon (<code>hwy</code>), faceted by number of cylinders (<code>cyl</code>), from the <code>mpg</code> dataset</p>
<p><strong><em>Method 1</em></strong>: Faceting using <code>facet_grid()</code></p>
<ul>
<li>For one variable, you can choose to facet into rows or columns:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Facet into rows</span></span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy)) <span class="sc">+</span></span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb136-4"><a href="#cb136-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="at">rows =</span> <span class="fu">vars</span>(cyl))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-154-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Facet into columns</span></span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy)) <span class="sc">+</span></span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb137-4"><a href="#cb137-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(cyl))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-156-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>Alternatively, we could specify the input as a <em>formula</em> to get the same results:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Facet into rows</span></span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy)) <span class="sc">+</span></span>
<span id="cb138-3"><a href="#cb138-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb138-4"><a href="#cb138-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(cyl <span class="sc">~</span> .)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-158-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Facet into columns</span></span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy)) <span class="sc">+</span></span>
<span id="cb139-3"><a href="#cb139-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb139-4"><a href="#cb139-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(. <span class="sc">~</span> cyl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-160-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong><em>Method 2</em></strong>: Faceting using <code>facet_wrap()</code></p>
<ul>
<li>Unlike <code>facet_grid()</code>, <code>facet_wrap()</code> is not restricted to either rows or columns:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy)) <span class="sc">+</span></span>
<span id="cb140-2"><a href="#cb140-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb140-3"><a href="#cb140-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> cyl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-162-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>But we are free to set the number of rows or columns if we wanted:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy)) <span class="sc">+</span></span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> cyl, <span class="at">nrow =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-164-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy)) <span class="sc">+</span></span>
<span id="cb142-2"><a href="#cb142-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb142-3"><a href="#cb142-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> cyl, <span class="at">ncol =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-166-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="faceting-by-two-variables" class="level3" data-number="3.3.2">
<h3 data-number="3.3.2" class="anchored" data-anchor-id="faceting-by-two-variables"><span class="header-section-number">3.3.2</span> Faceting by two variables</h3>
<p><strong>Example</strong>: Scatterplot of the relationship between engine displacement (<code>displ</code>) and highway miles-per-gallon (<code>hwy</code>), faceted by number of cylinders (<code>cyl</code>) and type of car (<code>class</code>), from the <code>mpg</code> dataset</p>
<p><strong><em>Method 1</em></strong>: Faceting using <code>facet_grid()</code></p>
<ul>
<li>For example, we can make the rows based on <code>cyl</code> and the columns based on <code>class</code>:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy)) <span class="sc">+</span></span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb143-3"><a href="#cb143-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="at">rows =</span> <span class="fu">vars</span>(cyl), <span class="at">cols =</span> <span class="fu">vars</span>(class))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-168-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>Alternatively, we could specify the input as a <em>formula</em> to get the same results:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb144"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy)) <span class="sc">+</span></span>
<span id="cb144-2"><a href="#cb144-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb144-3"><a href="#cb144-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(cyl <span class="sc">~</span> class)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-170-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong><em>Method 2</em></strong>: Faceting using <code>facet_wrap()</code></p>
<ul>
<li>Since <code>facet_wrap()</code> is not defined by rows and columns, it omits any subplots that do not display any data:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy)) <span class="sc">+</span></span>
<span id="cb145-2"><a href="#cb145-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb145-3"><a href="#cb145-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(cyl <span class="sc">~</span> class)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-172-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>We are also free to choose the number of rows or columns to display:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb146"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy)) <span class="sc">+</span></span>
<span id="cb146-2"><a href="#cb146-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb146-3"><a href="#cb146-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(cyl <span class="sc">~</span> class, <span class="at">nrow =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-174-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy)) <span class="sc">+</span></span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb147-3"><a href="#cb147-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(cyl <span class="sc">~</span> class, <span class="at">ncol =</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-176-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="customization" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Customization</h1>
<p>There are many ways to customize the display of our plot. For this section, we will build upon this scatterplot we saw earlier:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb148-2"><a href="#cb148-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price)) <span class="sc">+</span> </span>
<span id="cb148-3"><a href="#cb148-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-178-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="labels" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="labels"><span class="header-section-number">4.1</span> Labels</h2>
<p>Functions to add title and axis labels:</p>
<ul>
<li><code>ggtitle()</code>: Add title of graph</li>
<li><code>xlab()</code>: Add x-axis label</li>
<li><code>ylab()</code>: Add y-axis label</li>
</ul>
<p><strong>Example</strong>: Adding title and axis labels</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price)) <span class="sc">+</span> </span>
<span id="cb149-3"><a href="#cb149-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb149-4"><a href="#cb149-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">'Correlation between diamond carat and price'</span>) <span class="sc">+</span></span>
<span id="cb149-5"><a href="#cb149-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">'Carat'</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">'Price'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-180-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><br> Alternatively, the <code>labs()</code> function can be used to add all titles and labels:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a>?labs</span>
<span id="cb150-2"><a href="#cb150-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb150-3"><a href="#cb150-3" aria-hidden="true" tabindex="-1"></a><span class="co"># SYNTAX AND DEFAULT VALUES</span></span>
<span id="cb150-4"><a href="#cb150-4" aria-hidden="true" tabindex="-1"></a><span class="fu">labs</span>(</span>
<span id="cb150-5"><a href="#cb150-5" aria-hidden="true" tabindex="-1"></a>  ...,</span>
<span id="cb150-6"><a href="#cb150-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="fu">waiver</span>(),</span>
<span id="cb150-7"><a href="#cb150-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">subtitle =</span> <span class="fu">waiver</span>(),</span>
<span id="cb150-8"><a href="#cb150-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">caption =</span> <span class="fu">waiver</span>(),</span>
<span id="cb150-9"><a href="#cb150-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">tag =</span> <span class="fu">waiver</span>()</span>
<span id="cb150-10"><a href="#cb150-10" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><em>Note</em>: A <strong>waiver</strong> is a “flag” object, similar to <code>NULL</code>, that indicates the calling function should just use the default value. It is used in certain functions to distinguish between displaying nothing (<code>NULL</code>) and displaying a default value calculated elsewhere (<code>waiver()</code>).</p>
<p><strong>Example</strong>: Adding title and axis labels using <code>labs()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price)) <span class="sc">+</span> </span>
<span id="cb151-3"><a href="#cb151-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb151-4"><a href="#cb151-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">'Correlation between diamond carat and price'</span>, <span class="at">x =</span> <span class="st">'Carat'</span>, <span class="at">y =</span> <span class="st">'Price'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-184-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="scales" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="scales"><span class="header-section-number">4.2</span> Scales</h2>
<p>The <strong><code>scale_x_continuous()</code></strong> function is used to control the display of the x-axis when x is a continuous variable.</p>
<p>Similarly, the <strong><code>scale_y_continuous()</code></strong> function is to control the display of the y-axis when y is a continuous variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb152"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a>?scale_x_continuous</span>
<span id="cb152-2"><a href="#cb152-2" aria-hidden="true" tabindex="-1"></a>?scale_y_continuous</span>
<span id="cb152-3"><a href="#cb152-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-4"><a href="#cb152-4" aria-hidden="true" tabindex="-1"></a><span class="co"># SYNTAX AND DEFAULT VALUES</span></span>
<span id="cb152-5"><a href="#cb152-5" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_x_continuous</span>(</span>
<span id="cb152-6"><a href="#cb152-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">name =</span> <span class="fu">waiver</span>(),</span>
<span id="cb152-7"><a href="#cb152-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">breaks =</span> <span class="fu">waiver</span>(),</span>
<span id="cb152-8"><a href="#cb152-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">minor_breaks =</span> <span class="fu">waiver</span>(),</span>
<span id="cb152-9"><a href="#cb152-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">n.breaks =</span> <span class="cn">NULL</span>,</span>
<span id="cb152-10"><a href="#cb152-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">labels =</span> <span class="fu">waiver</span>(),</span>
<span id="cb152-11"><a href="#cb152-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">limits =</span> <span class="cn">NULL</span>,</span>
<span id="cb152-12"><a href="#cb152-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">expand =</span> <span class="fu">waiver</span>(),</span>
<span id="cb152-13"><a href="#cb152-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">oob =</span> censor,</span>
<span id="cb152-14"><a href="#cb152-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">na.value =</span> <span class="cn">NA_real_</span>,</span>
<span id="cb152-15"><a href="#cb152-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">trans =</span> <span class="st">"identity"</span>,</span>
<span id="cb152-16"><a href="#cb152-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">guide =</span> <span class="fu">waiver</span>(),</span>
<span id="cb152-17"><a href="#cb152-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">position =</span> <span class="st">"bottom"</span>,</span>
<span id="cb152-18"><a href="#cb152-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">sec.axis =</span> <span class="fu">waiver</span>()</span>
<span id="cb152-19"><a href="#cb152-19" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb152-20"><a href="#cb152-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-21"><a href="#cb152-21" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_y_continuous</span>(</span>
<span id="cb152-22"><a href="#cb152-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">name =</span> <span class="fu">waiver</span>(),</span>
<span id="cb152-23"><a href="#cb152-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">breaks =</span> <span class="fu">waiver</span>(),</span>
<span id="cb152-24"><a href="#cb152-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">minor_breaks =</span> <span class="fu">waiver</span>(),</span>
<span id="cb152-25"><a href="#cb152-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">n.breaks =</span> <span class="cn">NULL</span>,</span>
<span id="cb152-26"><a href="#cb152-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">labels =</span> <span class="fu">waiver</span>(),</span>
<span id="cb152-27"><a href="#cb152-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">limits =</span> <span class="cn">NULL</span>,</span>
<span id="cb152-28"><a href="#cb152-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">expand =</span> <span class="fu">waiver</span>(),</span>
<span id="cb152-29"><a href="#cb152-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">oob =</span> censor,</span>
<span id="cb152-30"><a href="#cb152-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">na.value =</span> <span class="cn">NA_real_</span>,</span>
<span id="cb152-31"><a href="#cb152-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">trans =</span> <span class="st">"identity"</span>,</span>
<span id="cb152-32"><a href="#cb152-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">guide =</span> <span class="fu">waiver</span>(),</span>
<span id="cb152-33"><a href="#cb152-33" aria-hidden="true" tabindex="-1"></a>  <span class="at">position =</span> <span class="st">"left"</span>,</span>
<span id="cb152-34"><a href="#cb152-34" aria-hidden="true" tabindex="-1"></a>  <span class="at">sec.axis =</span> <span class="fu">waiver</span>()</span>
<span id="cb152-35"><a href="#cb152-35" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Description (from help file)
<ul>
<li>“<code>scale_x_continuous()</code> and <code>scale_y_continuous()</code> are the default scales for continuous x and y aesthetics.”</li>
</ul></li>
<li>Arguments
<ul>
<li><code>name</code>: The name of the scale. Used as the axis or legend title.</li>
<li><code>labels</code>: Custom labelling of the scales (i.e., ticks)</li>
<li><code>limits</code>: Limits of the scale (i.e., min/max values)</li>
<li><code>position</code>: The position of the axis. (<code>'left'</code> or <code>'right'</code> for y axes, <code>'top'</code> or <code>'bottom'</code> for x axes)</li>
</ul></li>
</ul>
<p><br></p>
<p>To force “decimal display” of numbers (rather than scientific notation), we can use the <code>label_number()</code> function like this:</p>
<ul>
<li><code>scale_y_continuous(labels = label_number(...))</code></li>
</ul>
<p><strong>The <code>label_number()</code> function</strong>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a>?label_number</span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-3"><a href="#cb153-3" aria-hidden="true" tabindex="-1"></a><span class="co"># SYNTAX AND DEFAULT VALUES</span></span>
<span id="cb153-4"><a href="#cb153-4" aria-hidden="true" tabindex="-1"></a><span class="fu">label_number</span>(</span>
<span id="cb153-5"><a href="#cb153-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">accuracy =</span> <span class="cn">NULL</span>,</span>
<span id="cb153-6"><a href="#cb153-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">scale =</span> <span class="dv">1</span>,</span>
<span id="cb153-7"><a href="#cb153-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">prefix =</span> <span class="st">""</span>,</span>
<span id="cb153-8"><a href="#cb153-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">suffix =</span> <span class="st">""</span>,</span>
<span id="cb153-9"><a href="#cb153-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">big.mark =</span> <span class="st">" "</span>,</span>
<span id="cb153-10"><a href="#cb153-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">decimal.mark =</span> <span class="st">"."</span>,</span>
<span id="cb153-11"><a href="#cb153-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">trim =</span> <span class="cn">TRUE</span>,</span>
<span id="cb153-12"><a href="#cb153-12" aria-hidden="true" tabindex="-1"></a>  ...</span>
<span id="cb153-13"><a href="#cb153-13" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Description (from help file)
<ul>
<li>“Use <code>label_number()</code> force decimal display of numbers (i.e.&nbsp;don’t use scientific notation)”</li>
</ul></li>
<li>Arguments
<ul>
<li><code>accuracy</code>: A number to round to (e.g.&nbsp;use 0.01 to show 2 decimal places of precision)</li>
<li><code>scale</code>: A scaling factor (e.g., x will be multiplied by scale before formatting)</li>
<li><code>prefix</code>: Symbols to display before value</li>
<li><code>suffix</code>: Symbols to display after value</li>
</ul></li>
</ul>
<p><br> <strong>Example</strong>: Formatting numbers on the y-axis</p>
<p>We can use <code>scale_y_continuous()</code>, in conjunction with <code>label_number()</code> from the <code>scales</code> package, to format the numbers on the y-axis:</p>
<ul>
<li>Use <code>prefix</code> to add <code>$</code> before the number</li>
<li>Use <code>suffix</code> to add <code>K</code> after the number</li>
<li>Use <code>scale</code> of <code>1e-3</code> to divide number by <code>1000</code></li>
<li>Use <code>accuracy</code> of <code>1</code> to round number to the ones digit</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb154"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb154-2"><a href="#cb154-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price)) <span class="sc">+</span> </span>
<span id="cb154-3"><a href="#cb154-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb154-4"><a href="#cb154-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">'Correlation between diamond carat and price'</span>) <span class="sc">+</span></span>
<span id="cb154-5"><a href="#cb154-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">'Carat'</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">'Price'</span>) <span class="sc">+</span></span>
<span id="cb154-6"><a href="#cb154-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_number</span>(<span class="at">prefix =</span> <span class="st">'$'</span>, <span class="at">suffix =</span> <span class="st">'K'</span>, <span class="at">scale =</span> <span class="fl">1e-3</span>, <span class="at">accuracy =</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-190-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>Alternatively, we could specify scale like this: <code>scale = .001</code>:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price)) <span class="sc">+</span> </span>
<span id="cb155-3"><a href="#cb155-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb155-4"><a href="#cb155-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">'Correlation between diamond carat and price'</span>) <span class="sc">+</span></span>
<span id="cb155-5"><a href="#cb155-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">'Carat'</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">'Price'</span>) <span class="sc">+</span></span>
<span id="cb155-6"><a href="#cb155-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_number</span>(<span class="at">prefix =</span> <span class="st">'$'</span>, <span class="at">suffix =</span> <span class="st">'K'</span>, <span class="at">scale =</span> .<span class="dv">001</span>, <span class="at">accuracy =</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-192-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="colors" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="colors"><span class="header-section-number">4.3</span> Colors</h2>
<p>Below, we briefly overview some core concepts when using colors. This will be helpful when creating graphs.</p>
<section id="hcl-color-space" class="level3" data-number="4.3.1">
<h3 data-number="4.3.1" class="anchored" data-anchor-id="hcl-color-space"><span class="header-section-number">4.3.1</span> HCL Color Space</h3>
<p>The HCL color space is based on how the human perception works. “When using HCL, you can directly control the color (hue), the colorness (chroma) and the luminance (brightness).” (<a href="https://hclwizard.org/why-hcl/">Why HCL from hcl wizard</a>)</p>
<p><strong>Hue</strong></p>
<p>Hue refers to a specific color we see from one of the six Primary and Secondary colors in the Color Family– Yellow, Orange, Red, Violent, Blue, or Green. This means that Black, Gray, and White are not Hues.</p>
<ul>
<li>Example: Burgundy has a dominant hue of red.</li>
</ul>
<p><a href="https://www.color-wheel-artist.com/hue/"><img src="https://color-wheel-artist.com/thrive/wp-content/uploads/2017/02/hue-color-wheel-featured.jpg" class="img-fluid"></a></p>
<p><strong>Color</strong></p>
<p>Color and Hue are used interchangeably, however, Color is used to describe hues, tints, shades, and tones.</p>
<ul>
<li>Example: Black, Gray, and White are colors.</li>
</ul>
<p><strong>Value</strong></p>
<p>The value of a color is determined by how close the color is to Black or White. The closer a color is to Black, the darker the value and the closer a color is to White, the lighter the value.</p>
<ul>
<li>Example: It is helpful to use a grayscale to determine the value of a color.</li>
</ul>
<p><a href="https://www.sensationalcolor.com/hue-value-chroma/"><img src="https://www.sensationalcolor.com/wp-content/uploads/2019/06/Black-to-White-Graph.jpg" class="img-fluid"></a></p>
<ul>
<li>“All colors fall somewhere on the value scale between black and white” (<a href="https://www.sensationalcolor.com/hue-value-chroma/">Hue, Value, Chroma Explained from sensationalcolor.com</a>)</li>
</ul>
<p><strong>Chroma</strong></p>
<ul>
<li><p>Chroma expresses the “purity” of a color. “Mixing a pure hue with black, white, gray, or any other color reduces its purity and lowers the chroma.” (<a href="https://www.sensationalcolor.com/hue-value-chroma/">Hue, Value, Chroma Explained from sensationalcolor.com</a>)</p></li>
<li><p>Example: The image below displays the changes of a “pure” hue when adding the color white or black to it. As the red squares on the far left column are blended with white, they become lighter in value and lower in chroma and as the squares are blended with black, they become darker in value and lower in chroma.</p></li>
</ul>
<p><strong>Hue, Value, and Chroma</strong> <a href="https://www.sensationalcolor.com/hue-value-chroma/"><img src="https://www.sensationalcolor.com/wp-content/uploads/2019/07/Value-Chroma-Chart.jpg" class="img-fluid"></a></p>
<p><strong>Luminance</strong></p>
<ul>
<li><p>“Luminance is a measure to describe the perceived brightness of a colour. In other words, how bright is the colour from a reflected surface.” (<a href="https://medium.com/sketch-app-sources/mixing-colours-of-equal-luminance-part-1-41f69518d647#:~:text=Luminance%20is%20a%20measure%20to,normalised%20to%20100%25%20for%20white.">Mixing Colors of equal Luminance- Part 1 author: Colin Shanley</a>)</p></li>
<li><p>Example: The Hue-Chroma-Luminance (HCL) color scheme.</p></li>
</ul>
<p><a href="https://hclwizard.org/color-scheme/"><img src="https://hclwizard.org/images//hclscheme_pic0.png" class="img-fluid"></a></p>
</section>
<section id="rcolorbrewer-palettes" class="level3" data-number="4.3.2">
<h3 data-number="4.3.2" class="anchored" data-anchor-id="rcolorbrewer-palettes"><span class="header-section-number">4.3.2</span> RColorBrewer Palettes</h3>
<p>The <code>RColorBrewer</code> package is a helpful tool for managing colors in R. It offers several color palettes to choose from.</p>
<p><br> Visualization of color palettes (e.g., <code>scale_color_brewer(palette=Pastel2)</code>) <a href="http://www.sthda.com/english/wiki/ggplot2-colors-how-to-change-colors-automatically-and-manually"><img src="http://www.sthda.com/sthda/RDoc/images/rcolorbrewer.png" class="img-fluid"></a> <br></p>
<p>Palettes are a combination of colors displayed together. In <code>RColorBrewer</code>, there are three types of palette scales: sequential, diverging, and qualitative.</p>
<ul>
<li><p><strong>Sequential</strong>: Sequential palettes are best suited for ordered data that progress from low to high i.e., where colors go from high to low chroma and/or luminance.</p>
<ul>
<li>Sequential palette names: Blues, BuGn, BuPu, GnBu, Greens, Greys, Oranges, OrRd, PuBu, PuBuGn, PuRd, Purples, RdPu, Reds, YlGn, YlGnBu, YlOrBr, YlOrRd</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb156"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="fu">display.brewer.all</span>(<span class="at">type=</span><span class="st">"seq"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-194-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div></li>
<li><p><strong>Diverging</strong>: Diverging palettes represent ordered data but in two directions. The middle represents a neutral value and the opposite ends represent two extremes. The hue distinguishes the direction of the values.</p>
<ul>
<li>Diverging palette names: BrBG, PiYG, PRGn, PuOr, RdBu, RdGy, RdYlBu, RdYlGn, Spectral</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="fu">display.brewer.all</span>(<span class="at">type=</span><span class="st">"div"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-196-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li><strong>Qualitative</strong>: Qualitative palettes are best suited for representing nominal or categorical data. There is not particular ordering of categories; every hue represents a different value where chroma and luminance are equal.
<ul>
<li>Qualitative palette names: Accent, Dark2, Paired, Pastel1, Pastel2, Set1, Set2, Set3</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb158"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="fu">display.brewer.all</span>(<span class="at">type=</span><span class="st">"qual"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-198-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>You can run the code below to identify color-blind-friendly palettes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="fu">display.brewer.all</span>(<span class="at">colorblindFriendly=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-200-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Sources: (<a href="https://r-graph-gallery.com/38-rcolorbrewers-palettes.html">R Color Brewer’s palettes</a>); (<a href="https://hclwizard.org/#somewhere-over-the-rainbow">HCL Color Space</a>)</p>
<p>To select a specific color not part of the <code>RColorBrewer</code> package or other color packages, you can use this tool to select a color</p>
<p><br> <a href="https://r-graph-gallery.com/ggplot2-color.html"><img src="https://r-graph-gallery.com/img/graph/42-colors-names.png" class="img-fluid"></a></p>
<p><br></p>
</section>
<section id="scale_color_brewer-for-discrete-variables" class="level3" data-number="4.3.3">
<h3 data-number="4.3.3" class="anchored" data-anchor-id="scale_color_brewer-for-discrete-variables"><span class="header-section-number">4.3.3</span> <code>scale_color_brewer()</code> for discrete variables</h3>
<p>Bringing it all together to apply the <code>scale_color_brewer()</code> and <code>scale_color_gradient()</code> functions to our graphs.</p>
<p>There are several ways to customize the color palettes of the plot. <code>scale_color_brewer()</code> is used when we want to color discrete/categorical variables and <code>scale_color_gradient()</code> is used when we want to color continuous variables.</p>
<p><br> <strong>The <code>scale_color_brewer()</code> function</strong> for categorical/discrete variables</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb160"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a>?scale_color_brewer</span>
<span id="cb160-2"><a href="#cb160-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-3"><a href="#cb160-3" aria-hidden="true" tabindex="-1"></a><span class="co"># SYNTAX AND DEFAULT VALUES</span></span>
<span id="cb160-4"><a href="#cb160-4" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_color_brewer</span>(</span>
<span id="cb160-5"><a href="#cb160-5" aria-hidden="true" tabindex="-1"></a>  ...,</span>
<span id="cb160-6"><a href="#cb160-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">type =</span> <span class="st">"seq"</span>,</span>
<span id="cb160-7"><a href="#cb160-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">palette =</span> <span class="dv">1</span>,</span>
<span id="cb160-8"><a href="#cb160-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">direction =</span> <span class="dv">1</span>,</span>
<span id="cb160-9"><a href="#cb160-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">aesthetics =</span> <span class="st">"colour"</span></span>
<span id="cb160-10"><a href="#cb160-10" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Description (from help file)
<ul>
<li>“The <code>brewer</code> scales provides sequential, diverging and qualitative colour schemes from ColorBrewer”</li>
</ul></li>
<li>Arguments
<ul>
<li><code>palette</code>: “If a string, will use that named palette. If a number, will index into the list of palettes of appropriate type. The list of available palettes can found in the Palettes section”</li>
<li><code>direction</code>: “Sets the order of colours in the scale. If 1, the default, colours are as output by <code>RColorBrewer::brewer.pal()</code>. If -1, the order of colours is reversed.”</li>
<li><code>aesthetics</code>: which aesthetic mappings the <code>scale_color_brewer()</code> function should apply to. Default is <code>aesthetics = "colour"</code></li>
</ul></li>
</ul>
<p><br> <strong>Example</strong>: Customizing color palette of discrete scale</p>
<p>We’ll color the points of the scatterplot by the variable <code>color</code></p>
<ul>
<li>from <code>?diamonds</code>, the variable <code>color</code> is described as “diamond colour, from D (best) to J (worst)”
<ul>
<li><code>diamonds$color</code> is an “ordered” “factor” variable with factor levels shown below</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> <span class="fu">count</span>(color)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 2
  color     n
  &lt;ord&gt; &lt;int&gt;
1 D      6775
2 E      9797
3 F      9542
4 G     11292
5 H      8304
6 I      5422
7 J      2808</code></pre>
</div>
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a>diamonds<span class="sc">$</span>color <span class="sc">%&gt;%</span> <span class="fu">class</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "ordered" "factor" </code></pre>
</div>
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a>diamonds<span class="sc">$</span>color <span class="sc">%&gt;%</span> <span class="fu">attributes</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$class
[1] "ordered" "factor" 

$levels
[1] "D" "E" "F" "G" "H" "I" "J"</code></pre>
</div>
</div>
<p>First, let’s create a scatterplot of the relationship between carat (x-axis) and price (y-axis) with color of points determined by the variable <code>color</code> and we’ll use the default display (i.e., don’t specify <code>scale_color_brewer()</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb167"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb167-2"><a href="#cb167-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price, <span class="at">color =</span> color)) <span class="sc">+</span> </span>
<span id="cb167-3"><a href="#cb167-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb167-4"><a href="#cb167-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">'Correlation between diamond carat and price'</span>) <span class="sc">+</span></span>
<span id="cb167-5"><a href="#cb167-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">'Carat'</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">'Price'</span>) <span class="sc">+</span></span>
<span id="cb167-6"><a href="#cb167-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_number</span>(<span class="at">prefix =</span> <span class="st">'$'</span>, <span class="at">suffix =</span> <span class="st">'K'</span>, <span class="at">scale =</span> <span class="fl">1e-3</span>, <span class="at">accuracy =</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-206-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>We can use <code>scale_color_brewer()</code> to customize the color palette. This also accepts other arguments for labeling including <code>name</code> to specify the legend title:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb168"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb168-2"><a href="#cb168-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price, <span class="at">color =</span> color)) <span class="sc">+</span> </span>
<span id="cb168-3"><a href="#cb168-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb168-4"><a href="#cb168-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">'Correlation between diamond carat and price'</span>) <span class="sc">+</span></span>
<span id="cb168-5"><a href="#cb168-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">'Carat'</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">'Price'</span>) <span class="sc">+</span></span>
<span id="cb168-6"><a href="#cb168-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_number</span>(<span class="at">prefix =</span> <span class="st">'$'</span>, <span class="at">suffix =</span> <span class="st">'K'</span>, <span class="at">scale =</span> <span class="fl">1e-3</span>, <span class="at">accuracy =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb168-7"><a href="#cb168-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">'Spectral'</span>, <span class="at">name =</span> <span class="st">'Diamond color'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-208-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>Use <code>direction = -1</code> to reverse the order of colors drawn from the (‘Spectral’) palette</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb169-2"><a href="#cb169-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price, <span class="at">color =</span> color)) <span class="sc">+</span> </span>
<span id="cb169-3"><a href="#cb169-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb169-4"><a href="#cb169-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">'Correlation between diamond carat and price'</span>) <span class="sc">+</span></span>
<span id="cb169-5"><a href="#cb169-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">'Carat'</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">'Price'</span>) <span class="sc">+</span></span>
<span id="cb169-6"><a href="#cb169-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_number</span>(<span class="at">prefix =</span> <span class="st">'$'</span>, <span class="at">suffix =</span> <span class="st">'K'</span>, <span class="at">scale =</span> <span class="fl">1e-3</span>, <span class="at">accuracy =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb169-7"><a href="#cb169-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">'Spectral'</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">name =</span> <span class="st">'Diamond color'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-210-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="scale_color_gradient-for-continuous-variables" class="level3" data-number="4.3.4">
<h3 data-number="4.3.4" class="anchored" data-anchor-id="scale_color_gradient-for-continuous-variables"><span class="header-section-number">4.3.4</span> <code>scale_color_gradient()</code> for continuous variables</h3>
<p>To color continuous variables, we need a <em>color gradient</em>, which is defined as “a gradual blending from one color to another” (<a href="https://xd.adobe.com/ideas/principles/web-design/gradient-color-definition/">Being Shady: How to Use Gradient Color in UX Design</a>). A <em>two-color gradient</em> transitions from one color to another (e.g., red to blue), where one end is called the <em>low end</em> of the gradient and the other is the <em>high end</em> of the gradient. There can also be other gradients between more than 2 colors (e.g., red to yellow to blue).</p>
<p><strong>The <code>scale_color_gradient()</code> function</strong>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb170"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a>?scale_color_gradient</span>
<span id="cb170-2"><a href="#cb170-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb170-3"><a href="#cb170-3" aria-hidden="true" tabindex="-1"></a><span class="co"># SYNTAX AND DEFAULT VALUES</span></span>
<span id="cb170-4"><a href="#cb170-4" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_color_gradient</span>(</span>
<span id="cb170-5"><a href="#cb170-5" aria-hidden="true" tabindex="-1"></a>  ...,</span>
<span id="cb170-6"><a href="#cb170-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">low =</span> <span class="st">"#132B43"</span>,</span>
<span id="cb170-7"><a href="#cb170-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">high =</span> <span class="st">"#56B1F7"</span>,</span>
<span id="cb170-8"><a href="#cb170-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">space =</span> <span class="st">"Lab"</span>,</span>
<span id="cb170-9"><a href="#cb170-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">na.value =</span> <span class="st">"grey50"</span>,</span>
<span id="cb170-10"><a href="#cb170-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">guide =</span> <span class="st">"colourbar"</span>,</span>
<span id="cb170-11"><a href="#cb170-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">aesthetics =</span> <span class="st">"colour"</span></span>
<span id="cb170-12"><a href="#cb170-12" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Description (from help file)
<ul>
<li>“<code>scale_*_gradient</code> creates a two colour gradient (low-high)”</li>
</ul></li>
<li>Arguments
<ul>
<li><code>low</code>: Color for low end of the gradient</li>
<li><code>high</code>: Color for high end of the gradient</li>
</ul></li>
</ul>
<p><br> <strong>Example</strong>: Customizing color palette of continuous scale</p>
<p>Let’s color the points by the variable <code>diamonds$depth</code>, which represents “diamond depth percentage”</p>
<ul>
<li>from <a href="https://www.brilliance.com/education/diamonds/depth-table">brilliance.com</a>: “Depth percentage is the diamond’s depth [height] divided by the width of the diamond. This percentage dictates the overall proportions of the diamond, which in turn directly impact how light reflects off the facets in the stone.</li>
<li>The variable <code>diamonds$depth</code> is a continous variable</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> <span class="fu">select</span>(depth) <span class="sc">%&gt;%</span></span>
<span id="cb171-2"><a href="#cb171-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize_all</span>(<span class="at">.funs =</span> <span class="fu">list</span>(<span class="sc">~</span> <span class="fu">mean</span>(., <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="sc">~</span> <span class="fu">sd</span>(., <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="sc">~</span> <span class="fu">min</span>(., <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="sc">~</span> <span class="fu">max</span>(., <span class="at">na.rm =</span> <span class="cn">TRUE</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 4
   mean    sd   min   max
  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1  61.7  1.43    43    79</code></pre>
</div>
</div>
<p>First, color scatterplot by <code>depth</code> using the default display palette:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb173"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb173-2"><a href="#cb173-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price, <span class="at">color =</span> depth)) <span class="sc">+</span> </span>
<span id="cb173-3"><a href="#cb173-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb173-4"><a href="#cb173-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">'Correlation between diamond carat and price'</span>) <span class="sc">+</span></span>
<span id="cb173-5"><a href="#cb173-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">'Carat'</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">'Price'</span>) <span class="sc">+</span></span>
<span id="cb173-6"><a href="#cb173-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_number</span>(<span class="at">prefix =</span> <span class="st">'$'</span>, <span class="at">suffix =</span> <span class="st">'K'</span>, <span class="at">scale =</span> <span class="fl">1e-3</span>, <span class="at">accuracy =</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-216-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Next, let’s add <code>scale_color_gradient()</code> but we’ll manually insert the default values for <code>low</code> and <code>high</code> arguments:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb174"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb174-2"><a href="#cb174-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price, <span class="at">color =</span> depth)) <span class="sc">+</span> </span>
<span id="cb174-3"><a href="#cb174-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb174-4"><a href="#cb174-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">'Correlation between diamond carat and price'</span>) <span class="sc">+</span></span>
<span id="cb174-5"><a href="#cb174-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">'Carat'</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">'Price'</span>) <span class="sc">+</span></span>
<span id="cb174-6"><a href="#cb174-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_number</span>(<span class="at">prefix =</span> <span class="st">'$'</span>, <span class="at">suffix =</span> <span class="st">'K'</span>, <span class="at">scale =</span> <span class="fl">1e-3</span>, <span class="at">accuracy =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb174-7"><a href="#cb174-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_gradient</span>(<span class="at">low =</span> <span class="st">'#132B43'</span>, <span class="at">high =</span> <span class="st">'#56B1F7'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-218-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>We can use <code>scale_color_gradient()</code> to customize the color palette. This also accepts other arguments for labeling including <code>name</code> to specify the legend title and <code>labels</code> to customize the legend values:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb175"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb175-2"><a href="#cb175-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price, <span class="at">color =</span> depth)) <span class="sc">+</span> </span>
<span id="cb175-3"><a href="#cb175-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb175-4"><a href="#cb175-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">'Correlation between diamond carat and price'</span>) <span class="sc">+</span></span>
<span id="cb175-5"><a href="#cb175-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">'Carat'</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">'Price'</span>) <span class="sc">+</span></span>
<span id="cb175-6"><a href="#cb175-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_number</span>(<span class="at">prefix =</span> <span class="st">'$'</span>, <span class="at">suffix =</span> <span class="st">'K'</span>, <span class="at">scale =</span> <span class="fl">1e-3</span>, <span class="at">accuracy =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb175-7"><a href="#cb175-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_gradient</span>(<span class="at">low =</span> <span class="st">'white'</span>, <span class="at">high =</span> <span class="st">'purple'</span>, <span class="at">name =</span> <span class="st">'Depth percentage'</span>, </span>
<span id="cb175-8"><a href="#cb175-8" aria-hidden="true" tabindex="-1"></a>                       <span class="at">labels =</span> <span class="fu">label_number</span>(<span class="at">suffix =</span> <span class="st">'%'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-220-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="scale_color_manual-to-select-specific-colors" class="level3" data-number="4.3.5">
<h3 data-number="4.3.5" class="anchored" data-anchor-id="scale_color_manual-to-select-specific-colors"><span class="header-section-number">4.3.5</span> <code>scale_color_manual()</code> to select specific colors</h3>
<p>If we want to customize our graph by selecting specific colors we could use <code>scale_color_manual()</code>. We could specify colors by their name (e.g., “red”, “darkgreen”), rgb(), Number, and hex code (<a href="https://r-graph-gallery.com/ggplot2-color.html">Dealing with colors in ggplot2</a>)</p>
<p><strong>The <code>scale_color_manual()</code> function</strong>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb176"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a>?scale_color_manual</span>
<span id="cb176-2"><a href="#cb176-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-3"><a href="#cb176-3" aria-hidden="true" tabindex="-1"></a><span class="co"># SYNTAX AND DEFAULT VALUES</span></span>
<span id="cb176-4"><a href="#cb176-4" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_colour_manual</span>(</span>
<span id="cb176-5"><a href="#cb176-5" aria-hidden="true" tabindex="-1"></a>  ...,</span>
<span id="cb176-6"><a href="#cb176-6" aria-hidden="true" tabindex="-1"></a>  values,</span>
<span id="cb176-7"><a href="#cb176-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">aesthetics =</span> <span class="st">"colour"</span>,</span>
<span id="cb176-8"><a href="#cb176-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">breaks =</span> <span class="fu">waiver</span>(),</span>
<span id="cb176-9"><a href="#cb176-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">na.value =</span> <span class="st">"grey50"</span></span>
<span id="cb176-10"><a href="#cb176-10" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Description (from help file)
<ul>
<li>“These functions allow you to specify your own set of mappings from levels in the data to aesthetic values.”</li>
</ul></li>
<li>Arguments
<ul>
<li><code>values</code>: a set of aesthetic values to map data values to.</li>
</ul></li>
</ul>
<p><br> <strong>Example</strong>: Customizing our graph color palette</p>
<p>Let’s go back to our example scatterplot of the relationship between carat (x-axis) and price (y-axis) with color of points determined by the variable <code>color</code>.</p>
<p>We can manually select colors by their name (<a href="https://r-graph-gallery.com/42-colors-names.html">An overview of color names in R</a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb177"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb177-2"><a href="#cb177-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price, <span class="at">color =</span> color)) <span class="sc">+</span> </span>
<span id="cb177-3"><a href="#cb177-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb177-4"><a href="#cb177-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">'Correlation between diamond carat and price'</span>) <span class="sc">+</span></span>
<span id="cb177-5"><a href="#cb177-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">'Carat'</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">'Price'</span>) <span class="sc">+</span></span>
<span id="cb177-6"><a href="#cb177-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_number</span>(<span class="at">prefix =</span> <span class="st">'$'</span>, <span class="at">suffix =</span> <span class="st">'K'</span>, <span class="at">scale =</span> <span class="fl">1e-3</span>, <span class="at">accuracy =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb177-7"><a href="#cb177-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"D"</span> <span class="ot">=</span> <span class="st">"darkcyan"</span>,</span>
<span id="cb177-8"><a href="#cb177-8" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"E"</span> <span class="ot">=</span> <span class="st">"beige"</span>,</span>
<span id="cb177-9"><a href="#cb177-9" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"F"</span> <span class="ot">=</span> <span class="st">"darkorange"</span>,</span>
<span id="cb177-10"><a href="#cb177-10" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"G"</span> <span class="ot">=</span> <span class="st">"darkslateblue"</span>,</span>
<span id="cb177-11"><a href="#cb177-11" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"H"</span> <span class="ot">=</span> <span class="st">"darkmagenta"</span>,</span>
<span id="cb177-12"><a href="#cb177-12" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"I"</span> <span class="ot">=</span> <span class="st">"darkslategrey"</span>,</span>
<span id="cb177-13"><a href="#cb177-13" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"J"</span> <span class="ot">=</span> <span class="st">"brown4"</span>),</span>
<span id="cb177-14"><a href="#cb177-14" aria-hidden="true" tabindex="-1"></a>                     <span class="at">name =</span> <span class="st">'Diamond color'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-224-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>If we want to be more specific, we could manually select colors by their Hex code (<a href="https://htmlcolorcodes.com/">Hex Code Selector</a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb178"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb178-2"><a href="#cb178-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price, <span class="at">color =</span> color)) <span class="sc">+</span> </span>
<span id="cb178-3"><a href="#cb178-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb178-4"><a href="#cb178-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">'Correlation between diamond carat and price'</span>) <span class="sc">+</span></span>
<span id="cb178-5"><a href="#cb178-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">'Carat'</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">'Price'</span>) <span class="sc">+</span></span>
<span id="cb178-6"><a href="#cb178-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_number</span>(<span class="at">prefix =</span> <span class="st">'$'</span>, <span class="at">suffix =</span> <span class="st">'K'</span>, <span class="at">scale =</span> <span class="fl">1e-3</span>, <span class="at">accuracy =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb178-7"><a href="#cb178-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"D"</span> <span class="ot">=</span> <span class="st">"#E73813"</span>,</span>
<span id="cb178-8"><a href="#cb178-8" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"E"</span> <span class="ot">=</span> <span class="st">"#E7B713"</span>,</span>
<span id="cb178-9"><a href="#cb178-9" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"F"</span> <span class="ot">=</span> <span class="st">"#F3EF10"</span>,</span>
<span id="cb178-10"><a href="#cb178-10" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"G"</span> <span class="ot">=</span> <span class="st">"#45B39D"</span>,</span>
<span id="cb178-11"><a href="#cb178-11" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"H"</span> <span class="ot">=</span> <span class="st">"#0F85C8"</span>,</span>
<span id="cb178-12"><a href="#cb178-12" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"I"</span> <span class="ot">=</span> <span class="st">"#850FC8"</span>,</span>
<span id="cb178-13"><a href="#cb178-13" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"J"</span> <span class="ot">=</span> <span class="st">"#B90FCD"</span></span>
<span id="cb178-14"><a href="#cb178-14" aria-hidden="true" tabindex="-1"></a>                                ),</span>
<span id="cb178-15"><a href="#cb178-15" aria-hidden="true" tabindex="-1"></a>                     <span class="at">name =</span> <span class="st">'Diamond color'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-226-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="themes" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="themes"><span class="header-section-number">4.4</span> Themes</h2>
<p>From “<a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">Complete Themes</a>,” <strong>themes</strong> control “non-data display.”</p>
<ul>
<li>A <strong>theme</strong> controls all non-data display (i.e., stuff not determined by values of the data)</li>
<li>Use <code>theme()</code> “if you just need to tweak the display of an existing theme”</li>
<li>Use one of the following “complete themes” (preset themes) if you want to control <strong>all</strong> non-data display of a plot, e.g.:
<ul>
<li><code>theme_grey()</code> (<em>default</em>)</li>
<li><code>theme_bw()</code></li>
<li><code>theme_light()</code></li>
<li><code>theme_dark()</code></li>
<li><code>theme_minimal()</code></li>
<li><code>theme_classic()</code></li>
</ul></li>
</ul>
<p><strong>Example</strong>: Using preset theme <code>theme_minimal()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb179"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb179-2"><a href="#cb179-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price, <span class="at">color =</span> color)) <span class="sc">+</span> </span>
<span id="cb179-3"><a href="#cb179-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb179-4"><a href="#cb179-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">'Correlation between diamond carat and price'</span>) <span class="sc">+</span></span>
<span id="cb179-5"><a href="#cb179-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">'Carat'</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">'Price'</span>) <span class="sc">+</span></span>
<span id="cb179-6"><a href="#cb179-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_number</span>(<span class="at">prefix =</span> <span class="st">'$'</span>, <span class="at">suffix =</span> <span class="st">'K'</span>, <span class="at">scale =</span> <span class="fl">1e-3</span>, <span class="at">accuracy =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb179-7"><a href="#cb179-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">'Spectral'</span>, <span class="at">name =</span> <span class="st">'Color'</span>) <span class="sc">+</span></span>
<span id="cb179-8"><a href="#cb179-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-228-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Example</strong>: Using preset theme <code>theme_dark()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb180"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb180-2"><a href="#cb180-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price, <span class="at">color =</span> color)) <span class="sc">+</span> </span>
<span id="cb180-3"><a href="#cb180-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb180-4"><a href="#cb180-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">'Correlation between diamond carat and price'</span>) <span class="sc">+</span></span>
<span id="cb180-5"><a href="#cb180-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">'Carat'</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">'Price'</span>) <span class="sc">+</span></span>
<span id="cb180-6"><a href="#cb180-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_number</span>(<span class="at">prefix =</span> <span class="st">'$'</span>, <span class="at">suffix =</span> <span class="st">'K'</span>, <span class="at">scale =</span> <span class="fl">1e-3</span>, <span class="at">accuracy =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb180-7"><a href="#cb180-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">'Spectral'</span>, <span class="at">name =</span> <span class="st">'Color'</span>) <span class="sc">+</span></span>
<span id="cb180-8"><a href="#cb180-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_dark</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-230-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><br> We can also use <a href="https://ggplot2.tidyverse.org/reference/theme.html"><code>theme()</code></a> to customize specific non-data components of the plot, including:</p>
<ul>
<li>Font family, size, color of text</li>
<li>Color and gridlines of plot background</li>
<li>Display and positioning of axes and labels</li>
</ul>
<p><strong>Example</strong>: Using custom theme</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb181"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb181-2"><a href="#cb181-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price, <span class="at">color =</span> color)) <span class="sc">+</span> </span>
<span id="cb181-3"><a href="#cb181-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb181-4"><a href="#cb181-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">'Correlation between diamond carat and price'</span>) <span class="sc">+</span></span>
<span id="cb181-5"><a href="#cb181-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">'Carat'</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">'Price'</span>) <span class="sc">+</span></span>
<span id="cb181-6"><a href="#cb181-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_number</span>(<span class="at">prefix =</span> <span class="st">'$'</span>, <span class="at">suffix =</span> <span class="st">'K'</span>, <span class="at">scale =</span> <span class="fl">1e-3</span>, <span class="at">accuracy =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb181-7"><a href="#cb181-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">'Spectral'</span>, <span class="at">name =</span> <span class="st">'Color'</span>) <span class="sc">+</span></span>
<span id="cb181-8"><a href="#cb181-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb181-9"><a href="#cb181-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>),</span>
<span id="cb181-10"><a href="#cb181-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.background =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb181-11"><a href="#cb181-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">'#444444'</span>, <span class="at">size =</span> <span class="dv">10</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">face =</span> <span class="st">'bold'</span>),</span>
<span id="cb181-12"><a href="#cb181-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb181-13"><a href="#cb181-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">'bold'</span>),</span>
<span id="cb181-14"><a href="#cb181-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">'bold'</span>),</span>
<span id="cb181-15"><a href="#cb181-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.key =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb181-16"><a href="#cb181-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="fl">0.5</span>, <span class="st">'cm'</span>)</span>
<span id="cb181-17"><a href="#cb181-17" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot_files/figure-html/unnamed-chunk-232-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="exporting-plots" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Exporting plots</h1>
<p>The plots generated by <code>ggplot</code> can be exported as a PDF, PNG, or other file types. (From <a href="http://www.sthda.com/english/wiki/creating-and-saving-graphs-r-base-graphs">Creating and Saving Graphs - R Base Graphs</a>)</p>
<p>When working with RMarkdown files, you can directly embed the code for the plot within code chunks to knit into the final document. But for R scripts, there may be times where you want to save the plot outputs to be used elsewhere.</p>
<p>There are many different kinds of file formats, including: (<a href="https://tmieno2.github.io/R-as-GIS-for-Economists/ggsave.html">Saving a <code>ggplot</code> object as an image</a>)</p>
<ul>
<li><strong>vector graphics</strong> (pdf, svg, eps)</li>
<li><strong>raster graphics</strong> (jpg, png, tif)</li>
</ul>
<p>The main difference is that vector graphics are scalable, meaning the image retains its quality when enlarged, so they are generally preferred over raster graphics when possible.</p>
<section id="exporting-in-rstudio" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="exporting-in-rstudio"><span class="header-section-number">5.1</span> Exporting in RStudio</h2>
<p>In RStudio, the generated plots will typically be displayed in the lower right panel. There is an <code>Export</code> button that allows you to save the plot as a PDF or PNG:</p>
<p><a href="http://www.sthda.com/english/wiki/creating-and-saving-graphs-r-base-graphs"><img src="http://www.sthda.com/sthda/RDoc/images/create-save-plots-r.png" class="img-fluid"></a></p>
</section>
<section id="exporting-via-r-code" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="exporting-via-r-code"><span class="header-section-number">5.2</span> Exporting via R code</h2>
<p>There are also various R functions, including <code>jpeg()</code>, <code>png()</code>, <code>svg()</code>, and <code>pdf()</code>, for exporting plots.</p>
<p>The steps for saving a plot:</p>
<ul>
<li><p>Use one of the R functions to open a file</p>
<ul>
<li>Optional arguments include <code>height</code> and <code>width</code> for specifying image dimension</li>
</ul></li>
<li><p>Create the plot</p></li>
<li><p>Close the file with <code>dev.off()</code></p></li>
<li><p><em>Note</em>: You have to run the code chuck or lines together for the code to work</p></li>
</ul>
<p><strong>Example</strong>: Exporting plot using <code>pdf()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb182"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Open the file</span></span>
<span id="cb182-2"><a href="#cb182-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pdf</span>(<span class="st">'Rplot.pdf'</span>) <span class="co">#indicating the file type "pdf" and the name of the file "Rplot.pdf"</span></span>
<span id="cb182-3"><a href="#cb182-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb182-4"><a href="#cb182-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the plot</span></span>
<span id="cb182-5"><a href="#cb182-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy, <span class="at">color =</span> class)) <span class="sc">+</span> </span>
<span id="cb182-6"><a href="#cb182-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span>
<span id="cb182-7"><a href="#cb182-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb182-8"><a href="#cb182-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Close the file</span></span>
<span id="cb182-9"><a href="#cb182-9" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Example</strong>: Exporting plot using <code>jpeg()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb183"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Open the file</span></span>
<span id="cb183-2"><a href="#cb183-2" aria-hidden="true" tabindex="-1"></a><span class="fu">jpeg</span>(<span class="st">'Rplot.jpg'</span>, <span class="at">width =</span> <span class="dv">350</span>, <span class="at">height =</span> <span class="dv">350</span>)</span>
<span id="cb183-3"><a href="#cb183-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb183-4"><a href="#cb183-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the plot</span></span>
<span id="cb183-5"><a href="#cb183-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy, <span class="at">color =</span> class)) <span class="sc">+</span> </span>
<span id="cb183-6"><a href="#cb183-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span>
<span id="cb183-7"><a href="#cb183-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb183-8"><a href="#cb183-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Close the file</span></span>
<span id="cb183-9"><a href="#cb183-9" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="references" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> References</h1>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>